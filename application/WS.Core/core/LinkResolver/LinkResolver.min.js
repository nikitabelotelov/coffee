define("Core/LinkResolver/LinkResolver",["Core/core-extend","Core/helpers/getResourceUrl"],function(e,t){"use strict";function i(e){for(var r=[],i=0;i<e.length;i++)r.push(s(e[i]));return r.join("/")}function s(e,r){var i=e;if(i=i.replace(/(\/|\\)+$/,""),!r)i=i.replace(/^(\/|\\)+/,"");return i}function r(){return{WS:"WS.Core",Lib:"WS.Core/lib",Ext:"WS.Core/lib/Ext",Deprecated:"WS.Deprecated",Helpers:"WS.Core/core/helpers",Transport:"WS.Core/transport",bootup:"WS.Core/res/js/bootup","bootup-min":"WS.Core/res/js/bootup-min","old-bootup":"WS.Core/res/js/old-bootup",tslib:"WS.Core/ext/tslib",Resources:"","WS.Core":"WS.Core",Core:"WS.Core/core",css:"WS.Core/ext/requirejs/plugins/css","native-css":"WS.Core/ext/requirejs/plugins/native-css",normalize:"WS.Core/ext/requirejs/plugins/normalize",html:"WS.Core/ext/requirejs/plugins/html",tmpl:"WS.Core/ext/requirejs/plugins/tmpl",wml:"WS.Core/ext/requirejs/plugins/wml",text:"WS.Core/ext/requirejs/plugins/text",is:"WS.Core/ext/requirejs/plugins/is","is-api":"WS.Core/ext/requirejs/plugins/is-api",i18n:"WS.Core/ext/requirejs/plugins/i18n",json:"WS.Core/ext/requirejs/plugins/json",order:"WS.Core/ext/requirejs/plugins/order",template:"WS.Core/ext/requirejs/plugins/template",cdn:"WS.Core/ext/requirejs/plugins/cdn",datasource:"WS.Core/ext/requirejs/plugins/datasource",xml:"WS.Core/ext/requirejs/plugins/xml",preload:"WS.Core/ext/requirejs/plugins/preload",browser:"WS.Core/ext/requirejs/plugins/browser",optional:"WS.Core/ext/requirejs/plugins/optional",remote:"WS.Core/ext/requirejs/plugins/remote",router:"router",jquery:"/cdn/jquery/3.3.1/jquery-min"}}function o(e){var r=e;return r=r.replace(/\\/g,"/")}var n=s(o(wsConfig._baseUrl),true),u;return e.extend([],{constructor:function(e,r,i,t,s){this.isDebug=e,this.buildNumber=r||"",this.wsRootFolder=i.replace(s,"");var o="";if(t&&!(s&&~s.indexOf(t)))o+="/"+t+"/";if(s)o+="/"+s+"/";this.resourceRoot=("/"+o).replace(/[\/]+/g,"/"),this.originResourceRoot=s,this.initPaths()},resolveLinkTemplated:function(e){var r=e;if(r=this.fixOldAndBundles(e),!~e.indexOf("%"))r=this.originResourceRoot+r;return r},initPathsServerSide:function(){var e={WS:"WS.Core",Lib:"WS.Core/lib",Ext:"WS.Core/lib/Ext",Deprecated:"WS.Deprecated",Helpers:"WS.Core/core/helpers",Transport:"WS.Core/transport",bootup:"WS.Core/res/js/bootup","bootup-min":"WS.Core/res/js/bootup-min","old-bootup":"WS.Core/res/js/old-bootup",tslib:"WS.Core/ext/tslib",Resources:"","WS.Core":"WS.Core",Core:"WS.Core/core",css:"WS.Core/ext/requirejs/plugins/css","native-css":"WS.Core/ext/requirejs/plugins/native-css",normalize:"WS.Core/ext/requirejs/plugins/normalize",html:"WS.Core/ext/requirejs/plugins/html",tmpl:"WS.Core/ext/requirejs/plugins/tmpl",wml:"WS.Core/ext/requirejs/plugins/wml",text:"WS.Core/ext/requirejs/plugins/text",is:"WS.Core/ext/requirejs/plugins/is","is-api":"WS.Core/ext/requirejs/plugins/is-api",i18n:"WS.Core/ext/requirejs/plugins/i18n",json:"WS.Core/ext/requirejs/plugins/json",order:"WS.Core/ext/requirejs/plugins/order",template:"WS.Core/ext/requirejs/plugins/template",cdn:"WS.Core/ext/requirejs/plugins/cdn",datasource:"WS.Core/ext/requirejs/plugins/datasource",xml:"WS.Core/ext/requirejs/plugins/xml",preload:"WS.Core/ext/requirejs/plugins/preload",browser:"WS.Core/ext/requirejs/plugins/browser",optional:"WS.Core/ext/requirejs/plugins/optional",remote:"WS.Core/ext/requirejs/plugins/remote",router:"router",jquery:"/cdn/jquery/3.3.1/jquery-min"};this.paths=e},initPaths:function(e){if("undefined"===typeof window)this.initPathsServerSide();else{var e=e||requirejs.s.contexts._.config.paths,r={},i;for(var t in e){if(0!==(i=e[t]).indexOf("/"))i="/"+i;i=i.split(this.resourceRoot)[1],r[t]=i}this.paths=r}},getLinkWithResourceRoot:function(e){var r=i([this.resourceRoot,e]);if(0!==r.indexOf("/"))r="/"+r;return r},isRelativeLink:function(e){if(0===e.indexOf("/"))return false;else return true},fixOldAndBundles:function(e){var r=e,i="";for(var t in this.paths)if(0===e.indexOf(t))if(t.length>i.length)i=t;if(i.length&&this.paths[i])r=r.replace(i,this.paths[i]);return r},resolveLink:function(e,r){if(!this.isRelativeLink(e))return this.getLinkWithExt(e,r,false);else if(~this.resourceRoot.indexOf("%"))return this.getLinkWithExt(this.resolveLinkTemplated(e),r);var i=e;return i=this.fixOldAndBundles(i),i=this.getLinkWithResourceRoot(i),i=this.getLinkWithExt(i,r,!this.isDebug),i=t(i)},resolveCssWithTheme:function(e,r){var i=e;return i=this.getLinkWithResourceRoot(i),i=this.getLinkWithTheme(i,r),i=this.getLinkWithExt(i,"css",!this.isDebug)},getLinkWithTheme:function(e,r){if(!r)return e;return e+"_"+r},getLinkWithExt:function(e,r,i){var t=e;if(!i)t=e+"."+r;else{if("min"!==e.slice(-3))t=e+".min."+r;else t=e+"."+r;if(this.buildNumber)t=t+"?x_version="+this.buildNumber}return t}})});