define("Core/WindowAttachLoader",["require","Core/IAttachLoader","Env/Env","Core/deprecated"],function(l,e,t,a){var r=e.extend({attach:function(e,t,a){var r=e.replace(/^.*\.([^\.]+)(\?.*)?$/gi,"$1").toLowerCase(),c=e,n={css:{tag:"LINK",rel:"stylesheet",type:"text/css",href:c},js:{tag:"SCRIPT",charset:a&&a.charset||"UTF-8",type:"text/javascript",src:c}}[r];if(void 0!==n){var o=document.getElementsByTagName("head")[0],s=document.createElement(n.tag),d=false;for(var i in delete n.tag,n)s.setAttribute(i,n[i]);switch(s.onerror=function(){t.errback(new Error("attach: cannot load resource: "+c))},s.tagName.toUpperCase()){case"LINK":l(["native-css!"+c],function(){t.callback()},function(e){t.errback(e)});break;case"SCRIPT":s.onload=s.onreadystatechange=function(){var e=this.readyState;if(!d&&(!e||"loaded"==e||"complete"==e))d=true,s.onload=s.onreadystatechange=null,t.callback("")},o.appendChild(s)}}else t.errback(new Error("attach: Unknown resource type specified: "+e))}});return r.attach=a(r.attach,{name:"WindowAttachLoader.attach",ver:"3.7.5",use:"requirejs"}),t.IoC.bindSingle("IAttachLoader",r),r});