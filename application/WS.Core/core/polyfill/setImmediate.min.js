(function(n,a){"use strict";if(n.setImmediate)return;var s=1,o={},i=false,c=n.document,r;function e(e){if("function"!==typeof e)e=new Function(""+e);for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[s]=a,r(s),s++}function f(e){delete o[e]}function l(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(a,n)}}function u(e){if(i)setTimeout(u,0,e);else{var t=o[e];if(t){i=true;try{l(t)}finally{f(e),i=false}}}}function t(){r=function(e){process.nextTick(function(){u(e)})}}function d(){if(n.postMessage&&!n.importScripts){var e=true,t=n.onmessage;return n.onmessage=function(){e=false},n.postMessage("","*"),n.onmessage=t,e}}function g(){var t="setImmediate$"+Math.random()+"$",e=function(e){if(e.source===n&&"string"===typeof e.data&&0===e.data.indexOf(t))u(+e.data.slice(t.length))};if(n.addEventListener)n.addEventListener("message",e,false);else n.attachEvent("onmessage",e);r=function(e){n.postMessage(t+e,"*")}}function m(){var t=new MessageChannel;t.port1.onmessage=function(e){var t;u(e.data)},r=function(e){t.port2.postMessage(e)}}function p(){var n=c.documentElement;r=function(e){var t=c.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}}function v(){r=function(e){setTimeout(u,0,e)}}var h=Object.getPrototypeOf&&Object.getPrototypeOf(n);if(h=h&&h.setTimeout?h:n,"[object process]"==={}.toString.call(n.process))t();else if(d())g();else if(n.MessageChannel)m();else if(c&&"onreadystatechange"in c.createElement("script"))p();else v();h.setImmediate=e,h.clearImmediate=f})("undefined"===typeof self?"undefined"===typeof global?this:global:self);