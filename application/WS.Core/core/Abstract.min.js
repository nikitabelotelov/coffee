define("Core/Abstract",["Core/core-extend","Core/Abstract.compatible","Core/helpers/Function/shallowClone","Env/Event","Env/Env"],function(t,n,e){var o=t([n],{_$eventBusId:null,_handlers:null,_moduleName:"Core/Abstract",_eventBusChannel:null,_isDestroyed:false,_isInitialized:false,_isAbstractInitialized:false,_subscriptions:null,_subDestroyControls:null,constructor:function t(o,n){if(!(o=o||{}).handlers)o.handlers={};if(this._handlers=this._handlers||(o.handlers&&"object"==typeof o.handlers?e(o.handlers):{}),this._subscriptions=this._subscriptions||[],this._subDestroyControls=this._subDestroyControls||[],!this._options)this._setOptions(o,true);for(var i in this._publish("onInit","onInitComplete","onReady","onDestroy"),o)if(~i.indexOf("on:"))(function(e,t){t.subscribe(e.split("on:")[1],function t(){var n=[];for(var i in arguments)if(arguments.hasOwnProperty(i))n[i]=arguments[i];n=n.concat(o[e][0].args),o[e][0].fn.apply(o.logicParent,n),o.logicParent&&o.logicParent._forceUpdate&&o.logicParent._forceUpdate()})})(i,this);if(!n)this._initInstance()},_initInstance:function(){if(this.$constructor)return;this.init(),this._initComplete(),this._isInitialized=true,this._allowEvents(),this._constructionDone()},init:function(){if(this._isAbstractInitialized)throw new Error('При инициализации компонента "'+(this.getName&&this.getName())+'"  функция init была вызвана более одного раза.');else this._isAbstractInitialized=true;this._notify("onInit")},_initComplete:function(){},_constructionDone:function(){this._notify("onInitComplete")},describe:function(){return"Abstract"},_setCompatibleOptions:function(t,n,i){n=n||[];var e=t.prototype,o="_$",s,r,c,l,a,p,u,f;for(f=0;f<n.length;f++)if((l=n[f]).$protected&&l.$protected._options)for(a in u=l.$protected._options)if(u.hasOwnProperty(a)){if(!s)s={};s[a]=true}if(!(c=s||i.$protected||i.$constructor||i._dotTplFn))return;if(!i.$protected)i.$protected={};if(!i.$protected._options)i.$protected._options={};for(a in r=i.$protected._options,e)if(a.substring(0,2)===o){if(p=a.substring(2),s&&s.hasOwnProperty(p))continue;if(r.hasOwnProperty(p))continue;r[p]=e[a]}}});return o.beforeExtend=function(t,n,i){o.prototype._setCompatibleOptions(t,n,i)},o});