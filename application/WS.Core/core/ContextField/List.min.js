define("Core/ContextField/List",["Core/ContextField/Base","Types/collection","Core/Context"],function(e,t,s){"use strict";var n=e.extend({"[Core/ContextField/List]":true,name:"ControlsFieldTypeList",get:function(e,t){var n,i,r,o;if(0===t.length)return e;if((i=c(n=t[0]))<0||i>=e.getCount())return s.NonExistentValue;return r=e.at(i),(o=s.getValueType(r)).get(r,t.slice(1))},setWillChange:function(e,t,n){var i,r,o,u,l;if(0===t.length)return e!==n;if(r=c(u=t[0]),i=t.length>1&&r>=0&&r<e.getCount())o=e.at(r),i=(l=s.getValueType(o)).setWillChange(o,t.slice(1),n);return i},set:function(e,t,n){var i,r,o,u,l;if(0===t.length)return n;if(i=(o=c(r=t[0]))>=0&&o<e.getCount())if(t.length>1)u=e.at(o),(l=s.getValueType(u)).set(u,t.slice(1),n);return e},remove:function(e,t){var n,i,r,o,u;if(n=t.length>0)if(r=c(i=t[0]),n=t.length>1&&r>=0&&r<e.getCount())o=e.at(r),n=(u=s.getValueType(o)).remove(o,t.slice(1)).changed;return{value:e,changed:n}},toJSON:function(e,t){if(!t)return e;var n=[];return e.each(function(e){n.push(e)}),n},subscribe:function(e,t){return e.subscribe("onCollectionChange",t),e.subscribe("onCollectionItemChange",t),function(){e.unsubscribe("onCollectionChange",t),e.unsubscribe("onCollectionItemChange",t)}}});function c(e){return String.prototype.split.call(e,",")[0]}return s.registerFieldType(new n(t.List)),n});