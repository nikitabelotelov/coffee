define("Core/EventBus",["Core/EventBusChannel","Core/detection","Core/constants"],function(t,o,n){"use strict";var a;function i(n){a.removeChannel(n.getName())}function e(){var e=Date.now(),n,t=2*60*1e3;if(setInterval(function(){var n=Date.now();if(n-e>=t)a.globalChannel().notify("onWakeUp",e);e=n},1260),o.isMobilePlatform)document.addEventListener("visibilitychange",function(){if(!document.hidden)a.globalChannel().notify("onWakeUp",e),e=Date.now()},false)}if(a={_channels:{},channel:function(n,e){if(1==arguments.length&&"object"==typeof n)e=n,n="";if(!n)return new t(e);if(n=n.toLowerCase(),!(((e=e||{}).name=n)in this._channels))e["destroyCallback"]=i,this._channels[n]=new t(e);return this._channels[n]},removeChannel:function(n){delete this._channels[n.toLowerCase()]},hasChannel:function(n){return void 0!==this._channels[n.toLowerCase()]},globalChannel:function(){return a.channel("global")}},n.isBrowserPlatform)e();return a});