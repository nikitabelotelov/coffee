define("Core/generatePageURL",["Core/constants","Core/IoC","Core/helpers/Object/isEmpty","Transport/serializeURLData"],function(i,m,h,p){return function(e,r,a){if(e.editDialogTemplate&&(i.htmlNames[e.editDialogTemplate]||i.xmlContents[e.editDialogTemplate])){var t=!!e.isBranch,o=e.handlers&&"[object Object]"==Object.prototype.toString.call(e.handlers),d={id:e.id,hierMode:t,pk:e.recordId,copy:e.isCopy||false,readOnly:e.readOnly||false,obj:e.dataSource.readerParams.linkedObject,_events:{}},n,s;if(a)s=a;else if(i.htmlNames[e.editDialogTemplate]){var l=i.htmlNames[e.editDialogTemplate].split("/");s=l[l.length-1]}else n=i.xmlContents[e.editDialogTemplate].split("/"),s=i.appRoot+n[n.length-1]+".html";if(d["changedRecordValues"]=e.changedRecordValues,d["history"]=e.history,d["format"]=e.dataSource.readerParams.format,d["type"]=e.dataSource.readerType,e.dataSource.readerParams.otherURL!==i.defaultServiceUrl)d["url"]=e.dataSource.readerParams.otherURL;if(d["db"]=e.dataSource.readerParams.dbScheme,d["method"]=e.dataSource.readerParams.queryName,d["readMethod"]=e.dataSource.readerParams.readMethodName,d["createMethod"]=e.dataSource.readerParams.createMethodName,d["updateMethod"]=e.dataSource.readerParams.updateMethodName,d["destroyMethod"]=e.dataSource.readerParams.destroyMethodName,t)if(d["branch"]=e.isBranch,d["pId"]=e.parentId,e.columnParentId)d["pIdCol"]=e.columnParentId;if(void 0===e.recordId)d["filter"]=e.filter,d._events["onBeforeCreate"]=o&&e.handlers.onBeforeCreate||[],d._events["onBeforeInsert"]=o&&e.handlers.onBeforeInsert||[];if(d._events["onBeforeRead"]=o&&e.handlers.onBeforeRead||[],d._events["onBeforeUpdate"]=o&&e.handlers.onBeforeUpdate||[],d._events["onBeforeShowRecord"]=o&&e.handlers.onBeforeShowRecord||[],d._events["onLoadError"]=o&&e.handlers.onLoadError||[],e.reports&&!h(e.reports))d["reports"]=e.reports,d._events["onBeforeShowPrintReports"]=o&&e.handlers.onBeforeShowPrintReports||[],d._events["onPrepareReportData"]=o&&e.handlers.onPrepareReportData||[],d._events["onSelectReportTransform"]=o&&e.handlers.onSelectReportTransform||[];if(r)return d;else return s+="?editParams="+encodeURIComponent(p(d))}else{if(!i.htmlNames[e.editDialogTemplate]&&!i.xmlContents[e.editDialogTemplate])m.resolve("ILogger").log("Core/generatePageURL",'ВНИМАНИЕ! Диалог "'+e.editDialogTemplate+'" отсутствует в оглавлении!');return false}}});