define("Core/Indicator",["Core/helpers/isNewEnvironment","require"],function(r,e){var i;return{_container:void 0,_ready:false,_delay:2e3,_loading:false,_init:function(t,i){if(r())return void requirejs(["Controls/Popup/Manager/ManagerController"],function(e){i(e.getIndicator())});var n=this,s=function(){e(["Lib/Control/LoadingIndicator/LoadingIndicator"],function(e){if(n._container=new e(t),n.callback){for(var i=0;i<n.callback.length;i++)if(n.callback[i](n._container),n._container.isDestroyed())break;n.callback=n.callback.slice(i+1)}})};if(this.callback=this.callback||[],i)this.callback.push(i);if(!t)t={};if(t.handlers={onReady:function(){n._ready=true}},!this._loading)this._loading=true,e(["optional!Controls/Popup/Compatible/Layer"],function(e){if(e)e.load().addCallback(function(){s()});else s()})},show:function(i){if(!this._ready){var t=this;this._init({delay:i},function(e){if(r()){if(i)i=t._delay;e.show({delay:i})}else e.show();return e})}else this._container.setDelay(i),this._container.show();return this},setMessage:function(i,t){var n=this;if(!this._ready)this._init({delay:t},function(e){if(r()){if(t)t=n._delay;e.show({message:i,delay:t})}else e.setMessage(i),e.subscribe("onReady",function(){this.setMessage(i)});return e});else if(this._container.setDelay(t),this._container.isVisible()&&t)this._container.show(),this._container._getDelay().addCallback(function(e){return n._container.setMessage(i),e});else n._container.setMessage(i),this._container.show();return this},hide:function(){if(this._ready)this._container.hide();else this._init({},function(e){return e.hide(),e});return this},progressBar:function(e){var i=this;if(!this._ready)this.destroy(),this._init({progressBar:e});else if(!(this._container._myProgressBar&&e))this.destroy(),this._init({progressBar:e});return i},setProgress:function(i){if(!this._ready)this._init({},function(e){return e.setProgress(i),e.subscribe("onReady",function(){this.setProgress(i)}),e});else this._container.setProgress(i);return this},destroy:function(){var i=this;if(this._ready)i._ready=false,this._container.destroy();else this._init({},function(e){if(i._ready=false,r())e.hide();else e.destroy();return e});return this._container=void 0,this._loading=false,this}}});