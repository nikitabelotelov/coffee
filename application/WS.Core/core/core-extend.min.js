define("Core/core-extend",["require","Core/core-extend-initializer","Core/helpers/Function/callAround","Core/helpers/Function/callNext","Core/helpers/Function/callBefore","Core/helpers/Function/callIf","Core/helpers/Object/isEmpty","Core/helpers/Object/find","Core/helpers/Function/forAliveOnly","Core/core-merge","Core/core-hash","Core/property-merge","Core/core-classicExtend","Core/core-simpleExtend","Core/detection","Core/IoC"],function(a,y,h,x,$,d,g,v,C,_,b,O,t,m,w,j){var E={extend:function(){function u(t,e){return E.extend(this,t,e)}function a(t){return E.extendPlugin(this,t)}function d(t){return E.mixin(this,t)}function h(t,e){for(var o in e)if(e.hasOwnProperty(o)&&"$"!=o.charAt(0))t.prototype[o]=e[o]}return function t(e,o,i){if("[object Array]"===Object.prototype.toString.call(e))i=o,o=e,e=void 0;if("[object Array]"!==Object.prototype.toString.call(o))i=o,o=void 0;if(e&&"function"===typeof e.beforeExtend)e.beforeExtend.call(this,e,o,i);if(1===arguments.length||m.isCompatibleParent(e)&&m.isCompatibleChild(i))return m.extend(e||Object,o||[],i);if(o)e=E.mixin(e,o);if(i&&"_options"in i)throw new Error(rk("Ошибка в определении класса: секция _options в наследнике должна быть внутри секции $protected, а не в корне"));var n=e.prototype,r=n&&n._useNativeAsMain,c=n&&n.$constructor||null,s=n&&n.constructor||null,l=i.$constructor,p=function(){},f;if(f=i.$constructor=function t(e){if(this._goUp=this._goUp||1,1===this._goUp&&r)this.constructor.call(this,e);if(c)this._goUp++,c.call(this,e);else if(!r){if(this._initializer(O),e&&"object"===typeof e)O(e,this._options=this._options||{});if(s)s.call(this,e)}if(l){var o=l.call(this,e);if(o)return o}if(--this._goUp,0===this._goUp)if(!this._useNativeAsMain)if(this.init&&this.init(),this._initComplete&&this._initComplete(),this._isInitialized=true,this._allowEvents&&this._allowEvents(),this._constructionDone&&this._constructionDone(),false===this._isAbstractInitialized)j.resolve("ILogger").error("core-extend",'При инициализации компонента "'+(this.getName&&this.getName())+'" функция init не была вызвана для всех предков. '+"Проверьте, что для всех init вызван init предка.");return},p.prototype=e.prototype,f.prototype=new p,y.extend(e.prototype,i),h(f,i),i.destroy&&"isDestroyed"in f.prototype&&"function"===typeof f.prototype.isDestroyed)f.prototype.destroy=C(i.destroy);return m._inheritStatic(e||Object,f),f.prototype.$constructor=i.$constructor,f.extend=u,f.extendPlugin=a,f.mixin=d,f.superclass=e.prototype,f}}(),extendPlugin:function(n,r){var c=n.prototype,t;if(!!!v(c._plugins,function(t){return t===r})){if(!g(r.$protected))c._initializer=x.call(c._initializer,y.build(r));r.$withoutCondition=b(r.$withoutCondition||[]);var o=function(e,t){var o;if(c.hasOwnProperty(e))o=c[e];else if(n.superclass)o=function(){var t=n.superclass[e];if(t)return t.apply(this,arguments)};if(o){var i="destroy"===e?"callBefore":"callNext";if(r.$condition&&void 0===r.$withoutCondition[e])c[e]=o[i+"WithCondition"](t,r.$condition);else c[e]=o[i](t)}},e=function(t,e){if(c[t])o(t,e);else if(r.$condition)c[t]=void 0===r.$withoutCondition[t]?d.call(e,r.$condition):e;else c[t]=e};for(var i in r)if(r.hasOwnProperty(i)&&!(i in{$constructor:true,$protected:true,init:true,$condition:true,$withoutCondition:true}))e(i,r[i]);if(!w.isModernIE){var s=["valueOf","toString"];for(i=0;i<s.length;i++)if(r.hasOwnProperty(s[i]))e(s[i],r[s[i]])}if(r.$constructor){o("init",r.$constructor);var l=a("Lib/Control/Control").ControlStorage;if(l){var p=r.$constructor,f=l.getControls();for(var u in f)if(f.hasOwnProperty(u))if(f[u]instanceof n)p.apply(f[u])}}c._plugins=(c._plugins||[]).concat(r)}},mixin:function(t,e){if(e&&"[object Object]"===Object.prototype.toString.call(e))e=[e];var o={},i,n=e.length,r,c={},s,l={around:h,after:x,before:$};for(r=0;r<n;r++){if((c=e[r]).$protected)o=_(o,c.$protected,{clone:true});if(c.$constructor)i=i?x.call(i,c.$constructor):c.$constructor}var p=E.extend(t,{$protected:o,$constructor:i||function(){}});function f(t,e){if(!w.isModernIE){var o=["valueOf","toString"];for(a=0;a<o.length;a++)if(t.hasOwnProperty(o[a])&&!(o[a]in{$protected:0,$constructor:0}))u(o[a],t[o[a]],e)}}function u(t,e,o){if("function"===typeof e)if("instead"===o||"function"!==typeof p.prototype[t])p.prototype[t]=e;else{var i=l[o].call(p.prototype[t],e);p.prototype[t]=i}}for(r=0;r<n;r++){for(var a in c=e[r])if(!(a in{$protected:0,$constructor:0}))if((s=c[a])&&"[object Object]"===Object.prototype.toString.call(s)){for(var d in s)u(d,s[d],a);f(s,a)}else u(a,s,"instead");f(c,"instead")}return p.prototype._mixins=(p.prototype._mixins||[]).concat(e),p}};return m.setInheritedExtend(function(t,e){return E.extend(this,t,e)}),E.extend.extend=E.extend,E.extend.mixin=E.mixin,E.extend.extendPlugin=E.extendPlugin,E.extend.classicExtend=t,E.extend});