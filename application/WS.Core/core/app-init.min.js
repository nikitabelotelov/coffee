define("Core/app-init",["Core/core-merge","Env/Env","Core/Themes/ThemesController","native-css","Core/patchRequireJS","View/Request","View/_Request/createDefault","Controls/Application/StateReceiver","Core/polyfill","Core/polyfill/PromiseAPIDeferred"],function(e,t,o,s,n,r,i,a){"use strict";n();var c=new r(i.default(r));if(c.setStateReceiver(new a),r.setCurrent(c),window.receivedStates&&window.receivedStates.indexOf){var l=window.receivedStates.indexOf("ThemesController");if(l>-1){var d=window.receivedStates.indexOf(",",l),f=window.receivedStates;if(d>-1)f="{"+window.receivedStates.substring(l-1,d)+"}";c.stateReceiver.deserialize(f)}}function u(){return NodeFilter.FILTER_ACCEPT}function h(e){var t=[],s=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,u,false),n=s.nextNode();while(n)t.push(n),n=s.nextNode();return t}function m(e){var t=e.split("theme?"),s;if(t.length>1)s={name:t[1],hasTheme:true};else s={name:e,hasTheme:false};return s}if(window.themesActive)s.load=function(e,t,s,n){var r=m(e),i=false;if(r.hasTheme)if(o.getInstance().pushCssThemedAsyncAllThemes)i=true,o.getInstance().pushCssThemedAsyncAllThemes(r.name.replace(/\.css$/,""),s);else o.getInstance().pushThemedCss(r.name.replace(/\.css$/,""));else if(o.getInstance().pushCssAsync)i=true,o.getInstance().pushCssAsync(e.replace(/\.css$/,""),s);else o.getInstance().pushSimpleCss(e.replace(/\.css$/,""));if(!i)s(null)};else{var w=s.load;s.load=function(e,t,s,n){var r=e;if(~r.indexOf("theme?"))r=r.replace("theme?","");return w(r,t,s,n)}}return function(){e(t.constants,window.wsConfig||{},{rec:false}),h(document.body).forEach(function(e){e.parentNode.removeChild(e)}),t.loadContents(window.contents,false,{resources:wsConfig.resourceRoot})}});