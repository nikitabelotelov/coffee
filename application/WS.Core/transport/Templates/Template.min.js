define("Transport/Templates/Template",["require","Core/core-extend","Core/ParallelDeferred","Core/Deferred","Core/constants","View/Executor/Utils","Transport/nodeType"],function(r,e,u,c,f,m,h){var p;return(p=e({},{$protected:{_templateName:"",_dReady:null,_loadedHandlers:{},_configuration:{autoWidth:false,autoHeight:false,isRelativeTemplate:false,minWidth:0}},$constructor:function(e){this._templateName=e.templateName,this._dReady=new u,this._dReady.getResult().addCallback(this._attachResources.bind(this)).addCallback(this._loadDependencies.bind(this))},isPage:function(){throw new Error("Template::isPage - method is not implemented!")},_collectAllControlsToPreload:function(e){throw new Error("Template::_collectAllControlsToPreload - method is not implemented!")},_loadDependencies:function(){var e,t=this._collectAllControlsToPreload(this.getControls(void 0)).map(function(e){return[e.type,e]},[]);return this._loadControlsDependencies(t,true)},_loadControlsDependencies:function(e,i){var l={};function a(t,n){return function(){if(!f.isServerScript&&m.RequireHelper.defined(n)){var e=r(n);t.callback([n,e])}else r([n],function(e){t.callback([n,e])});return t}}function s(e,t){var n,r=new c,o=["Deprecated","Lib"],i=e.indexOf("/")>0?e.split("/")[0]:false;if(i&&(o.indexOf(i)>-1||Object.keys(f.modules).some(function(e){return f.modules[e]===i}))||-1===e.indexOf("SBIS3.")&&e.indexOf("/")>-1&&-1===e.indexOf("Control/"))n=a(r,e);else n=a(r,e);return n}function n(e,i){return e.reduce(function(e,t){var n=t[0],r,o;if(!(n in l))l[n]=true,o=s(n,i),e.push(o());return e},new u).done().getResult()}function o(e){var i=r.defined("Core/DependencyResolver")?r("Core/DependencyResolver"):false;return e.reduce(function(t,e){var n=e[0],r=e[1],o;return(o=i&&i.resolve(n,r)||[]).forEach(function(e){t.push([e,r])}),t},[])}function t(e,r){var o=Object.keys(r).reduce(function(e,t){var n=r[t];return e[n[0]]=n[1],e},{});return e.map(function(e){var t=e[0],n=o[t];if(i&&"function"!==typeof n)throw new Error("Can't instantiate class '"+t+"'. Class not exists");return n})}function d(r,e){var t;return n(r,e).addCallback(function(e){var t=o(r),n;if(t.length>0)n=d(t,false).addCallback(function(){return e});else n=e;return n})}return d(e,i).addCallback(t.bind(void 0,e))},getRenderResult:function(){return this._dReady.getResult()},getStyle:function(){throw new Error("Template::getStyle - method is not implemented!")},getDimensions:function(){throw new Error("Template::getDimensions - method is not implemented!")},getAlignment:function(){throw new Error("Template::getAlignment - method is not implemented!")},getTitle:function(){throw new Error("Template::getTitle - method is not implemented!")},getConfig:function(e){throw new Error("Template::getConfig - method is not implemented!")},getDeclaredHandlers:function(){return this._loadedHandlers},createMarkup:function(e){throw new Error("Template::createMarkup - method is not implemented!")},getControls:function(e,t){throw new Error("Template::getControls - method is not implemented!")},getName:function(){return this._templateName},_getIncludeDescriptorNodes:function(){throw new Error("Template::_getIncludeDescriptorNodes - method is not implemented!")},_attachResources:function(){var e=this._getIncludeDescriptorNodes(),t=new u;if(e.length>0){var n=e[0].getAttribute("spec");if(n){try{n=JSON.parse(n)}catch(e){n=false}if(n){if(n.js)t.push(this._requireModuleUrls(n.js));if(n.css)t.push(this._requireModuleUrls(n.css))}}}return t.done().getResult()},_requireModuleUrls:function(e){var t=new c;return t.addErrback(function(e){return e}),r(e,function(){t.callback()},function(e){t.errback(e)}),t},_mergeAttrToConfig:function(e,t,n){if("title"!==t&&"width"!==t&&"height"!==t)e[t]="false"===n?false:"true"===n?true:n},needSetZindexByOrder:function(){return false}}))._importNode=function(e,t,n,r){if(false!==r&&e.importNode)try{return e.importNode(t,n)}catch(e){r=false}switch(t.nodeType){case h.ELEMENT_NODE:var o=e.createElement(t.nodeName),i,l;if(t.attributes&&t.attributes.length>0)for(i=0,l=t.attributes.length;i<l;i++){var a=t.attributes[i].nodeName,s=t.getAttribute(a);if("style"===a.toLowerCase()&&f.browser.isIE)o.style.cssText=s;else o.setAttribute(a,s)}if(n&&t.childNodes&&t.childNodes.length>0)for(i=0,l=t.childNodes.length;i<l;i++){var d=p._importNode(e,t.childNodes[i],n,r);if(d)o.appendChild(d)}return o;case h.TEXT_NODE:case h.CDATA_SECTION_NODE:return e.createTextNode(t.nodeValue);case h.COMMENT_NODE:return null}},p});