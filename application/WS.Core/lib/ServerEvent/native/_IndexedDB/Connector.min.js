define("Lib/ServerEvent/native/_IndexedDB/Connector",["require","exports","Core/Deferred","Lib/ServerEvent/native/_IndexedDB/Writer","Lib/ServerEvent/native/_IndexedDB/Reader"],function(e,t,o,s,r){"use strict";if(Object.defineProperty(t,"__esModule",{value:true}),"undefined"!==typeof indexedDB&&null!==indexedDB&&indexedDB instanceof IDBFactory)try{indexedDB.deleteDatabase("sbis.seb")}catch(e){}var n=function(){function d(e,t,r){this.db=e,this.storeName=t,this.adapter=r}return d.connect=function(e,r,n){var i=new o,t;if("object"!==typeof indexedDB||null===indexedDB)return o.fail("В окружении нет indexedDB");try{t=indexedDB.open(e,n.getVersion())}catch(e){return i.errback(e),i}return t.onupgradeneeded=function(e){var t=this.result;t.onerror=function(e){},new s.Writer(t,r,n).createStore()},t.onsuccess=function(e){var t=this.result;i.callback(new d(t,r,n))},t.onerror=function(e){return i.errback("You haven't rights to use IndexDB."),true},i},d.prototype.createWriter=function(){return new s.Writer(this.db,this.storeName,this.adapter)},d.prototype.createReader=function(){return new r.Reader(this.db,this.storeName,this.adapter)},d.DB_DEBUG="sbis.seb.debug",d.DB_DELIVER="sbis.seb.deliver",d.DEBUG_STORE_NAME="logs",d.EVENTS_STORE_NAME="events",d}();t.Connector=n});