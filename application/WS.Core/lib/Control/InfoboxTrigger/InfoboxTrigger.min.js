define("Lib/Control/InfoboxTrigger/InfoboxTrigger",["Lib/Control/Control","Lib/Control/Infobox/Infobox","html!Lib/Control/InfoboxTrigger/InfoboxTrigger","Core/core-merge"],function(o,n,t,e){"use strict";var i=o.Control.extend({$protected:{_options:{text:"",img:void 0,imgAlign:"left",tooltip:"",tooltipWidth:void 0,showDelay:200,infoboxConfig:{}},_block:void 0},_dotTplFn:t,$constructor:function(){this._container.addClass("ws-helper"),this._redraw()},setTooltip:function(o){this._options.tooltip=""+o},_redraw:function(){if(this._block)this._block.unbind(),this._block.remove(),this._block=null;this._block=this._container.find("div:first");var o=this,i={control:o._container,width:o._options.tooltipWidth,delay:parseInt(o._options.showDelay,10)};e(i,this._options.infoboxConfig||{}),this._block.bind("mouseenter",function(){var t="";if(o._options.tooltip){if("function"==typeof o._options.tooltip)try{t=o._options.tooltip()}catch(o){t="Ошибка при получении текста подсказки: "+o.message}else if("string"==typeof o._options.tooltip)t=o._options.tooltip}else t=o.getLinkedContext().getValue(o.getName());i.message=t,n.show(i)}).bind("mouseleave",function(){n.hide()})},destroy:function(){this._block.unbind(),this._block=null,this._container.empty().remove(),i.superclass.destroy.apply(this,arguments)}});return i});