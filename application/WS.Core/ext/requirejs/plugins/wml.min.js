(function(){"use strict";var e=function(){return this||(0,eval)("this")}(),r=e.define||e.requirejs&&e.requirejs.define||requirejsVars.define,u="undefined"===typeof window&&!(process&&process.versions);r("wml",["text","View/config","Core/pathResolver","Core/constants","Core/IoC"],function(l,f,m,c,o){function s(e,r){o.resolve("ILogger").error(r+"!",e.message,e);var i=function(){return"<div>"+e.message+"</div>"};return i.stable=true,i.includedFunctions={},i}function t(r,e,i,o,t,n){try{if(!o.fileName)o.fileName=r;i.getFile(e,o,function(e){t.fromTextFixed?t.fromTextFixed(e):t.fromText(e),t=void 0},void 0,n)}catch(e){e.message='Error while parsing template "'+r+'": '+e.message,t(s(e,n)),t=void 0}}function d(i,e,o,t,n,s,a){var r=function(r){if(r&&0===r.indexOf("define"))o.fromTextFixed?o.fromTextFixed(r):o.fromText(r);else try{e(s,function(e){a(i,r,e.Tmpl,t,o,n)})}catch(e){e.message='Error while loading builder for template "'+i+'": '+e.message,o.error(e)}};return r.error=function(e){e.message='Error while loading template "'+i+'": '+e.message,o.error(e)},r}var n={loadBase:function(r,e,i,o,t,n){try{var s=m(r,o,true),a={config:f,filename:s};if(u&&"release"===c.buildMode&&c.isNodePlatform)s=(s=s.replace(/(\.min)?\.tmpl$/,".min.tmpl")).replace(/(\.min)?\.wml/,".min.wml");l.load(s,e,d(r,e,i,a,o,t,n),a)}catch(e){e.message='Error while resolving template "'+r+'": '+e.message,i.error(e)}},load:function(e,r,i){n.loadBase(e,r,i,"wml",["View/Builder"],t)},createLostFunction:s,createLoader:d};return n})})();