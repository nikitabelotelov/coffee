define("Coffee/Data/DataStore",["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:true});var a={"Группа 1":{"Температура":"g1TSet","Время предсмачивания":"g1TimeSet","Время автоматической варки 1":"g1AutoMode1","Время автоматической варки 2":"g1AutoMode2","Время пост-предсмачивания":"g1_1TimeSet"},"Группа 2":{"Температура":"g2TSet","Время предсмачивания":"g2TimeSet","Время автоматической варки 1":"g2AutoMode1","Время автоматической варки 2":"g2AutoMode2","Время пост-предсмачивания":"g2_1TimeSet"},"Паровой бойлер":{"Давление":"parTSet"},"Цветовая схема":{"Холодный красный":"rCold","Холодный зеленый":"gCold","Холодный синий":"bCold","Холодный прозрачный":"aCold","Горячий красный":"rHot","Горячий зеленый":"gHot","Горячий синий":"bHot","Горячий прозрачный":"aHot"}};t.InfoStruct=a;var o={socket:null,messageHandlers:new Array,_parseDataStructure:function(e,t){var o={};for(var a in t)for(var n in o[a]={},t[a])o[a][n]=e[t[a][n]];return o},initDataStore:function(){var o=this;return new Promise(function(e,t){o.socket=new WebSocket("ws://localhost:8080"),o.socket.onopen=function(){console.log("Соединение установлено."),e()},o.socket.onclose=function(e){if(e.wasClean)console.log("Соединение закрыто чисто");else console.log("Обрыв соединения");console.log("Код: "+e.code+" причина: "+e.reason)},o.socket.onmessage=function(e){o._handleMessage(e.data),console.log("Получены данные "+e.data)},o.socket.onerror=function(e){console.log("Ошибка "+e.message),t()}})},onRawDataUpdated:function(e){this.messageHandlers["rawDataSetting"]=e},_handleMessage:function(e){var t=JSON.parse(e),o=t.data;if(t.type)switch(t.type){case"rawDataSetting":o=this._parseDataStructure(o,a);default:if(this.messageHandlers[t.type])this.messageHandlers[t.type].call(this,o)}},closeConnection:function(){this.socket.close()}};return t.DataStore=o,t});