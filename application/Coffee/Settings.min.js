define("Coffee/Settings",["require","exports","tslib","UI/Base","wml!Coffee/Settings/Settings","Coffee/Data/DataStore","css!Coffee/Settings/Settings"],function(t,e,n,o,i,s){var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._template=i,t.settingsInfo={},t}return n.__extends(t,e),t.prototype._beforeMount=function(t){var e=this,n=s.DataStore.getInitialSettings();if(n)this.settingsInfo=n;else s.DataStore.on("initialSettings",function(){e.settingsInfo=s.DataStore.getInitialSettings(),e._forceUpdate(),s.DataStore.removeHandler("initialSettings")})},t.prototype.settingChangedHandler=function(t,e){s.DataStore.sendSettings(this.settingsInfo)},t.prototype.checkUpdate=function(){s.DataStore.closeConnection(),setTimeout(function(){fetch("/Update").then(function(){console.log("Update started")},function(){console.error("Update failed")})},2e3)},t}(o.Control),e;return a});