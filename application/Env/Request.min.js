define("Env/Request",["Core/constants","require","exports","tslib"],function(r,n,e,s){e["Env/_Request/Console"]=true;var i=function(){"use strict";var e={},t=function(e,t,r){Object.defineProperty(t,"__esModule",{value:true});var o=function(e,t){return e>t},n=function(e,t){return e&&"function"===typeof e[t]},s,i;(i=s=t.LogLevel||(t.LogLevel={}))[i["info"]=0]="info",i[i["warning"]=1]="warning",i[i["error"]=2]="error";var a=function(){function e(e){var t=e.logLevel,o=e.console;this.__logLevel=t||r.logLevel,this.__console=o}return e.prototype.setLogLevel=function(e){this.__logLevel=e},e.prototype.getLogLevel=function(){return this.__logLevel},e.prototype.info=function(){if(o(this.__logLevel,s.info)&&n(this.__console,"info"))console.info(arguments)},e.prototype.log=function(){if(o(this.__logLevel,s.info)&&n(this.__console,"log"))console.log(arguments)},e.prototype.warning=function(){if(!o(this.__logLevel,s.warning))return;if(n(this.__console,"error"))return console.warn(arguments);if(n(this.__console,"log"))return console.log(arguments)},e.prototype.error=function(){if(!o(this.__logLevel,s.error)||!n(this.__console,"error"))return;console.error(arguments)},e}();t.Console=a}(n,e,r);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Env/_Request/StateReceiver"]=true;var a=function(){"use strict";var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var o=function(){function e(e){var t=void 0===e?{}:e,o=t.states,r=t.console;this.__states=Object.create(null),this.__components=Object.create(null),this.__states=o,this.__console=r}return e.prototype.serialize=function(){var e=Object.create(null);for(var t in this.__components)e[t]=this.__components[t].getState();return JSON.stringify(e)},e.prototype.deserialize=function(e){try{this.__states=JSON.parse(e),this.__updateState()}catch(e){this.__console&&this.__console.error(e)}},e.prototype.register=function(e,t){if(this.__components[e])throw new Error("exist");if(this.__components[e]=t,this.__states[e])this.__setComponentState(e)},e.prototype.unregister=function(e){delete this.__components[e]},e.prototype.__updateState=function(){for(var e in this.__states)this.__setComponentState(e)},e.prototype.__setComponentState=function(e){var t=this.__components[e];if(t||t.setState)t.setState(this.__states[e]),delete this.__states[e]},e}();t.default=o}(n,e);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Env/_Request/_Storage/Cookie"]=true;var c=function(){"use strict";var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var c=24*60*60*1e3,o=/=.*/,r=function(){function e(){}return e.prototype.get=function(e){for(var t=null,o=document.cookie.split(";"),r,n=0;n<o.length;n++)if((r=String(o[n]).trim()).substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}return t},e.prototype.set=function(e,t,o){var r="",n,s,i;if(o=o||{},null===t)t="",o.expires=-1;if(o.expires){var a=void 0;if("number"===typeof o.expires)(a=new Date).setTime(a.getTime()+o.expires*c);else if(o.expires.toUTCString)a=o.expires;else throw new TypeError('Option "expires" should be a Number or Date instance');r="; expires="+a.toUTCString()}return n=o.path?"; path="+o.path:"",s=o.domain?"; domain="+o.domain:"",i=o.secure?"; secure":"",document.cookie=[name,"=",encodeURIComponent(t),r,n,s,i].join(""),true},e.prototype.remove=function(e){this.set(e,null)},e.prototype.getKeys=function(){return document.cookie.split(";").map(function(e){return e.replace(o,"")})},e.prototype.toObject=function(){var n={};return document.cookie.split(";").forEach(function(e){var t=e.split("="),o=t[0],r=t[1];n[o]=decodeURIComponent(r)}),n},e}();t.default=r}(n,e);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Env/_Request/_Storage/Native"]=true;var u=function(){"use strict";var e={},t=function(e,t,o){Object.defineProperty(t,"__esModule",{value:true});var r=function(){return this||(0,eval)("this")}(),n,s;(s=n=t.StorageType||(t.StorageType={}))["local"]="localStorage",s["session"]="sessionStorage";var i=function(){function e(e){var t=r&&r[e];if(!t)throw new Error('"'+e+'" not supported');this.__storage=t}return e.prototype.get=function(e){try{return this.__storage.getItem(e)}catch(e){}},e.prototype.set=function(e,t){try{return this.__storage.setItem(e,t),true}catch(e){return false}},e.prototype.remove=function(e){try{this.__storage.removeItem(e)}catch(e){}},e.prototype.getKeys=function(){try{return Object.keys(this.__storage)}catch(e){return[]}},e.prototype.toObject=function(){try{return o.__assign({},this.__storage)}catch(e){return{}}},e}();t.default=i}(n,e,s);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Env/_Request/_Storage/Object"]=true;var l=function(){"use strict";var e={},t=function(e,t,o){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(){this._map=Object.create(null)}return e.prototype.get=function(e){return this._map[e]||null},e.prototype.set=function(e,t){return this._map[e]=t,true},e.prototype.remove=function(e){delete this._map[e]},e.prototype.getKeys=function(){return Object.keys(this._map)},e.prototype.toObject=function(){return o.__assign({},this._map)},e}();t.default=r}(n,e,s);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Env/_Request/Storage"]=true;var f=function(){"use strict";var e={},t=function(e,t,o,r,n){var s,i;function a(e,t){try{return new e(t)}catch(e){return console.warn(e),new n.default}}Object.defineProperty(t,"__esModule",{value:true}),(i=s=t.Key||(t.Key={}))["sessionStorage"]="sessionStorage",i["localStorage"]="localStorage",i["userInfo"]="userInfo",i["cookie"]="cookie",i["object"]="object",t.create=function(e){switch(e){case s.sessionStorage:return a(r.default,r.StorageType.session);case s.localStorage:return a(r.default,r.StorageType.local);case s.cookie:return a(o.default);default:return new n.default}}}(n,e,c,u,l);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}(),t=f;e["Env/_Request/createDefault"]=true;var o,p=function(){"use strict";var e={},t=function(r,e,n,s,i,a){var t=this;Object.defineProperty(e,"__esModule",{value:true});var c=t||(0,eval)("this"),u=function(){return process&&process.domain&&process.domain.req||{}},o=function(){var e,t=new n.Console({console:c.console,logLevel:i.logLevel});return{console:t,location:c.location,stateReceiver:new s.default({console:t}),storageMap:(e={},e[a.Key.cookie]=a.create(a.Key.cookie),e[a.Key.sessionStorage]=a.create(a.Key.sessionStorage),e[a.Key.localStorage]=a.create(a.Key.localStorage),e)}};function l(e){var t=e.originalUrl||"",o=t.indexOf("?"),r=o>=0?t.slice(o):"";return{protocol:e.protocol||"",host:e.hostname||"",hostname:e.hostname||"",port:"",hash:"",href:t,pathname:e.path||"",search:r}}var f=function(){var e,t;try{t=r("Env/_Request/_Storage/NodeCookie")}catch(e){t=null}var o=new n.Console({console:"jstestdriver"in c?c.jstestdriver.console:c.console,logLevel:i.logLevel});return{console:o,location:l(u()),stateReceiver:new s.default({console:o}),storageMap:(e={},e[a.Key.cookie]=t?new t.default:a.create(a.Key.object),e)}},p=function(e){var t;if(i.isBrowserPlatform)t=o();else t=f();return new e(t)};e.default=p}(n,e,i,a,r,f);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}(),_={},v=function(){return process&&process.domain&&process.domain.req||window||_},h=function(){function e(e){var t=e.stateReceiver,o=e.storageMap,r=e.console,n=e.location;this.stateReceiver=t,this.__storageMap=s.__assign({},o),this.console=r,this.location=n}return e.prototype.getStorage=function(e){if(!this.__storageMap[e])this.__storageMap[e]=t.create(t.Key.object);return this.__storageMap[e]},e.prototype.setStorage=function(e,t){if(this.__storageMap[e])throw new Error('attempt to overwrite used storage "'+e+'"');this.__storageMap[e]=t},e.prototype.setConsole=function(e){this.console=e},e.prototype.setLocation=function(e){this.location=e},e.prototype.setStateReceiver=function(e){this.stateReceiver=e},e.setCurrent=function(e){v().wasabyRequest=e},e.getCurrent=function(e){return v().wasabyRequest},e.StorageKey=t.Key,e}(),e;return h.setCurrent(p.default(h)),h});