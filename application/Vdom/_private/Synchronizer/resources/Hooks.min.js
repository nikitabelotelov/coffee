define("Vdom/_private/Synchronizer/resources/Hooks",["require","exports","View/Executor/Expressions","Core/constants"],function(e,t,v,s){"use strict";function n(r){function e(e){var t,n=(e.nativeEvent&&e.nativeEvent.args||[]).concat(r.args);r.fn.apply(r.controlNode.control,[e].concat(n));var o=e.nativeEvent.result;if(o&&o.then)o.then(function(){r.controlNode.requestDirtyCheck()});else r.controlNode.requestDirtyCheck();return[r.controlNode.control,e]}if("event"===r.name)return e;else throw new Error("getEventHandlerBase: wrong event type")}Object.defineProperty(t,"__esModule",{value:true});var o=function(){function e(e){this.type="ControlNodeHook",this.controlNode=e}return e}();t.ControlNodeHook=o;var r=function(){function e(e,t){this.nameForNode=e,this.control=t}return e.hookName="named-hook",e.attributeName="name",e.restrictedTags={component:true,option:true},e}();t.NamedNodeHook=r;var i=function(){function e(e,t){this.propName=e,this.value=t}return e}();function c(e,t,n){var o=e&&e["controlNodes"]||[],r;if(n(o,o.indexOf(t)),e)e["controlNodes"]=o;for(var i=0;i<o.length;i++)if(o[i]["element"]=e,s.compat)o[i].control.saveOptions(o[i].control._options,o[i]);else o[i].control._container=e}function a(e){var t=e.slice(0);t.sort(function(e,t){var n=parseInt((e.id+"").replace("inst_",""),10),o=parseInt((t.id+"").replace("inst_",""),10);if(n>o)return-1;if(n<o)return 1;return 0}),t.unshift(t.length),t.unshift(0),e.splice.apply(e,t)}function u(e){return function(e,t,n,o,r,i){var s=function e(t){if(t){if(this.environment._destroyed)return;if(i)i(t);if(this.controlNode.markup&&"invisible-node"===this.controlNode.markup.type)h(this.controlNode,this.controlNode.events,this.controlNode.environment,t);c(t,this.controlNode,function(e,t){var n;if(!(-1!==t))e.push(this.controlNode),a(e)}.bind(this))}else c(this.controlNode.control._container[0],this.controlNode,function(e,t){var n;if(-1!==t)e.splice(t,1)}.bind(this))}.bind({controlNode:r,environment:r.environment});return[e,t,n,o,s?s:i]}}function f(e){var t=(e=e.arguments||e).length,n=new Array(t),o=t-1,r;if("number"!==typeof t)throw new Error("reverseArray - wrong arg");for(r=0;r!==t;r++)n[o]=e[r],o--;return n}function l(e,t){this.eventName=e,this.eventDescrArr=t,this.handlerFn=null}function p(e,t,n,o){this.eventName=e,this.environment=n,this.eventDescrArr=t.map(function(e){return e.controlNode=o,e})}function d(e,t){return e.filter(function(e){return t[0]&&t[0].value===e.value})}function h(t,e,n,o){var r;for(var i in e)if(e.hasOwnProperty(i)){var s=e[i],c=v.Event.getEventName(i),a=s.map(function(e){return e.controlNode=t,e});if(!(s instanceof p)&&!(s instanceof l)){if(!o.eventProperties)o.eventProperties={},o.eventPropertiesCnt=0;if(o.eventProperties[i])if(r=d(o.eventProperties[i],a),o.eventProperties[i]&&0===r.length)a=a.concat(o.eventProperties[i]);o.eventProperties[i]=a,o.eventPropertiesCnt++,n.addCaptureEventHandler(c,o)}}}function N(s){return function(e,t,n,o,c,a){var r,i;if(Object.keys(t.events).length>0)i=function(e){var t;if(e){if(this.environment._destroyed)return;a(e),h(this.controlNode,this.events,this.environment,e)}else for(var n in a(),this.events)if(this.events.hasOwnProperty(n)){var o=this.events[n],r=v.Event.getEventName(n),i=o.map(function(e){return e.controlNode=c,e}),s;if(!(o instanceof p)&&!(o instanceof l))if(t=this.controlNode.control._container[0],this.environment.removeCaptureEventHandler(r,t),t&&t.eventProperties)if(delete t.eventProperties[this.eventName],t.eventPropertiesCnt--,0===t.eventPropertiesCnt)delete t.eventPropertiesCnt,delete t.eventProperties}}.bind({environment:s,controlNode:c,events:t.events});return[e,t,n,o,i?i:a]}}t.FocusPropsNodeHook=i,t.setControlNodeHook=u,l.prototype.type="BubblingPhaseEventHook",p.prototype.type="CapturePhaseEventHook",t.setEventHooks=N});