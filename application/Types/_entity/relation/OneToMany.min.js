define("Types/_entity/relation/OneToMany",["require","exports","tslib","Types/_entity/DestroyableMixin","Types/shim"],function(t,e,o,i,n){"use strict";function r(t){return t instanceof Object&&t["[Types/_entity/DestroyableMixin]"]?!t.destroyed:true}Object.defineProperty(e,"__esModule",{value:true});var l=function(e){function t(){var t=e.call(this)||this;return t._parentToChild=new n.Map,t._childToParent=new n.Map,t._childToRelation=new n.Map,t}return o.__extends(t,e),t.prototype.destroy=function(){this._parentToChild=null,this._childToParent=null,this._childToRelation=null,e.prototype.destroy.call(this)},t.prototype.addTo=function(t,e,o){this._addForParent(t,e),this._addForChild(e,t,o)},t.prototype.removeFrom=function(t,e){this._removeForParent(t,e),this._removeForChild(e,t)},t.prototype.clear=function(e){var o=this;if(this._parentToChild.has(e))this._parentToChild.get(e).forEach(function(t){o._removeForChild(t,e)}),this._parentToChild.delete(e)},t.prototype.each=function(e,o){var i=this;if(this._parentToChild.has(e))this._parentToChild.get(e).forEach(function(t){if(r(t))o.call(i,t,i._childToParent.get(t)===e?i._childToRelation.get(t):void 0)})},t.prototype.getParent=function(t){var e=this._childToParent.get(t);return void 0!==e&&r(e)?e:void 0},t.prototype._addForParent=function(t,e){var o;if(this._parentToChild.has(t))o=this._parentToChild.get(t);else o=new n.Set,this._parentToChild.set(t,o);o.add(e)},t.prototype._removeForParent=function(t,e){if(this._parentToChild.has(t)){var o=this._parentToChild.get(t);if(o.delete(e),0===o.size)this._parentToChild.delete(t)}},t.prototype._addForChild=function(t,e,o){this._childToParent.set(t,e),this._childToRelation.set(t,o)},t.prototype._removeForChild=function(t,e){if(this._childToParent.get(t)===e)this._childToParent.delete(t),this._childToRelation.delete(t)},t}(i.default);(e.default=l).prototype["[Types/_entity/relation/OneToMany]"]=true,l.prototype._parentToChild=null,l.prototype._childToParent=null,l.prototype._childToRelation=null});