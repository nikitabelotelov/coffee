define("Types/_entity/adapter/JsonTable",["require","exports","tslib","Types/_entity/DestroyableMixin","Types/_entity/adapter/GenericFormatMixin","Types/_entity/adapter/JsonFormatMixin","Types/_entity/adapter/JsonRecord","Types/shim","Types/util","Core/core-merge"],function(t,e,i,a,o,r,s,h,n,c){"use strict";Object.defineProperty(e,"__esModule",{value:true});var u=function(a){function t(t){var e=a.call(this,t)||this;return o.default.constructor.call(e,t),r.default.constructor.call(e,t),e}return i.__extends(t,a),t.prototype.addField=function(t,e){r.default.addField.call(this,t,e);for(var a=t.getName(),i=t.getDefaultValue(),o,n=0;n<this._data.length;n++)if(!(o=this._data[n]).hasOwnProperty(a))o[a]=i},t.prototype.removeField=function(t){r.default.removeField.call(this,t);for(var e=0;e<this._data.length;e++)delete this._data[e][t]},t.prototype.getFields=function(){for(var t=this.getCount(),e=new h.Set,a=[],i,o=function(t){e.add(t)},n=0;n<t;n++)if((i=this.at(n))instanceof Object)Object.keys(i).forEach(o);return e.forEach(function(t){a.push(t)}),a},t.prototype.getCount=function(){return this._isValidData()?this._data.length:0},t.prototype.add=function(t,e){if(this._touchData(),void 0===e)this._data.push(t);else this._checkPosition(e),this._data.splice(e,0,t)},t.prototype.at=function(t){return this._isValidData()?this._data[t]:void 0},t.prototype.remove=function(t){this._touchData(),this._checkPosition(t),this._data.splice(t,1)},t.prototype.replace=function(t,e){this._touchData(),this._checkPosition(e),this._data[e]=t},t.prototype.move=function(t,e){if(this._touchData(),e===t)return;var a=this._data.splice(t,1);if(-1===e)this._data.unshift(a.shift());else this._data.splice(e,0,a.shift())},t.prototype.merge=function(t,e,a){this._touchData();var i=this.at(t),o=this.at(e),n=new s.default(i),r=n.get(a);c(i,o),n.set(a,r),this.remove(e)},t.prototype.copy=function(t){this._touchData();var e=this.at(t),a={};return c(a,e,{clone:true}),this.add(a,1+t),a},t.prototype.clear=function(){this._touchData(),this._data.length=0},t.prototype._touchData=function(){if(o.default._touchData.call(this),!(this._data instanceof Array))this._data=[]},t.prototype._isValidData=function(){return this._data instanceof Array},t.prototype._has=function(t){for(var e=this.getCount(),a=false,i,o=0;o<e;o++)if((i=this.at(o))instanceof Object)if(a=i.hasOwnProperty(t))break;return a},t.prototype._checkPosition=function(t){if(t<0||t>this._data.length)throw new Error("Out of bounds")},t}(n.mixin(a.default,o.default,r.default));(e.default=u).prototype["[Types/_entity/adapter/JsonTable]"]=true,u.prototype._data=null});