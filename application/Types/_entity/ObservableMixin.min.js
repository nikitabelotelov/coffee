define("Types/_entity/ObservableMixin",["require","exports","Core/EventBus"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e){var t=e&&e.handlers;if(t instanceof Object)for(var n in t)if(t.hasOwnProperty(n))this.subscribe(n,t[n])}return e.prototype.destroy=function(){if(this._eventBusChannel)this._eventBusChannel.unsubscribeAll(),this._eventBusChannel.destroy(),this._eventBusChannel=null},e.prototype.subscribe=function(e,t,n){if(this._destroyed)return;if(!this._eventBusChannel)if(this._eventBusChannel=i.channel(),this._publishedEvents)for(var s=0;s<this._publishedEvents.length;s++)this._eventBusChannel.publish(this._publishedEvents[s]);if(void 0===n)n=this;this._eventBusChannel.subscribe(e,t,n)},e.prototype.unsubscribe=function(e,t,n){if(this._eventBusChannel){if(void 0===n)n=this;this._eventBusChannel.unsubscribe(e,t,n)}},e.prototype.getEventHandlers=function(e){return this._eventBusChannel?this._eventBusChannel.getEventHandlers(e):[]},e.prototype.hasEventHandlers=function(e){return this._eventBusChannel?this._eventBusChannel.hasEventHandlers(e):false},e.prototype._publish=function(){for(var e=[],t=0,n;t<arguments.length;t++)e[t]=arguments[t];this._publishedEvents=this._publishedEvents||[];for(var s=0;s<e.length;s++)if(n=e[s],this._publishedEvents.push(n),this._eventBusChannel)this._eventBusChannel.publish(n)},e.prototype._notify=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this._eventBusChannel)return this._notifyPushQueue.apply(this,arguments),this._notifyQueue(this._eventsQueue)[0]},e.prototype._notifyLater=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this._eventBusChannel)this._notifyPushQueue.apply(this,arguments)},e.prototype._notifyPushQueue=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._eventsQueue=this._eventsQueue||[],this._eventsQueue.push([e].concat(t))},e.prototype._notifyQueue=function(e){var t=[];if(!e.running){e.running=true;var n=void 0;while(n=e[0])t.push(this._eventBusChannel._notifyWithTarget(n[0],this,n.slice(1))),e.shift();e.running=false}return t},e.prototype._removeFromQueue=function(e){if(!this._eventsQueue)return;for(var t=1;t<this._eventsQueue.length;t++)if(this._eventsQueue[t][0]===e)this._eventsQueue.splice(t,1),t--},e}();(t.default=n).prototype["[Types/_entity/ObservableMixin]"]=true,n.prototype._eventBusChannel=null,n.prototype._eventsQueue=null,n.prototype._publishedEvents=null});