define("Types/_entity/TimeInterval",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var r=1e3,n=6e4,o=36e5,s=864e5,u=60,a=60,c=24,i=["days","hours","minutes","seconds","milliseconds"],l={days:s,hours:o,minutes:n,seconds:r,milliseconds:1},f={regExp:/^P(?:(-?[0-9]+)D)?(?:T(?:(-?[0-9]+)H)?(?:(-?[0-9]+)M)?(?:(-?[0-9]+(?:\.[0-9]{0,3})?)[0-9]*S)?)?$/i,format:"P[<Число_дней>D][T[<Число_часов>H][<Число_минут>M][<Число_секунд>[.Число_долей_секунды]S]"},d={regExp:/^P(-?[0-9]+D)?(T(-?[0-9]+H)?(-?[0-9]+M)?(-?[0-9]+(\.[0-9]+)?S)?)?$/i,format:"P[<Число_дней>D][T[<Число_часов>H][<Число_минут>M][<Число_секунд>[.Число_долей_секунды]S]"};function p(t){return parseFloat(t)||0}function h(t){return t>0?Math.floor(t):Math.ceil(t)}function v(t){var r=[],n=f.regExp.exec(t);if(!g(t))throw new Error(rk("Передаваемый аргумент не соответствует формату ISO 8601. Допустимые форматы")+": "+d.format+". ");return n.slice(1).forEach(function(t,e){if(e===n.length-1)r.push(h(Number(t))),r.push((Number(t)%1*1e3).toFixed());else r.push(p(t))}),r}function y(t){for(var e={},r=0;r<i.length;r++)e[i[r]]=p(String(t[r]));return e}function m(t){var e=0;for(var r in l)if(l.hasOwnProperty(r)){var n;e+=l[r]*p(t[r])}return e}function _(t){var e={};for(var r in l)if(l.hasOwnProperty(r)){var n=l[r];e[r]=h(t/n),t%=n}return e}function b(t){var e=Number((t.seconds+t.milliseconds/1e3).toFixed(3));return"P"+t.days+"D"+"T"+t.hours+"H"+t.minutes+"M"+e+"S"}function g(t){return d.regExp.test(t)}var M=function(){function i(t){if(this instanceof i)this._normIntervalObj=void 0,this._normIntervalStr=void 0,this.set(t);else throw new Error(rk("TimeInterval вызывать через оператор new"))}return i.prototype.getDays=function(){return this._normIntervalObj.days},i.prototype.addDays=function(t){return this.addMilliseconds(t*s)},i.prototype.subDays=function(t){return this.subMilliseconds(t*s)},i.prototype.getHours=function(){return this._normIntervalObj.hours},i.prototype.addHours=function(t){return this.addMilliseconds(t*o)},i.prototype.subHours=function(t){return this.subMilliseconds(t*o)},i.prototype.getMinutes=function(){return this._normIntervalObj.minutes},i.prototype.addMinutes=function(t){return this.addMilliseconds(t*n)},i.prototype.subMinutes=function(t){return this.subMilliseconds(t*n)},i.prototype.getSeconds=function(){return this._normIntervalObj.seconds},i.prototype.addSeconds=function(t){return this.addMilliseconds(t*r)},i.prototype.subSeconds=function(t){return this.subMilliseconds(t*r)},i.prototype.getMilliseconds=function(){return this._normIntervalObj.milliseconds},i.prototype.addMilliseconds=function(t){return this.set(this.getTotalMilliseconds()+h(t))},i.prototype.subMilliseconds=function(t){return this.set(this.getTotalMilliseconds()-h(t))},i.prototype.getTotalHours=function(){return this._normIntervalObj.days*c+this._normIntervalObj.hours},i.prototype.getTotalMinutes=function(){return this.getTotalHours()*a+this._normIntervalObj.minutes},i.prototype.getTotalSeconds=function(){return this.getTotalMinutes()*u+this._normIntervalObj.seconds},i.prototype.getTotalMilliseconds=function(){return this.getTotalSeconds()*r+this._normIntervalObj.milliseconds},i.prototype.set=function(t){var e;if(t instanceof i)e="timeInterval";else if("string"===typeof t)e="intervalStr";else if(t instanceof Array)t=t.slice(),e="intervalArray";else if(t&&"object"===typeof t)t=Object.assign({},t),e="intervalObj";else t=p(t),e="milliseconds";switch(e){case"intervalStr":t=v(t);case"intervalArray":t=y(t);case"intervalObj":t=m(t);case"milliseconds":this._normIntervalObj=t=_(t),this._normIntervalStr=b(t);break;case"timeInterval":this.assign(t)}return this},i.prototype.toString=function(){return String(this._normIntervalStr)},i.prototype.valueOf=function(){return String(this._normIntervalStr)},i.prototype.toObject=function(){return Object.assign({},this._normIntervalObj)},i.prototype.clone=function(){return new i(this)},i.prototype.calc=function(t,e){var r=["==","!=",">=","<=",">","<","+","-","+=","-="];if(-1===r.indexOf(t))throw new Error(rk("Операция")+' "'+t+'" '+rk("не доступна. Разрешенные операции")+": "+r.join(", "));if(!(this instanceof i&&e instanceof i))throw new Error(rk("Operand должен быть объектом класса TimeInterval"));var n=this.getTotalMilliseconds(),o=e.getTotalMilliseconds();switch(t){case"==":return n===o;case"!=":return n!==o;case">=":return n>=o;case"<=":return n<=o;case">":return n>o;case"<":return n<o;case"+":return(new i).set(n+o);case"-":return(new i).set(n-o);case"+=":return this.set(n+o);case"-=":return this.set(n-o)}},i.prototype.addToDate=function(t){return this._dateModifier(1,t)},i.prototype.subFromDate=function(t){return this._dateModifier(-1,t)},i.prototype.assign=function(t){this._normIntervalObj=t.toObject(),this._normIntervalStr=t.valueOf()},i.prototype._dateModifier=function(t,e){return(e=new Date(e.getTime())).setTime(e.getTime()+t*this.getTotalMilliseconds()),e},i.toString=function(t){if(void 0!==t)return i.prototype.set.call({},t)._normIntervalStr;return Function.toString.call(this)},i}();e.default=M});