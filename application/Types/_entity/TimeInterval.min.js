define("Types/_entity/TimeInterval",["require","exports","tslib"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});var r=1e3,o=6e4,s=36e5,a=864e5,u=60,l=60,c=24,i=["days","hours","minutes","seconds","milliseconds"],f={days:a,hours:s,minutes:o,seconds:r,milliseconds:1},d={regExp:/^P(?:(-?[0-9]+)D)?(?:T(?:(-?[0-9]+)H)?(?:(-?[0-9]+)M)?(?:(-?[0-9]+(?:\.[0-9]{0,3})?)[0-9]*S)?)?$/i,format:"P[<Число_дней>D][T[<Число_часов>H][<Число_минут>M][<Число_секунд>[.Число_долей_секунды]S]"},p={regExp:/^P(-?[0-9]+D)?(T(-?[0-9]+H)?(-?[0-9]+M)?(-?[0-9]+(\.[0-9]+)?S)?)?$/i,format:"P[<Число_дней>D][T[<Число_часов>H][<Число_минут>M][<Число_секунд>[.Число_долей_секунды]S]"};function h(t){return parseFloat(t)||0}function v(t){return t>0?Math.floor(t):Math.ceil(t)}function m(t){var n=[],r=d.regExp.exec(t);if(!M(t))throw new Error("The argument does not correspond to the ISO 8601 format. Allowed formats: "+p.format+".");return r.slice(1).forEach(function(t,e){if(e===r.length-1)n.push(v(Number(t))),n.push((Number(t)%1*1e3).toFixed());else n.push(h(t))}),n}function y(t){for(var e={},n=0;n<i.length;n++)e[i[n]]=h(String(t[n]));return e}function _(t){var e=0;for(var n in f)if(f.hasOwnProperty(n)){var r;e+=f[n]*h(t[n])}return e}function b(t){var e={};for(var n in f)if(f.hasOwnProperty(n)){var r=f[n];e[n]=v(t/r),t%=r}return e}function g(t){var e=Number((t.seconds+t.milliseconds/1e3).toFixed(3));return"P"+t.days+"DT"+t.hours+"H"+t.minutes+"M"+e+"S"}function M(t){return p.regExp.test(t)}var O=function(){function i(t){if(this instanceof i)this._normIntervalObj=void 0,this._normIntervalStr=void 0,this.set(t);else throw new Error(rk("TimeInterval вызывать через оператор new"))}return i.toString=function(t){if(void 0!==t)return i.prototype.set.call({},t)._normIntervalStr;return Function.toString.call(this)},i.prototype.getDays=function(){return this._normIntervalObj.days},i.prototype.addDays=function(t){return this.addMilliseconds(t*a)},i.prototype.subDays=function(t){return this.subMilliseconds(t*a)},i.prototype.getHours=function(){return this._normIntervalObj.hours},i.prototype.addHours=function(t){return this.addMilliseconds(t*s)},i.prototype.subHours=function(t){return this.subMilliseconds(t*s)},i.prototype.getMinutes=function(){return this._normIntervalObj.minutes},i.prototype.addMinutes=function(t){return this.addMilliseconds(t*o)},i.prototype.subMinutes=function(t){return this.subMilliseconds(t*o)},i.prototype.getSeconds=function(){return this._normIntervalObj.seconds},i.prototype.addSeconds=function(t){return this.addMilliseconds(t*r)},i.prototype.subSeconds=function(t){return this.subMilliseconds(t*r)},i.prototype.getMilliseconds=function(){return this._normIntervalObj.milliseconds},i.prototype.addMilliseconds=function(t){return this.set(this.getTotalMilliseconds()+v(t))},i.prototype.subMilliseconds=function(t){return this.set(this.getTotalMilliseconds()-v(t))},i.prototype.getTotalHours=function(){return this._normIntervalObj.days*c+this._normIntervalObj.hours},i.prototype.getTotalMinutes=function(){return this.getTotalHours()*l+this._normIntervalObj.minutes},i.prototype.getTotalSeconds=function(){return this.getTotalMinutes()*u+this._normIntervalObj.seconds},i.prototype.getTotalMilliseconds=function(){return this.getTotalSeconds()*r+this._normIntervalObj.milliseconds},i.prototype.set=function(t){var e;if(t instanceof i)e="timeInterval";else if("string"===typeof t)e="intervalStr";else if(t instanceof Array)t=t.slice(),e="intervalArray";else if(t&&"object"===typeof t)t=n.__assign({},t),e="intervalObj";else t=h(t),e="milliseconds";switch(e){case"intervalStr":t=m(t);case"intervalArray":t=y(t);case"intervalObj":t=_(t);case"milliseconds":this._normIntervalObj=t=b(t),this._normIntervalStr=g(t);break;case"timeInterval":this.assign(t)}return this},i.prototype.toString=function(){return String(this._normIntervalStr)},i.prototype.valueOf=function(){return String(this._normIntervalStr)},i.prototype.toObject=function(){return n.__assign({},this._normIntervalObj)},i.prototype.clone=function(){return new i(this)},i.prototype.calc=function(t,e){var n=["==","!=",">=","<=",">","<","+","-","+=","-="];if(-1===n.indexOf(t))throw new Error('Operation "'+t+'" is not available. Permitted operations: '+n.join(", ")+".");if(!(this instanceof i&&e instanceof i))throw new Error("Operand must be an instance of TimeInterval");var r=this.getTotalMilliseconds(),o=e.getTotalMilliseconds();switch(t){case"==":return r===o;case"!=":return r!==o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"+":return(new i).set(r+o);case"-":return(new i).set(r-o);case"+=":return this.set(r+o);case"-=":return this.set(r-o)}},i.prototype.addToDate=function(t){return this._dateModifier(1,t)},i.prototype.subFromDate=function(t){return this._dateModifier(-1,t)},i.prototype.assign=function(t){this._normIntervalObj=t.toObject(),this._normIntervalStr=t.valueOf()},i.prototype._dateModifier=function(t,e){var n=new Date(e.getTime());return n.setTime(n.getTime()+t*this.getTotalMilliseconds()),n},i}();e.default=O});