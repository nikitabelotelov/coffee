define("Types/_source/Query",["require","exports","tslib","Types/entity","Types/util"],function(t,e,i,s,r){"use strict";function o(t){if(t["[Types/_entity/ICloneable]"])return t.clone();if(t&&"object"===typeof t)return Object.assign({},t);return t}function n(t){if("string"===typeof t)t=t.split(/[ ,]/);if(t instanceof Array){var e=t;t={};for(var r=0;r<e.length;r++)t[e[r]]=e[r]}if("object"!==typeof t)throw new TypeError('Invalid argument "expression"');return t}Object.defineProperty(e,"__esModule",{value:true});var u=function(r){function t(t){var e=r.call(this)||this;return e._$resource="",e._$as="",e._$on={},e._$select={},e._$inner=true,s.OptionsToPropertyMixin.call(e,t),e}return i.__extends(t,r),t.prototype.getResource=function(){return this._$resource},t.prototype.getAs=function(){return this._$as},t.prototype.getOn=function(){return this._$on},t.prototype.getSelect=function(){return this._$select},t.prototype.isInner=function(){return this._$inner},t}(r.mixin(Object,s.OptionsToPropertyMixin));e.Join=u;var f=function(o){function n(t){var e=o.call(this)||this;e._$selector="",e._$order=false,s.OptionsToPropertyMixin.call(e,t);var r=e._$order;if("string"===typeof r)r=r.toUpperCase();switch(r){case n.SORT_DESC:case n.SORT_DESC_STR:e._$order=n.SORT_DESC;break;default:e._$order=n.SORT_ASC}return e}return i.__extends(n,o),n.prototype.getSelector=function(){return this._$selector},n.prototype.getOrder=function(){return this._$order},Object.defineProperty(n,"SORT_ASC",{get:function(){return false},enumerable:true,configurable:true}),Object.defineProperty(n,"SORT_DESC",{get:function(){return true},enumerable:true,configurable:true}),Object.defineProperty(n,"SORT_ASC_STR",{get:function(){return"ASC"},enumerable:true,configurable:true}),Object.defineProperty(n,"SORT_DESC_STR",{get:function(){return"DESC"},enumerable:true,configurable:true}),n}(r.mixin(Object,s.OptionsToPropertyMixin));e.Order=f;var p=function(r){function e(t){var e=r.call(this)||this;return e._select={},e._from="",e._as="",e._join=[],e._where={},e._groupBy=[],e._orderBy=[],e._offset=0,e._limit=void 0,e._meta={},e["[Types/_entity/ICloneable]"]=true,s.OptionsToPropertyMixin.call(e,t),e}return i.__extends(e,r),e.prototype.clone=function(){var t=new e;return t._select=o(this._select),t._from=this._from,t._as=this._as,t._join=this._join.slice(),t._where=o(this._where),t._groupBy=this._groupBy.slice(),t._orderBy=this._orderBy.slice(),t._offset=this._offset,t._limit=this._limit,t._meta=o(this._meta),t},e.prototype.clear=function(){return this._select={},this._from="",this._as="",this._join=[],this._where={},this._groupBy=[],this._orderBy=[],this._offset=0,this._limit=void 0,this._meta={},this},e.prototype.getSelect=function(){return this._select},e.prototype.select=function(t){return this._select=n(t),this},e.prototype.getFrom=function(){return this._from},e.prototype.getAs=function(){return this._as},e.prototype.from=function(t,e){return this._from=t,this._as=e,this},e.prototype.getJoin=function(){return this._join},e.prototype.join=function(t,e,r,o){if("string"===typeof t)t=t.split(" ");if(!(t instanceof Array))throw new Error('Invalid argument "resource"');return this._join.push(new u({resource:t.shift(),as:t.shift()||"",on:e,select:n(r),inner:void 0===o?true:o})),this},e.prototype.getWhere=function(){return this._where},e.prototype.where=function(t){var e=typeof(t=t||{});if("object"!==e&&"function"!==e)throw new TypeError('Invalid argument "expression"');return this._where=t,this},e.prototype.getOrderBy=function(){return this._orderBy},e.prototype.orderBy=function(t,e){var r=this;if(void 0===e)e=true;if(this._orderBy=[],"object"===typeof t){var o=function(t){if(!t)return;for(var e in t)if(t.hasOwnProperty(e))r._orderBy.push(new f({selector:e,order:t[e]}))};if(t instanceof Array)for(var n=0;n<t.length;n++)o(t[n]);else o(t)}else if(t)this._orderBy.push(new f({selector:t,order:e}));return this},e.prototype.getGroupBy=function(){return this._groupBy},e.prototype.groupBy=function(t){if("string"===typeof t)t=[t];if(!(t instanceof Array))throw new Error("Invalid argument");return this._groupBy=t,this},e.prototype.getOffset=function(){return this._offset},e.prototype.offset=function(t){return this._offset=parseInt(t,10)||0,this},e.prototype.getLimit=function(){return this._limit},e.prototype.limit=function(t){return this._limit=t,this},e.prototype.getMeta=function(){return this._meta},e.prototype.meta=function(t){if("object"!==typeof(t=t||{}))throw new TypeError('Invalid argument "data"');return this._meta=t,this},e}(r.mixin(Object,s.OptionsToPropertyMixin));(e.default=p).prototype["[Types/_source/Query]"]=true});