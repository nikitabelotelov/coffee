define("Types/_source/Memory",["require","exports","tslib","Types/_source/Local","Types/di","Types/util","Types/shim"],function(t,e,r,o,p,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var s=a.protect("cachedAdapter"),n={},y=function(o){function t(t){var e=o.call(this,t)||this;if(t&&t.endpoint&&t.endpoint.contract&&!n.hasOwnProperty(t.endpoint.contract))n[t.endpoint.contract]=e._$data;return e}return r.__extends(t,o),t.prototype._prepareQueryResult=function(t,e){if(t&&void 0===t.items)t.items=this._getEmptyData(e);return o.prototype._prepareQueryResult.call(this,t)},t.prototype._getTableAdapter=function(){return this[s]||(this[s]=this.getAdapter().forTable(this._$data))},t.prototype._applyFrom=function(t){return t?n[t]:this.data},t.prototype._applyJoin=function(t,e){if(e.length)throw new Error("Joins are not supported");return t},t.prototype._applyWhere=function(t,e,r){if(e&&"object"===typeof e)delete(e=Object.assign({},e))["Разворот"],delete e["ВидДерева"],delete e["usePages"];return o.prototype._applyWhere.call(this,t,e,r)},t.prototype._getEmptyData=function(t){this._emptyData=this._emptyData||new i.Map;var e=t?t.getFrom():void 0;if(!this._emptyData.has(e)){var r=a.object.clonePlain(this._applyFrom(e),true),o=this.getAdapter().forTable(r);o.clear(),this._emptyData.set(e,o.getData())}return this._emptyData.get(e)},t}(o.default);(e.default=y).prototype._moduleName="Types/source:Memory",y.prototype["[Types/_source/Memory]"]=true,y.prototype._$data=null,y.prototype._dataSetItemsProperty="items",y.prototype._dataSetMetaProperty="meta",y.prototype._emptyData=null,p.register("Types/source:Memory",y,{instantiate:false})});