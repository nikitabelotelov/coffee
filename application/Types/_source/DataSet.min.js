define("Types/_source/DataSet",["require","exports","tslib","Types/entity","Types/di","Types/util"],function(t,e,a,o,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var s=function(r){function t(t){var e=r.call(this)||this;return o.OptionsToPropertyMixin.call(e,t),o.SerializableMixin.constructor.call(e),e}return a.__extends(t,r),Object.defineProperty(t.prototype,"writable",{get:function(){return this._$writable},set:function(t){this._$writable=!!t},enumerable:true,configurable:true}),t.prototype.getAdapter=function(){if("string"===typeof this._$adapter)this._$adapter=i.create(this._$adapter);return this._$adapter},t.prototype.getModel=function(){return this._$model},t.prototype.setModel=function(t){this._$model=t},t.prototype.getListModule=function(){return this._$listModule},t.prototype.setListModule=function(t){this._$listModule=t},t.prototype.getIdProperty=function(){return this._$idProperty},t.prototype.setIdProperty=function(t){this._$idProperty=t},t.prototype.getItemsProperty=function(){return this._$itemsProperty},t.prototype.setItemsProperty=function(t){this._$itemsProperty=t},t.prototype.getAll=function(t){if(this._checkAdapter(),void 0===t)t=this._$itemsProperty;var e=this._getListInstance(this._getDataProperty(t));if(this._$metaProperty&&e.getMetaData instanceof Function){var r=e.getMetaData(),o=this.getMetaData(),i=Object.keys(o).length>0;if(!i&&this._$rawData&&this._$rawData.total)o={total:this._$rawData.total},i=true;if(i){if(!(r=a.__assign({},r||{},o)).hasOwnProperty("more")&&o.hasOwnProperty("total"))r.more=o.total;e.setMetaData(r)}}return e},t.prototype.getRow=function(t){if(this._checkAdapter(),void 0===t)t=this._$itemsProperty;var e=this._getDataProperty(t),r;if("recordset"===this.getAdapter().getProperty(e,"_type")){var o=this.getAdapter().forTable(e);if(o.getCount()>0)return this._getModelInstance(o.at(0))}else return this._getModelInstance(e);return},t.prototype.getScalar=function(t){if(void 0===t)t=this._$itemsProperty;return this._getDataProperty(t)},t.prototype.getMetaProperty=function(){return this._$metaProperty},t.prototype.getMetaData=function(){return this._$metaProperty&&this._getDataProperty(this._$metaProperty)||{}},t.prototype.hasProperty=function(t){return t?void 0!==this._getDataProperty(t):false},t.prototype.getProperty=function(t){return this._getDataProperty(t)},t.prototype.getRawData=function(){return this._$rawData},t.prototype.setRawData=function(t){this._$rawData=t},t.prototype._getDataProperty=function(t){return this._checkAdapter(),t?this.getAdapter().getProperty(this._$rawData,t):this._$rawData},t.prototype._getModelInstance=function(t){if(!this._$model)throw new Error("Model is not defined");return i.create(this._$model,{writable:this._$writable,rawData:t,adapter:this._$adapter,idProperty:this._$idProperty})},t.prototype._getListInstance=function(t){return i.create(this._$listModule,{writable:this._$writable,rawData:t,adapter:this._$adapter,model:this._$model,idProperty:this._$idProperty})},t.prototype._checkAdapter=function(){if(!this.getAdapter())throw new Error("Adapter is not defined")},t}(r.mixin(o.DestroyableMixin,o.OptionsToPropertyMixin,o.SerializableMixin));e.default=s,Object.assign(s.prototype,{"[Types/_source/DataSet]":true,_moduleName:"Types/source:DataSet",_$adapter:"Types/entity:adapter.Json",_$rawData:null,_$model:"Types/entity:Model",_$listModule:"Types/collection:RecordSet",_$idProperty:"",_$itemsProperty:"",_$metaProperty:"",_$writable:true}),i.register("Types/source:DataSet",s,{instantiate:false})});