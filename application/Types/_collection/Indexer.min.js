define("Types/_collection/Indexer",["require","exports"],function(t,e){"use strict";function u(t,e){var n=t.length,i=n,r=Math.floor(i/2),o;while(i>0&&r<n)if(o=t[r],i=Math.floor(i/2),o>e)r-=i;else r+=Math.max(i,1);return r}Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e,n,i){this._collection=t,this._count=e,this._at=n,this._prop=i,this.resetIndex()}return t.prototype.getIndexByValue=function(t,e){var n=this.getIndicesByValue(t,e);return n.length?n[0]:-1},t.prototype.getIndicesByValue=function(t,e){var n=this._getIndex(t);if(n){if(n[e])return n[e].slice();if(n[e="["+(Array.isArray(e)?e.join(","):e)+"]"])return n[e].slice()}return[]},t.prototype.resetIndex=function(){this._indices=null},t.prototype.updateIndex=function(t,e){var n=this._indices;if(!n)return;for(var i in n)this._updateIndex(i,t,e)},t.prototype.shiftIndex=function(n,t,i){var r=n+t;this._eachIndexItem(function(t){for(var e=0;e<t.length;e++)if(t[e]>=n&&t[e]<r)t[e]+=i})},t.prototype.removeFromIndex=function(i,r){this._eachIndexItem(function(t){for(var e,n=0;n<r;n++)if((e=t.indexOf(i+n))>-1)t.splice(e,1)})},t.prototype._eachIndexItem=function(t){var e=this._indices,n;if(!e)return;for(var i in e)for(var r in n=e[i])t(n[r],r,i)},t.prototype._getIndex=function(t){if(!t)return;if(!this._hasIndex(t))this._createIndex(t);return this._indices[t]},t.prototype._hasIndex=function(t){return t&&this._indices?t in this._indices:false},t.prototype._deleteIndex=function(t){delete this._indices[t]},t.prototype._createIndex=function(t){if(!t)return;if(!this._indices)this._indices=Object.create(null);this._indices[t]=Object.create(null),this._updateIndex(t,0,this._count(this._collection))},t.prototype._updateIndex=function(t,e,n){var i=this._indices[t],r,o,c;if(!i)return;for(var s=e;s<e+n;s++){if(r=this._at(this._collection,s),(o=this._prop(r,t))instanceof Array)o="["+o.join(",")+"]";if(!(o in i))i[o]=[];(c=i[o]).splice(u(c,s),0,s)}},t}();(e.default=n).prototype["[Types/_collection/Indexer]"]=true,n.prototype._collection=null,n.prototype._count=null,n.prototype._at=null,n.prototype._prop=null,n.prototype._indices=null});