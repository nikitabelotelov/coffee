define("Types/_collection/EventRaisingMixin",["require","exports","Types/_collection/enumerableComparator"],function(e,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n={"[Types/_entity/EventRaisingMixin]":true,_eventRaising:true,_sessionItemContentsGetter:"",_beforeRaiseOff:null,constructor:function(){this._publish("onEventRaisingChange")},setEventRaising:function(e,i){e=!!e,i=!!i;var n=this._eventRaising===e;if(i&&n)throw new Error("The events raising is already "+(e?"enabled":"disabled")+" with analize=true");if(i)if(e)this._eventRaising=e,this._finishUpdateSession(this._beforeRaiseOff),this._beforeRaiseOff=null;else this._beforeRaiseOff=this._startUpdateSession(),this._eventRaising=e;else this._eventRaising=e;if(!n)this._notify("onEventRaisingChange",e,i)},isEventRaising:function(){return this._eventRaising},_startUpdateSession:function(){if(!this._eventRaising)return null;return s.default.startSession(this,this._sessionItemContentsGetter)},_finishUpdateSession:function(e,i){if(!e)return;if(i=void 0===i?true:i,s.default.finishSession(e,this,this._sessionItemContentsGetter),i)this._analizeUpdateSession(e)},_analizeUpdateSession:function(n){var t=this;if(!n)return;s.default.analizeSession(n,this,function(e,i){t._notifyCollectionChange(e,i.newItems,i.newItemsIndex,i.oldItems,i.oldItemsIndex,n)})},_notifyCollectionChange:function(e,i,n,t,s){if(!this._isNeedNotifyCollectionChange())return;this._notify("onCollectionChange",e,i,n,t,s)},_extractPacksByList:function(e,i,n){for(var t=function(e,i){n(e.slice(),i),e.length=0},s=[],o,a,r=0;r<i.length;r++)o=i[r],s[a=e.getIndex(o)]=o;for(var f=[],l=0,h=s.length-1,u=0;u<=h;u++){if(!(o=s[u])){if(f.length)t(f,l);continue}if(!f.length)l=u;f.push(o)}if(f.length)t(f,l)},_isNeedNotifyCollectionChange:function(){return this._eventRaising&&this.hasEventHandlers("onCollectionChange")}};i.default=n});