define("Types/source",["Transport/RPCJSON","Core/ParallelDeferred","Types/shim","Core/helpers/Number/randomId","Core/Deferred","Types/di","Core/core-extend","Types/util","Types/entity","tslib","require","exports"],function(n,o,i,a,s,u,p,c,d,l,f,e){"use strict";Object.defineProperty(e,"__esModule",{value:true}),e["Types/_source/PrefetchProxy"]=true;var t,r=function(){var e={},t=function(e,t,n,o,r,i){Object.defineProperty(t,"__esModule",{value:true});var a=function(r){function e(e){var t=r.call(this,e)||this;if(t._$target=null,t._$data={read:null,query:null,copy:null},t._done={},t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,o.OptionsToPropertyMixin.call(t,e),o.SerializableMixin.constructor.call(t),!t._$target)throw new ReferenceError('Option "target" is required.');return t}return n.__extends(e,r),e.prototype.create=function(e){return this._$target.create(e)},e.prototype.read=function(e,t){if(this._$data.read&&!this._done.read)return this._done.read=true,i.success(this._$data.read);return this._$target.read(e,t)},e.prototype.update=function(e,t){return this._$target.update(e,t)},e.prototype.destroy=function(e,t){return this._$target.destroy(e,t)},e.prototype.query=function(e){if(this._$data.query&&!this._done.query)return this._done.query=true,i.success(this._$data.query);return this._$target.query(e)},e.prototype.merge=function(e,t){return this._$target.merge(e,t)},e.prototype.copy=function(e,t){if(this._$data.copy&&!this._done.copy)return this._done.copy=true,i.success(this._$data.copy);return this._$target.copy(e,t)},e.prototype.move=function(e,t,r){return this._$target.move(e,t,r)},e.prototype.getOptions=function(){return this._$target.getOptions()},e.prototype.setOptions=function(e){return this._$target.setOptions(e)},e.prototype._getSerializableState=function(e){return(e=o.SerializableMixin.prototype._getSerializableState.call(this,e))._done=this._done,e},e.prototype._setSerializableState=function(e){var t=o.SerializableMixin.prototype._setSerializableState(e);return function(){t.call(this),this._done=e._done}},e}(r.mixin(o.DestroyableMixin,o.OptionsToPropertyMixin,o.SerializableMixin));(t.default=a).prototype._moduleName="Types/source:PrefetchProxy",a.prototype["[Types/_source/PrefetchProxy]"]=true}(f,e,l,d,c,s);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/EndpointMixin"]=true;var y=function(){var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r={"[Types/_source/EndpointMixin]":true,_$endpoint:null,constructor:function(e){if(this._$endpoint=this._$endpoint||{},e){if("string"===typeof e.endpoint)e.endpoint={contract:e.endpoint};if(e.endpoint instanceof Object)e.endpoint=Object.assign({},this._$endpoint,e.endpoint)}},getEndpoint:function(){return Object.assign({},this._$endpoint)}};t.default=r}(f,e);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/ICrud"]=true;var _,h=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/ICrudPlus"]=true;var v,g=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/IData"]=true;var b,P=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/IProvider"]=true;var m,$=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/IRpc"]=true;var O,T=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/provider/SbisBusinessLogic"]=true;var M=function(){var e={},t=function(e,t,n,o,r,i,a){Object.defineProperty(t,"__esModule",{value:true});var s=function(r){function e(e){var t=r.call(this)||this;return t["[Types/_source/provider/IAbstract]"]=true,t._$endpoint={},o.OptionsToPropertyMixin.call(t,e),t}return n.__extends(e,r),e.prototype.getEndpoint=function(){return this._$endpoint},e.prototype.call=function(e,t){e+="",t=t||{};var r=this._$transport,n=this.getEndpoint(),o;if(!(e.indexOf(".")>-1)&&n.contract)e=n.contract+this._nameSpaceSeparator+e;return new r({serviceUrl:n.address}).callMethod(e,t)},e}(i.mixin(Object,o.OptionsToPropertyMixin));(t.default=s).prototype["[Types/_source/provider/SbisBusinessLogic]"]=true,s.prototype._$transport=a,s.prototype._nameSpaceSeparator=".",r.register("Types/source:provider.SbisBusinessLogic",s,{instantiate:false})}(f,e,l,d,u,c,n);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/provider/INotify"]=true;var w=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/BindingMixin"]=true;var S=function(){var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r={"[Types/_source/BindingMixin]":true,_$binding:{create:"create",read:"read",update:"update",destroy:"delete",query:"query",copy:"copy",merge:"merge",move:"move"},constructor:function(e){if(e&&e.binding instanceof Object)e.binding=Object.assign({},this._$binding,e.binding)},getBinding:function(){return Object.assign({},this._$binding)},setBinding:function(e){this._$binding=e}};t.default=r}(f,e);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/Query"]=true;var I=function(){var e={},t=function(e,t,i,a,r){function n(e){if(e["[Types/_entity/ICloneable]"])return e.clone();if(e&&"object"===typeof e)return Object.assign({},e);return e}function o(e){if("string"===typeof e)e=e.split(/[ ,]/);if(e instanceof Array){var t=e;e={};for(var r=0;r<t.length;r++)e[t[r]]=t[r]}if("object"!==typeof e)throw new TypeError('Invalid argument "expression"');return e}Object.defineProperty(t,"__esModule",{value:true});var s=function(r){function e(e){var t=r.call(this)||this;return t._$resource="",t._$as="",t._$on={},t._$select={},t._$inner=true,a.OptionsToPropertyMixin.call(t,e),t}return i.__extends(e,r),e.prototype.getResource=function(){return this._$resource},e.prototype.getAs=function(){return this._$as},e.prototype.getOn=function(){return this._$on},e.prototype.getSelect=function(){return this._$select},e.prototype.isInner=function(){return this._$inner},e}(r.mixin(Object,a.OptionsToPropertyMixin));t.Join=s;var u=function(n){function o(e){var t=n.call(this)||this;t._$selector="",t._$order=false,a.OptionsToPropertyMixin.call(t,e);var r=t._$order;if("string"===typeof r)r=r.toUpperCase();switch(r){case o.SORT_DESC:case o.SORT_DESC_STR:t._$order=o.SORT_DESC;break;default:t._$order=o.SORT_ASC}return t}return i.__extends(o,n),o.prototype.getSelector=function(){return this._$selector},o.prototype.getOrder=function(){return this._$order},Object.defineProperty(o,"SORT_ASC",{get:function(){return false},enumerable:true,configurable:true}),Object.defineProperty(o,"SORT_DESC",{get:function(){return true},enumerable:true,configurable:true}),Object.defineProperty(o,"SORT_ASC_STR",{get:function(){return"ASC"},enumerable:true,configurable:true}),Object.defineProperty(o,"SORT_DESC_STR",{get:function(){return"DESC"},enumerable:true,configurable:true}),o}(r.mixin(Object,a.OptionsToPropertyMixin));t.Order=u;var p=function(r){function t(e){var t=r.call(this)||this;return t._select={},t._from="",t._as="",t._join=[],t._where={},t._groupBy=[],t._orderBy=[],t._offset=0,t._limit=void 0,t._meta={},t["[Types/_entity/ICloneable]"]=true,a.OptionsToPropertyMixin.call(t,e),t}return i.__extends(t,r),t.prototype.clone=function(){var e=new t;return e._select=n(this._select),e._from=this._from,e._as=this._as,e._join=this._join.slice(),e._where=n(this._where),e._groupBy=this._groupBy.slice(),e._orderBy=this._orderBy.slice(),e._offset=this._offset,e._limit=this._limit,e._meta=n(this._meta),e},t.prototype.clear=function(){return this._select={},this._from="",this._as="",this._join=[],this._where={},this._groupBy=[],this._orderBy=[],this._offset=0,this._limit=void 0,this._meta={},this},t.prototype.getSelect=function(){return this._select},t.prototype.select=function(e){return this._select=o(e),this},t.prototype.getFrom=function(){return this._from},t.prototype.getAs=function(){return this._as},t.prototype.from=function(e,t){return this._from=e,this._as=t,this},t.prototype.getJoin=function(){return this._join},t.prototype.join=function(e,t,r,n){if("string"===typeof e)e=e.split(" ");if(!(e instanceof Array))throw new Error('Invalid argument "resource"');return this._join.push(new s({resource:e.shift(),as:e.shift()||"",on:t,select:o(r),inner:void 0===n?true:n})),this},t.prototype.getWhere=function(){return this._where},t.prototype.where=function(e){var t=typeof(e=e||{});if("object"!==t&&"function"!==t)throw new TypeError('Invalid argument "expression"');return this._where=e,this},t.prototype.getOrderBy=function(){return this._orderBy},t.prototype.orderBy=function(e,t){var r=this;if(void 0===t)t=true;if(this._orderBy=[],"object"===typeof e){var n=function(e){if(!e)return;for(var t in e)if(e.hasOwnProperty(t))r._orderBy.push(new u({selector:t,order:e[t]}))};if(e instanceof Array)for(var o=0;o<e.length;o++)n(e[o]);else n(e)}else if(e)this._orderBy.push(new u({selector:e,order:t}));return this},t.prototype.getGroupBy=function(){return this._groupBy},t.prototype.groupBy=function(e){if("string"===typeof e)e=[e];if(!(e instanceof Array))throw new Error("Invalid argument");return this._groupBy=e,this},t.prototype.getOffset=function(){return this._offset},t.prototype.offset=function(e){return this._offset=parseInt(e,10)||0,this},t.prototype.getLimit=function(){return this._limit},t.prototype.limit=function(e){return this._limit=e,this},t.prototype.getMeta=function(){return this._meta},t.prototype.meta=function(e){if("object"!==typeof(e=e||{}))throw new TypeError('Invalid argument "data"');return this._meta=e,this},t}(r.mixin(Object,a.OptionsToPropertyMixin));(t.default=p).prototype["[Types/_source/Query]"]=true}(f,e,l,d,c);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),x=I,D=I;e["Types/_source/DataSet"]=true;var j,A=function(){var e={},t=function(e,t,n,o,i,r){Object.defineProperty(t,"__esModule",{value:true});var a=function(r){function e(e){var t=r.call(this)||this;return o.OptionsToPropertyMixin.call(t,e),o.SerializableMixin.constructor.call(t),t}return n.__extends(e,r),Object.defineProperty(e.prototype,"writable",{get:function(){return this._$writable},set:function(e){this._$writable=!!e},enumerable:true,configurable:true}),e.prototype.getAdapter=function(){if("string"===typeof this._$adapter)this._$adapter=i.create(this._$adapter);return this._$adapter},e.prototype.getModel=function(){return this._$model},e.prototype.setModel=function(e){this._$model=e},e.prototype.getListModule=function(){return this._$listModule},e.prototype.setListModule=function(e){this._$listModule=e},e.prototype.getIdProperty=function(){return this._$idProperty},e.prototype.setIdProperty=function(e){this._$idProperty=e},e.prototype.getItemsProperty=function(){return this._$itemsProperty},e.prototype.setItemsProperty=function(e){this._$itemsProperty=e},e.prototype.getAll=function(e){if(this._checkAdapter(),void 0===e)e=this._$itemsProperty;var t=this._getListInstance(this._getDataProperty(e));if(this._$metaProperty&&t.getMetaData instanceof Function){var r=t.getMetaData(),n=this.getMetaData(),o=Object.keys(n).length>0;if(!o&&this._$rawData&&this._$rawData.total)n={total:this._$rawData.total},o=true;if(o){if(!(r=Object.assign(r||{},n)).hasOwnProperty("more")&&n.hasOwnProperty("total"))r.more=n.total;t.setMetaData(r)}}return t},e.prototype.getRow=function(e){if(this._checkAdapter(),void 0===e)e=this._$itemsProperty;var t=this._getDataProperty(e),r;if("recordset"===this.getAdapter().getProperty(t,"_type")){var n=this.getAdapter().forTable(t);if(n.getCount()>0)return this._getModelInstance(n.at(0))}else return this._getModelInstance(t);return},e.prototype.getScalar=function(e){if(void 0===e)e=this._$itemsProperty;return this._getDataProperty(e)},e.prototype.getMetaProperty=function(){return this._$metaProperty},e.prototype.getMetaData=function(){return this._$metaProperty&&this._getDataProperty(this._$metaProperty)||{}},e.prototype.hasProperty=function(e){return e?void 0!==this._getDataProperty(e):false},e.prototype.getProperty=function(e){return this._getDataProperty(e)},e.prototype.getRawData=function(){return this._$rawData},e.prototype.setRawData=function(e){this._$rawData=e},e.prototype._getDataProperty=function(e){return this._checkAdapter(),e?this.getAdapter().getProperty(this._$rawData,e):this._$rawData},e.prototype._getModelInstance=function(e){if(!this._$model)throw new Error("Model is not defined");return i.create(this._$model,{writable:this._$writable,rawData:e,adapter:this._$adapter,idProperty:this._$idProperty})},e.prototype._getListInstance=function(e){return i.create(this._$listModule,{writable:this._$writable,rawData:e,adapter:this._$adapter,model:this._$model,idProperty:this._$idProperty})},e.prototype._checkAdapter=function(){if(!this.getAdapter())throw new Error("Adapter is not defined")},e}(r.mixin(o.DestroyableMixin,o.OptionsToPropertyMixin,o.SerializableMixin));(t.default=a).prototype._moduleName="Types/source:DataSet",a.prototype["[Types/_source/DataSet]"]=true,a.prototype._$adapter="Types/entity:adapter.Json",a.prototype._$rawData=null,a.prototype._$model="Types/entity:Model",a.prototype._$listModule="Types/collection:RecordSet",a.prototype._$idProperty="",a.prototype._$itemsProperty="",a.prototype._$metaProperty="",a.prototype._$writable=true,i.register("Types/source:DataSet",a,{instantiate:false})}(f,e,l,d,u,c);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/provider/IChannel"]=true;var R=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/provider/IAbstract"]=true;var C=function(){var e={},t=(r=f,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["Types/_source/OptionsMixin"]=true;var B=function(){var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r={"[Types/_source/OptionsMixin]":true,_$options:{debug:false},constructor:function(e){if(e&&e.options instanceof Object)this._$options=Object.assign({},this._$options||{},e.options),delete e.options},getOptions:function(){return Object.assign({},this._$options)},setOptions:function(e){this._$options=Object.assign({},this._$options,e||{})},addOptions:function(e,t){return Object.assign({},e.prototype._$options,t)}};t.default=r}(f,e);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/LazyMixin"]=true;var k=function(){var e={},t=function(e,t,i,a){Object.defineProperty(t,"__esModule",{value:true});var r,s=(0,eval)("this").DeferredCanceledError,n={"[Types/_source/LazyMixin]":true,_additionalDependencies:["Types/source","Types/entity","Types/collection"],_loadAdditionalDependencies:function(e){var t=this,r=this._additionalDependencies,n=r.reduce(function(e,t){return e&&a.defined(t)},true),o=new i;if(n)if(e)e.call(this,o);else o.callback();else a(r,function(){if(e&&(!o.isReady()||!(o.getResult()instanceof s)))e.call(t,o);else o.callback()},function(e){return o.errback(e)});return o},_connectAdditionalDependencies:function(t,r){if(!r.isCallbacksLocked())r.addErrback(function(e){if(e instanceof s)t.cancel();return e});t.addCallbacks(function(e){return r.callback(e),e},function(e){return r.errback(e),e})}};t.default=n}(f,e,s,f);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/DataMixin"]=true;var E=function(){var e={},t=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:true});var o={"[Types/_source/DataMixin]":true,_$adapter:"Types/entity:adapter.Json",_$model:"Types/entity:Model",_$listModule:"Types/collection:RecordSet",_$idProperty:"",_dataSetModule:"Types/source:DataSet",_dataSetItemsProperty:"",_dataSetMetaProperty:"",_writable:r.ReadWriteMixin.writable,constructor:function(e){if((e=e||{}).dataSetMetaProperty)this._dataSetMetaProperty=e.dataSetMetaProperty},getAdapter:function(){if("string"===typeof this._$adapter)this._$adapter=n.create(this._$adapter);return this._$adapter},setAdapter:function(){throw new Error(this._moduleName+'::setAdapter() - method has been removed in 3.17.300 as deprecated. You should inject adapter into constructor use "adapter" option.')},getModel:function(){return this._$model},setModel:function(e){this._$model=e},getListModule:function(){return this._$listModule},setListModule:function(e){this._$listModule=e},getIdProperty:function(){return this._$idProperty},setIdProperty:function(e){this._$idProperty=e},_getIdPropertyByData:function(e){return this.getAdapter().getKeyField(e)||""},_getModelInstance:function(e){return n.create(this._$model,{writable:this._writable,rawData:e,adapter:this.getAdapter(),idProperty:this.getIdProperty()})},_getDataSetInstance:function(e){return n.create(this._dataSetModule,Object.assign({writable:this._writable,adapter:this.getAdapter(),model:this.getModel(),listModule:this.getListModule(),idProperty:this.getIdProperty()||this._getIdPropertyByData(e.rawData||null)},e))},_wrapToDataSet:function(e){return this._getDataSetInstance({rawData:e,itemsProperty:this._dataSetItemsProperty,metaProperty:this._dataSetMetaProperty})},_each:function(e,t,r){for(var n=this.getAdapter().forTable(e),o=0,i=n.getCount();o<i;o++)t.call(r||this,n.at(o),o)},isModelInstance:function(e){return e&&e["[Types/_entity/IObject]"]&&e["[Types/_entity/FormattableMixin]"]},isListInstance:function(e){return e&&e["[Types/_collection/IList]"]&&e["[Types/_entity/FormattableMixin]"]}};t.default=o}(f,e,d,u);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/DataCrudMixin"]=true;var F=function(){var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r={"[Types/_source/DataCrudMixin]":true,_prepareCreateResult:function(e){return this._getModelInstance(e)},_prepareReadResult:function(e){return this._getModelInstance(e)},_prepareUpdateResult:function(e,r){var n=this.getIdProperty(),o=function(e,t){if(t&&n&&!e.get(n))e.set(n,t);e.acceptChanges()};if(e&&e["[Types/_collection/IList]"])e.each(function(e,t){o(e,r?r[t]:void 0)});else o(e,r);return r},_prepareQueryResult:function(e){return this._wrapToDataSet(e)}};t.default=r}(f,e);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/Base"]=true;var N=function(){var e={},t=function(e,t,n,o,r,i,a,s,u){Object.defineProperty(t,"__esModule",{value:true});var p=function(r){function e(e){var t=this;return e=Object.assign({},e||{}),t=r.call(this,e)||this,o.default.constructor.call(t,e),a.OptionsToPropertyMixin.call(t,e),a.SerializableMixin.constructor.call(t),i.default.constructor.call(t,e),t}return n.__extends(e,r),e.extend=function(e,t){return s.logger.error("Types/source:Base","Method extend is deprecated, use ES6 extends or Core/core-extend"),u(this,e,t)},e}(s.mixin(a.DestroyableMixin,a.OptionsToPropertyMixin,a.SerializableMixin,o.default,r.default,i.default));(t.default=p).prototype._moduleName="Types/source:Base",p.prototype["[Types/_source/Base]"]=true,p.prototype["[Types/_source/IData]"]=true}(f,e,l,B,k,E,d,c,p);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),L=N;e["Types/_source/provider"]=true;var z,q=function(){var e={},t=(r=f,n=e,o=C,i=R,a=w,s=M,Object.defineProperty(n,"__esModule",{value:true}),n.IAbstract=o.default,n.IChannel=i.default,n.INotify=a.default,void(n.SbisBusinessLogic=s.default)),r,n,o,i,a,s;if(t instanceof Function)return t;else for(var u in t)if(t.hasOwnProperty(u))e[u]=t[u];return e}();e["Types/_source/Local"]=true;var K=function(){var e={},t=function(e,t,n,r,o,i,a,p,s){Object.defineProperty(t,"__esModule",{value:true});var c="on",u="before",d="after";function l(e,t,r){if(t instanceof Array){for(var n=0;n<t.length;n++)if(l(e,t[n],r))return true;return false}if(e instanceof Array){for(var n=0;n<e.length;n++)if(!l(e[n],t,r))return false;return true}return e==t}var f=function(r){function e(e){var t=r.call(this,e)||this;return t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,t._reIndex(),t}return n.__extends(e,r),Object.defineProperty(e.prototype,"_data",{get:function(){return this._getTableAdapter().getData()},enumerable:true,configurable:true}),e.prototype.create=function(e){var t=this;return e=a.object.clonePlain(e,true),this._loadAdditionalDependencies().addCallback(function(){return t._prepareCreateResult(e)})},e.prototype.read=function(e,t){var r=this,n=this._getRecordByKey(e);if(n)return this._loadAdditionalDependencies().addCallback(function(){return r._prepareReadResult(n)});else return p.fail('Record with key "'+e+'" does not exist')},e.prototype.update=function(e,t){var i=this,r=function(e){var t=i.getIdProperty(),r=t?e.get(t):void 0;if(void 0===r)r=s("k"),e.set(t,r);var n=i._getTableAdapter(),o=i._getIndexByKey(r);if(-1===o){if(n.add(e.getRawData()),i._index)i._index[r]=n.getCount()-1}else n.replace(e.getRawData(),o);return r},n=[];if(o.default.isListInstance(e))e.each(function(e){n.push(r(e))});else n=r(e);return this._loadAdditionalDependencies().addCallback(function(){return i._prepareUpdateResult(e,n)})},e.prototype.destroy=function(e,t){var r=this,n=function(e){var t=r._getIndexByKey(e);if(-1!==t)return r._getTableAdapter().remove(t),r._reIndex(),true;else return false};if(!(e instanceof Array))e=[e];for(var o=0,i=e.length;o<i;o++)if(!n(e[o]))return p.fail('Record with key "'+e[o]+'" does not exist');return p.success(true)},e.prototype.query=function(e){var t=this,r=this._applyFrom(e?e.getFrom():void 0),n=this.getAdapter(),o;if(e)r=this._applyJoin(r,e.getJoin()),r=this._applyWhere(r,e.getWhere()),r=this._applyOrderBy(r,e.getOrderBy()),o=n.forTable(r).getCount(),r=this._applyPaging(r,e.getOffset(),e.getLimit());else if(this._$filter)r=this._applyWhere(r);else o=n.forTable(r).getCount();return this._loadAdditionalDependencies().addCallback(function(){return t._prepareQueryResult({items:r,meta:{total:o}},e)})},e.prototype.merge=function(e,t){var r=this._getIndexByKey(e),n=this._getIndexByKey(t);if(-1===r||-1===n)return p.fail('Record with key "'+e+'" or "'+t+'" does not exist');else return this._getTableAdapter().merge(r,n,this.getIdProperty()),this._reIndex(),p.success(true)},e.prototype.copy=function(e,t){var r=this,n=this._getIndexByKey(e);if(-1===n)return p.fail('Record with key "'+e+'" does not exist');else{var o=this._getTableAdapter().copy(n);return this._reIndex(),this._loadAdditionalDependencies().addCallback(function(){return r._prepareReadResult(o)})}},e.prototype.move=function(e,t,o){var i=this;o=o||{};var r=[];if(!(e instanceof Array))e=[e];var n=this._getTableAdapter(),a=this.getAdapter();e.sort(function(e,t){var r=i._getIndexByKey(e),n=i._getIndexByKey(t);return o.position==d?n-r:r-n}).forEach(function(e){var t=i._getIndexByKey(e);r.push(a.forRecord(n.at(t)))});var s=-1,u=null;if(null!==t)if(s=this._getIndexByKey(t),u=a.forRecord(n.at(s)),-1===s)return p.fail("Can't find target position");if(o.position===c)return this._hierarchyMove(r,u,o);return this._reorderMove(r,u,o)},e.prototype._wrapToDataSet=function(e){return r.prototype._wrapToDataSet.call(this,a.object.clonePlain(e,true))},e.prototype._prepareCreateResult=function(e){return i.default._prepareCreateResult.call(this,a.object.clonePlain(e,true))},e.prototype._prepareReadResult=function(e){return i.default._prepareReadResult.call(this,a.object.clonePlain(e,true))},e.prototype._getRecordByKey=function(e){return this._getTableAdapter().at(this._getIndexByKey(e))},e.prototype._getIndexByKey=function(e){var t=this._index[e];return void 0===t?-1:t},e.prototype._reIndex=function(){var n=this;this._index={};var o=this.getAdapter();this._each(this._data,function(e,t){var r=o.forRecord(e).get(n._$idProperty);n._index[r]=t})},e.prototype._applyWhere=function(e,n){var o=this;if(n=n||{},!this._$filter&&"object"===typeof n&&!Object.keys(n).length)return e;var i=function(e,t){var r=true;for(var n in e){if(!e.hasOwnProperty(n))continue;if(!(r=l(t.get(n),e[n],"=")))break}return r},a=this.getAdapter(),s=a.forTable(),u="function"===typeof n;return this._each(e,function(e,t){e=a.forRecord(e);var r=true;if(o._$filter)r=o._$filter(e,n);else r=u?n(e,t):i(n,e);if(r)s.add(e.getData())}),s.getData()},e.prototype._applyOrderBy=function(e,t){if(!(t=t||[]).length)return e;for(var i=[],r=0;r<t.length;r++)i.push({field:t[r].getSelector(),order:t[r].getOrder()});var a=this.getAdapter(),s=[];this._each(e,function(e,t){for(var r,n=[],o=0;o<i.length;o++)r=a.forRecord(e).get(i[o].field),n.push(void 0===r?null:r);s.push({index:t,values:n})});var o=function(e,t){if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;if(e==t)return 0;return e>t?1:-1};s.sort(function(e,t){for(var r=0,n=0;n<i.length;n++)if(0!==(r=(i[n].order?-1:1)*o(e.values[n],t.values[n])))break;return r});for(var n=a.forTable(e),u=a.forTable(),r=0,p=s.length;r<p;r++)u.add(n.at(s[r].index));return u.getData()},e.prototype._applyPaging=function(e,t,r){if(0===(t=t||0)&&void 0===r)return e;var n=this.getAdapter().forTable(e);if(void 0===r)r=n.getCount();else r=r||0;for(var o=this.getAdapter().forTable(),i=0,a=t,s=Math.min(n.getCount(),a+r),u=a;u<s;u++,i++)o.add(n.at(u));return o.getData()},e.prototype._reorderMove=function(e,t,n){var o=this,i;if(n.parentProperty)i=t.get(n.parentProperty);if(!n.position&&n.hasOwnProperty("before"))n.position=n.before?u:d;var a=this._getTableAdapter(),s=t.get(this._$idProperty);return e.forEach(function(e){if(n.parentProperty)e.set(n.parentProperty,i);var t=o._getIndexByKey(e.get(o._$idProperty)),r=o._getIndexByKey(s);if(n.position===u&&r>t)r--;else if(n.position===d&&r<t)r++;a.move(t,r),o._reIndex()}),(new p).callback()},e.prototype._hierarchyMove=function(e,t,r){if(!r.parentProperty)return p.fail("Parent property is not defined");var n=t?t.get(this._$idProperty):null;return e.forEach(function(e){e.set(r.parentProperty,n)}),(new p).callback()},e}(a.mixin(r.default,i.default));(t.default=f).prototype._moduleName="Types/source:Local",f.prototype["[Types/_source/Local]"]=true,f.prototype._$filter=null,f.prototype._index=null}(f,e,l,N,E,F,c,s,a);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),W=K;e["Types/_source/Remote"]=true;var G=function(){var e={},t=function(e,t,n,r,u,o,i,a,s,p,c,d,l){Object.defineProperty(t,"__esModule",{value:true});var f,y=(0,eval)("this").DeferredCanceledError,_={PAGE:"Page",OFFSET:"Offset"};function h(e){return null===e||void 0===e}function v(e){return""===e||h(e)}function g(e){return[e]}function b(e,t){return[e,t]}function P(e,t){if(this._$options.updateOnlyChanged){var r=this._getValidIdProperty(e);if(!v(r))if(u.default.isModelInstance(e)&&!h(e.get(r))){var n=l("Types/entity").Record,o=e.getChanged();o.unshift(r),e=n.filterFields(e,o)}else if(u.default.isListInstance(e))i=e,s=new(0,l("Types/collection").RecordSet)({adapter:i._$adapter,idProperty:i._$idProperty}),i.each(function(e){if(h(e.get(r))||e.isChanged())s.add(e)}),e=s}var i,a,s;return[e,t]}function m(e,t){return[e,t]}function $(e){return[e]}function O(e,t){return[e,t]}function T(e,t){return[e,t]}function M(e,t,r){return[e,t,r]}var w=function(r){function e(e){var t=this;return t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,t["[Types/_source/IProvider]"]=true,i.default.constructor.call(t,e),a.default.constructor.call(t,e),t=r.call(this,e)||this,p.ObservableMixin.call(t,e),t._publish("onBeforeProviderCall"),t}return n.__extends(e,r),e.prototype.create=function(e){var t=this;return this._callProvider(this._$binding.create,this._$passing.create.call(this,e)).addCallback(function(e){return t._loadAdditionalDependencies().addCallback(function(){return t._prepareCreateResult(e)})})},e.prototype.read=function(e,t){var r=this;return this._callProvider(this._$binding.read,this._$passing.read.call(this,e,t)).addCallback(function(e){return r._loadAdditionalDependencies().addCallback(function(){return r._prepareReadResult(e)})})},e.prototype.update=function(t,e){var r=this;return this._callProvider(this._$binding.update,this._$passing.update.call(this,t,e)).addCallback(function(e){return r._prepareUpdateResult(t,e)})},e.prototype.destroy=function(e,t){return this._callProvider(this._$binding.destroy,this._$passing.destroy.call(this,e,t))},e.prototype.query=function(e){var t=this;return this._callProvider(this._$binding.query,this._$passing.query.call(this,e)).addCallback(function(e){return t._loadAdditionalDependencies().addCallback(function(){return t._prepareQueryResult(e)})})},e.prototype.merge=function(e,t){return this._callProvider(this._$binding.merge,this._$passing.merge.call(this,e,t))},e.prototype.copy=function(e,t){var r=this;return this._callProvider(this._$binding.copy,this._$passing.copy.call(this,e,t)).addCallback(function(e){return r._prepareReadResult(e)})},e.prototype.move=function(e,t,r){return this._callProvider(this._$binding.move,this._$passing.move.call(this,e,t,r))},e.prototype.getEndpoint=function(){return a.default.getEndpoint.call(this)},e.prototype.getProvider=function(){if(!this._provider)this._provider=this._createProvider(this._$provider,{endpoint:this._$endpoint,options:this._$options});return this._provider},e.prototype._createProvider=function(e,t){if(!e)throw new Error("Remote access provider is not defined");if("string"===typeof e)e=c.create(e,t);return e},e.prototype._callProvider=function(t,e){var r=this,n=this.getProvider(),o=this._notify("onBeforeProviderCall",t,e);if(void 0!==o)e=o;var i=n.call(t,this._prepareProviderArguments(e));if(this._$options.debug)i.addErrback(function(e){if(e instanceof y)d.logger.info(r._moduleName,'calling of remote service "'+t+'" has been cancelled.');else d.logger.error(r._moduleName,'remote service "'+t+'" throws an error "'+e.message+'".');return e});return i},e.prototype._prepareProviderArguments=function(e){return this.getAdapter().serialize(e)},e.prototype._getValidIdProperty=function(e){var t=this.getIdProperty();if(!v(t))return t;if("function"===typeof e.getIdProperty)return e.getIdProperty();return t},Object.defineProperty(e,"NAVIGATION_TYPE",{get:function(){return _},enumerable:true,configurable:true}),e}(d.mixin(r.default,p.ObservableMixin,o.default,i.default,a.default));(t.default=w).prototype["[Types/_source/Remote]"]=true,w.prototype._$provider=null,w.prototype._$passing={create:g,read:b,update:P,destroy:m,query:$,copy:O,merge:T,move:M},w.prototype._$options=s.default.addOptions(r.default,{updateOnlyChanged:false,navigationType:_.PAGE}),w.prototype._moduleName="Types/source:Remote",w.prototype._provider=null,w.prototype._prepareArgumentsForCall=w.prototype._prepareProviderArguments}(f,e,l,N,E,F,S,y,B,d,u,c,f);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),J=G;e["Types/_source/Memory"]=true;var Q=function(){var e={},t=function(e,t,n,r,o,i,a){Object.defineProperty(t,"__esModule",{value:true});var s=i.protect("cachedAdapter"),u={},p=function(r){function e(e){var t=r.call(this,e)||this;if(e&&e.endpoint&&e.endpoint.contract&&!u.hasOwnProperty(e.endpoint.contract))u[e.endpoint.contract]=t._$data;return t}return n.__extends(e,r),e.prototype._prepareQueryResult=function(e,t){if(e&&void 0===e.items)e.items=this._getEmptyData(t);return r.prototype._prepareQueryResult.call(this,e)},e.prototype._getTableAdapter=function(){return this[s]||(this[s]=this.getAdapter().forTable(this._$data))},e.prototype._applyFrom=function(e){return e?u[e]:this._data},e.prototype._applyJoin=function(e,t){if(t.length)throw new Error("Joins are not supported");return e},e.prototype._applyWhere=function(e,t){if(t&&"object"===typeof t)delete(t=Object.assign({},t))["Разворот"],delete t["ВидДерева"],delete t["usePages"];return r.prototype._applyWhere.call(this,e,t)},e.prototype._getEmptyData=function(e){this._emptyData=this._emptyData||new a.Map;var t=e?e.getFrom():void 0;if(!this._emptyData.has(t)){var r=i.object.clonePlain(this._applyFrom(t),true),n=this.getAdapter().forTable(r);n.clear(),this._emptyData.set(t,n.getData())}return this._emptyData.get(t)},e}(r.default);(t.default=p).prototype._moduleName="Types/source:Memory",p.prototype["[Types/_source/Memory]"]=true,p.prototype._$data=null,p.prototype._dataSetItemsProperty="items",p.prototype._dataSetMetaProperty="meta",p.prototype._emptyData=null,o.register("Types/source:Memory",p,{instantiate:false})}(f,e,l,K,u,c,i);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),H=Q;e["Types/_source/HierarchicalMemory"]=true;var U,V=function(){var e={},t=function(e,t,n,o,f,r,i,a){Object.defineProperty(t,"__esModule",{value:true});var s=function(r){function e(e){var t=r.call(this)||this;return t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,f.OptionsToPropertyMixin.call(t,e),f.SerializableMixin.constructor.call(t),t._source=new o.default(e),t}return n.__extends(e,r),e.prototype.create=function(e){return this._source.create(e)},e.prototype.read=function(e,t){return this._source.read(e,t)},e.prototype.update=function(e,t){return this._source.update(e,t)},e.prototype.destroy=function(e,t){return this._source.destroy(e,t)},e.prototype.query=function(c){var d=this,l=new a;return i(["Types/collection"],function(p){d._source.query(c).addCallbacks(function(e){if(d._$parentProperty){var t=new f.relation.Hierarchy({idProperty:d._$idProperty,parentProperty:d._$parentProperty}),r=new p.RecordSet({rawData:d._$data,adapter:d._source.getAdapter(),idProperty:d._$idProperty}),n=new p.RecordSet({adapter:d._source.getAdapter(),idProperty:d._$idProperty}),o=c.getWhere()[d._$parentProperty],i=r.getRecordById(o);if(i){n.add(i,0);var a=void 0;while(i&&(a=t.getParent(i,r)))n.add(a,0),i=a.get(d._$idProperty)}var s=e.getRawData(true);if(s){var u=s.meta||{};u.path=n,s.meta=u,e.setRawData(s)}}l.callback(e)},function(e){l.errback(e)})},function(e){l.errback(e)}),l},e.prototype.merge=function(e,t){return this._source.merge(e,t)},e.prototype.copy=function(e,t){return this._source.copy(e,t)},e.prototype.move=function(e,t,r){return this._source.move(e,t,r)},e.prototype._getSerializableState=function(e){return(e=f.SerializableMixin.prototype._getSerializableState.call(this,e))._source=this._source,e},e.prototype._setSerializableState=function(e){var t=f.SerializableMixin.prototype._setSerializableState(e);return function(){t.call(this),this._source=e._source}},e}(r.mixin(f.DestroyableMixin,f.OptionsToPropertyMixin,f.SerializableMixin));(t.default=s).prototype._moduleName="Types/source:HierarchicalMemory",s.prototype["[Types/_source/HierarchicalMemory]"]=true,s.prototype._$adapter=null,s.prototype._$model=null,s.prototype._$listModule=null,s.prototype._$idProperty=null,s.prototype._$parentProperty=null,s.prototype._$data=null,s.prototype._$filter=null,s.prototype["[WS.Data/Source/ICrud]"]=true}(f,e,l,Q,d,c,f,s);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/Rpc"]=true;var Y=function(){var e={},t=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:true});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e["[Types/_source/IRpc]"]=true,e}return r.__extends(e,t),e.prototype.call=function(e,t){var r=this;return this._callProvider(e,t).addCallback(function(e){return r._loadAdditionalDependencies().addCallback(function(){return r._wrapToDataSet(e)})})},Object.defineProperty(e,"NAVIGATION_TYPE",{get:function(){return n.default.NAVIGATION_TYPE},enumerable:true,configurable:true}),e}(n.default);(t.default=o).prototype._moduleName="Types/source:Rpc",o.prototype["[Types/_source/Rpc]"]=true}(f,e,l,G);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),X=Y;e["Types/_source/SbisService"]=true;var Z=function(){var e={},t=function(e,t,r,i,n,s,u,a,p){Object.defineProperty(t,"__esModule",{value:true});var v=Object.assign({POSITION:"Position"},i.default.NAVIGATION_TYPE),o=",",c=/^[0-9]+,[А-яA-z0-9]+$/;function d(e){if((e=String(e||"")).match(c))return e.split(o)[0];return e}function l(e,t){if((e=String(e||"")).match(c))return e.split(o)[1];return t}function f(e,t){if((e=String(e||"")).match(c))return e.split(o,2);return[e,t]}function y(e,t){for(var r={},n,o=0,i=e.length;o<i;o++)r[n=l(e[o],t)]=r[n]||[],r[n].push(d(e[o]));return r}function _(e,t,r,n){return e._callProvider(e._$endpoint.contract===r?e._$binding.destroy:r+"."+e._$binding.destroy,e._$passing.destroy.call(e,t,n))}function g(e,t){var r;return u.resolve("Types/entity:Record").fromObject(e,t)}function h(e,t,r){if(null===e)return e;if(e&&s.default.isListInstance(e))return e;for(var n,o=new(u.resolve("Types/collection:RecordSet"))({adapter:t,idProperty:r}),i=e.length||0,a=0;a<i;a++)o.add(g(e[a],t));return o}function b(e){if(!e)return null;var t=e.getOrderBy();if(0===t.length)return null;for(var r=[],n,o=0;o<t.length;o++)n=t[o],r.push({n:n.getSelector(),o:n.getOrder(),l:!n.getOrder()});return r}function P(e,t,r){if(!e)return null;var n=e.getOffset(),o=e.getLimit(),i=e.getMeta(),a=t.hasMoreProperty,s=i.hasOwnProperty(a),u=s?i[a]:n>=0,p=0===n,c=void 0===o||null===o;if(s)delete i[a],e.meta(i);var d=null;switch(t.navigationType){case v.PAGE:if(!p||!c)d={"Страница":o>0?Math.floor(n/o):0,"РазмерСтраницы":o,"ЕстьЕще":u};break;case v.POSITION:if(!c){var l=e.getWhere(),f=/(.+)([<>]=|~)$/,y=null,_="",h;Object.keys(l).forEach(function(e){if(h=e.match(f)){if(!y)y={};if(y[h[1]]=l[e],!_)switch(h[2]){case"~":_="both";break;case"<=":_="before"}delete l[e]}}),d={HaveMore:u,Limit:o,Order:_=_||"after",Position:g(y,r)}}break;default:if(!p||!c)d={Offset:n||0,Limit:o,"ЕстьЕще":u}}return d}function m(e){var t=[];if(e){if((t=e.getMeta())&&s.default.isModelInstance(t)){var r={};t.each(function(e,t){r[e]=t}),t=r}if(t instanceof Object){var n=[];for(var o in t)if(t.hasOwnProperty(o))n.push(t[o]);t=n}if(!(t instanceof Array))throw new TypeError("Types/Source/SbisService::getAdditionalParams(): unsupported metadata type: only Array, Types/Entity/Record or Object allowed")}return t}function $(e){if(!s.default.isModelInstance(e))if(!("ВызовИзБраузера"in(e=Object.assign({},e||{}))))e["ВызовИзБраузера"]=true;return{"Фильтр":g(e,this._$adapter),"ИмяМетода":this._$binding.format||null}}function O(e,t){var r={"ИдО":e,"ИмяМетода":this._$binding.format||null};if(t&&Object.keys(t).length)r["ДопПоля"]=t;return r}function T(e,t){var r=i.default.prototype["_$passing"].update.call(this,e,t),n={},o;if(n[s.default.isListInstance(r[0])?"Записи":"Запись"]=r[0],r[1]&&Object.keys(r[1]).length)n["ДопПоля"]=r[1];return n}function M(e,t){var r,n=u.resolve("Types/collection:RecordSet").patch(e);return{changed:n.get("changed"),added:n.get("added"),removed:n.get("removed")}}function w(e,t){var r={"ИдО":e};if(t&&Object.keys(t).length)r["ДопПоля"]=t;return r}function S(e){var t=P(e,this._$options,this._$adapter),r=e?e.getWhere():null,n=b(e),o=m(e);return{"Фильтр":g(r,this._$adapter),"Сортировка":h(n,this._$adapter,this.getIdProperty()),"Навигация":g(t,this._$adapter),"ДопПоля":o}}function I(e,t){var r={"ИдО":e,"ИмяМетода":this._$binding.format};if(t&&Object.keys(t).length)r["ДопПоля"]=t;return r}function x(e,t){return{"ИдО":e,"ИдОУд":t}}function D(e,t,r){return{IndexNumber:this._$orderProperty,HierarchyName:r.parentProperty||null,ObjectName:r.objectName,ObjectId:e,DestinationId:t,Order:r.position,ReadMethod:r.objectName+"."+this._$binding.read,UpdateMethod:r.objectName+"."+this._$binding.update}}function j(e,t,r,n){a.logger.info(e._moduleName,"Move elements through moveAfter and moveBefore methods have been deprecated, please use just move instead.");var o=n.before?e._$binding.moveBefore:e._$binding.moveAfter,i={"ПорядковыйНомер":e._$orderProperty,"Иерархия":n.hierField||null,"Объект":e._$endpoint.moveContract,"ИдО":f(t,e._$endpoint.contract)};return i[n.before?"ИдОДо":"ИдОПосле"]=f(r,e._$endpoint.contract),e._callProvider(e._$endpoint.moveContract+"."+o,i)}t.buildRecord=g,t.buildRecordSet=h,t.getSortingParams=b,t.getPagingParams=P,t.getAdditionalParams=m;var A=function(o){function e(e){var t=o.call(this,e)||this;if(!t._$endpoint.moveContract)t._$endpoint.moveContract="IndexNumber";return t}return r.__extends(e,o),e.prototype.getOrderProperty=function(){return this._$orderProperty},e.prototype.setOrderProperty=function(e){this._$orderProperty=e},e.prototype.create=function(t){var r=this;return t=a.object.clonePlain(t,true),this._loadAdditionalDependencies(function(e){r._connectAdditionalDependencies(o.prototype.create.call(r,t),e)})},e.prototype.update=function(t,r){var n=this;if(this._$binding.updateBatch&&s.default.isListInstance(t))return this._loadAdditionalDependencies(function(e){n._connectAdditionalDependencies(n._callProvider(n._$binding.updateBatch,M(t,r)).addCallback(function(e){return n._prepareUpdateResult(t,e)}),e)});return o.prototype.update.call(this,t,r)},e.prototype.destroy=function(e,t){if(!(e instanceof Array))return _(this,[d(e)],l(e,this._$endpoint.contract),t);var r=y(e,this._$endpoint.contract),n=new p;for(var o in r)if(r.hasOwnProperty(o))n.push(_(this,r[o],o,t));return n.done().getResult()},e.prototype.query=function(t){var r=this;return t=a.object.clonePlain(t,true),this._loadAdditionalDependencies(function(e){r._connectAdditionalDependencies(o.prototype.query.call(r,t),e)})},e.prototype.move=function(e,t,r){if(r=r||{},this._$binding.moveBefore)return j(this,e,t,r);var n=y(e,this._$endpoint.contract),o=Object.keys(n).length,i=new p;if(null!==t)t=d(t);for(var a in n)if(n.hasOwnProperty(a)){r.objectName=a;var s=this._callProvider(this._$binding.move.indexOf(".")>-1?this._$binding.move:this._$endpoint.moveContract+"."+this._$binding.move,this._$passing.move.call(this,n[a],t,r));if(1===o)return s;i.push(s)}return i.done().getResult()},e.prototype.getProvider=function(){if(!this._provider)this._provider=this._createProvider(this._$provider,{endpoint:this._$endpoint,options:this._$options,service:this._$endpoint.address,resource:this._$endpoint.contract});return this._provider},Object.defineProperty(e,"NAVIGATION_TYPE",{get:function(){return v},enumerable:true,configurable:true}),e}(i.default);(t.default=A).prototype["[Types/_source/SbisService]"]=true,A.prototype._moduleName="Types/source:SbisService",A.prototype._$binding={create:"Создать",read:"Прочитать",update:"Записать",updateBatch:"",destroy:"Удалить",query:"Список",copy:"Копировать",merge:"Объединить",move:"Move",format:""},A.prototype._$passing={create:$,read:O,update:T,destroy:w,query:S,copy:I,merge:x,move:D},A.prototype._$adapter="Types/entity:adapter.Sbis",A.prototype._$provider="Types/source:provider.SbisBusinessLogic",A.prototype._$orderProperty="ПорНомер",A.prototype._$options=n.default.addOptions(i.default,{hasMoreProperty:"hasMore"}),A.prototype._additionalDependencies=i.default.prototype._additionalDependencies.slice(),u.register("Types/source:SbisService",A,{instantiate:false})}(f,e,l,Y,B,E,u,c,o);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),ee=Z,te=Z;return e.Base=L.default,e.DataSet=A.default,e.HierarchicalMemory=V.default,e.ICrud=h.default,e.ICrudPlus=g.default,e.IData=P.default,e.IProvider=$.default,e.IRpc=T.default,e.Local=W.default,e.Memory=H.default,e.PrefetchProxy=r.default,e.provider=q,e.Query=x.default,e.Remote=J.default,e.Rpc=X.default,e.SbisService=ee.default,e.QueryExt=D,e.SbisServiceExt=te,e});