define("Types/source",["Browser/Transport","Core/ParallelDeferred","Types/shim","Core/helpers/Number/randomId","Core/Deferred","Types/di","Types/util","Types/entity","tslib","require","exports"],function(n,i,o,a,s,u,c,p,d,l,e){Object.defineProperty(e,"__esModule",{value:true}),e["Types/_source/PrefetchProxy"]=true;var t,r=function(){"use strict";var e={},t=function(e,t,n,i,r,o){Object.defineProperty(t,"__esModule",{value:true});var a=function(r){function e(e){var t=r.call(this,e)||this;if(t._$target=null,t._$data={read:null,query:null,copy:null},t._done={},t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,i.OptionsToPropertyMixin.call(t,e),i.SerializableMixin.constructor.call(t),!t._$target)throw new ReferenceError('Option "target" is required.');return t}return n.__extends(e,r),e.prototype.create=function(e){return this._$target.create(e)},e.prototype.read=function(e,t){if(this._$data.read&&!this._done.read)return this._done.read=true,o.success(this._$data.read);return this._$target.read(e,t)},e.prototype.update=function(e,t){return this._$target.update(e,t)},e.prototype.destroy=function(e,t){return this._$target.destroy(e,t)},e.prototype.query=function(e){if(this._$data.query&&!this._done.query)return this._done.query=true,o.success(this._$data.query);return this._$target.query(e)},e.prototype.merge=function(e,t){return this._$target.merge(e,t)},e.prototype.copy=function(e,t){if(this._$data.copy&&!this._done.copy)return this._done.copy=true,o.success(this._$data.copy);return this._$target.copy(e,t)},e.prototype.move=function(e,t,r){return this._$target.move(e,t,r)},e.prototype.getOptions=function(){return this._$target.getOptions()},e.prototype.setOptions=function(e){return this._$target.setOptions(e)},e.prototype._getSerializableState=function(e){var t=i.SerializableMixin.prototype._getSerializableState.call(this,e);return t._done=this._done,t},e.prototype._setSerializableState=function(e){var t=i.SerializableMixin.prototype._setSerializableState(e);return function(){t.call(this),this._done=e._done}},e}(r.mixin(i.DestroyableMixin,i.OptionsToPropertyMixin,i.SerializableMixin));(t.default=a).prototype._moduleName="Types/source:PrefetchProxy",a.prototype["[Types/_source/PrefetchProxy]"]=true}(l,e,d,p,c,s);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/EndpointMixin"]=true;var f=function(){"use strict";var e={},t=function(e,t,r){Object.defineProperty(t,"__esModule",{value:true});var n={"[Types/_source/EndpointMixin]":true,_$endpoint:null,constructor:function(e){if(this._$endpoint=this._$endpoint||{},e){if("string"===typeof e.endpoint)e.endpoint={contract:e.endpoint};if(e.endpoint instanceof Object)e.endpoint=r.__assign({},this._$endpoint,e.endpoint)}},getEndpoint:function(){return r.__assign({},this._$endpoint)}};t.default=n}(l,e,d);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/ICrud"]=true;var _,y=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/ICrudPlus"]=true;var h,v=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/IData"]=true;var g,b=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/IProvider"]=true;var P,m=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/IRpc"]=true;var $,O=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/provider/SbisBusinessLogic"]=true;var T=function(){"use strict";var e={},t=function(e,t,n,i,r,o,a){Object.defineProperty(t,"__esModule",{value:true});var s=function(r){function e(e){var t=r.call(this)||this;return t["[Types/_source/provider/IAbstract]"]=true,t._$endpoint={},i.OptionsToPropertyMixin.call(t,e),t}return n.__extends(e,r),e.prototype.getEndpoint=function(){return this._$endpoint},e.prototype.call=function(e,t){e+="",t=t||{};var r=this._$transport,n=this.getEndpoint(),i;if(!(e.indexOf(".")>-1)&&n.contract)e=n.contract+this._nameSpaceSeparator+e;return new r({serviceUrl:n.address}).callMethod(e,t)},e}(o.mixin(Object,i.OptionsToPropertyMixin));(t.default=s).prototype["[Types/_source/provider/SbisBusinessLogic]"]=true,s.prototype._$transport=a.RPCJSON,s.prototype._nameSpaceSeparator=".",r.register("Types/source:provider.SbisBusinessLogic",s,{instantiate:false})}(l,e,d,p,u,c,n);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/provider/INotify"]=true;var M=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/BindingMixin"]=true;var w=function(){"use strict";var e={},t=function(e,t,r){Object.defineProperty(t,"__esModule",{value:true});var n={"[Types/_source/BindingMixin]":true,_$binding:{create:"create",read:"read",update:"update",destroy:"delete",query:"query",copy:"copy",merge:"merge",move:"move"},constructor:function(e){if(e&&e.binding instanceof Object)e.binding=r.__assign({},this._$binding,e.binding)},getBinding:function(){return r.__assign({},this._$binding)},setBinding:function(e){this._$binding=e}};t.default=n}(l,e,d);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/Query"]=true;var x=function(){"use strict";var e={},t=function(e,t,o,a,r){var n,i;function s(e){if(e["[Types/_entity/ICloneable]"])return e.clone();if(e&&"object"===typeof e)return o.__assign({},e);return e}function u(e){if("string"===typeof e)e=e.split(/[ ,]/);if(e instanceof Array){var t=e;e={};for(var r=0;r<t.length;r++)e[t[r]]=t[r]}if("object"!==typeof e)throw new TypeError('Invalid argument "expression"');return e}Object.defineProperty(t,"__esModule",{value:true}),(i=n=t.ExpandMode||(t.ExpandMode={}))[i["None"]=0]="None",i[i["Nodes"]=1]="Nodes",i[i["Leaves"]=2]="Leaves",i[i["All"]=3]="All";var c=function(r){function e(e){var t=r.call(this)||this;return t._$resource="",t._$as="",t._$on={},t._$select={},t._$inner=true,a.OptionsToPropertyMixin.call(t,e),t}return o.__extends(e,r),e.prototype.getResource=function(){return this._$resource},e.prototype.getAs=function(){return this._$as},e.prototype.getOn=function(){return this._$on},e.prototype.getSelect=function(){return this._$select},e.prototype.isInner=function(){return this._$inner},e}(r.mixin(Object,a.OptionsToPropertyMixin));t.Join=c;var p=function(n){function i(e){var t=n.call(this)||this;t._$selector="",t._$order=false,a.OptionsToPropertyMixin.call(t,e);var r=t._$order;if("string"===typeof r)r=r.toUpperCase();switch(r){case i.SORT_DESC:case i.SORT_DESC_STR:t._$order=i.SORT_DESC;break;default:t._$order=i.SORT_ASC}return t}return o.__extends(i,n),i.prototype.getSelector=function(){return this._$selector},i.prototype.getOrder=function(){return this._$order},Object.defineProperty(i,"SORT_ASC",{get:function(){return false},enumerable:true,configurable:true}),Object.defineProperty(i,"SORT_DESC",{get:function(){return true},enumerable:true,configurable:true}),Object.defineProperty(i,"SORT_ASC_STR",{get:function(){return"ASC"},enumerable:true,configurable:true}),Object.defineProperty(i,"SORT_DESC_STR",{get:function(){return"DESC"},enumerable:true,configurable:true}),i}(r.mixin(Object,a.OptionsToPropertyMixin));t.Order=p;var d=function(r){function t(e){var t=r.call(this)||this;return t._select={},t._from="",t._as="",t._join=[],t._where={},t._groupBy=[],t._orderBy=[],t._offset=0,t._limit=void 0,t._meta={},t["[Types/_entity/ICloneable]"]=true,a.OptionsToPropertyMixin.call(t,e),t}return o.__extends(t,r),t.prototype.clone=function(){var e=new t;return e._select=s(this._select),e._from=this._from,e._as=this._as,e._join=this._join.slice(),e._where=s(this._where),e._groupBy=this._groupBy.slice(),e._orderBy=this._orderBy.slice(),e._offset=this._offset,e._limit=this._limit,e._meta=s(this._meta),e},t.prototype.clear=function(){return this._select={},this._from="",this._as="",this._join=[],this._where={},this._groupBy=[],this._orderBy=[],this._offset=0,this._limit=void 0,this._meta={},this},t.prototype.getSelect=function(){return this._select},t.prototype.select=function(e){return this._select=u(e),this},t.prototype.getFrom=function(){return this._from},t.prototype.getAs=function(){return this._as},t.prototype.from=function(e,t){return this._from=e,this._as=t,this},t.prototype.getJoin=function(){return this._join},t.prototype.join=function(e,t,r,n){if("string"===typeof e)e=e.split(" ");if(!(e instanceof Array))throw new Error('Invalid argument "resource"');return this._join.push(new c({resource:e.shift(),as:e.shift()||"",on:t,select:u(r),inner:void 0===n?true:n})),this},t.prototype.getWhere=function(){return this._where},t.prototype.where=function(e){var t=typeof(e=e||{});if("object"!==t&&"function"!==t)throw new TypeError('Invalid argument "expression"');return this._where=e,this},t.prototype.getOrderBy=function(){return this._orderBy},t.prototype.orderBy=function(e,t){var r=this;if(void 0===t)t=true;if(this._orderBy=[],"object"===typeof e){var n=function(e){if(!e)return;for(var t in e)if(e.hasOwnProperty(t))r._orderBy.push(new p({selector:t,order:e[t]}))};if(e instanceof Array)for(var i=0;i<e.length;i++)n(e[i]);else n(e)}else if(e)this._orderBy.push(new p({selector:e,order:t}));return this},t.prototype.getGroupBy=function(){return this._groupBy},t.prototype.groupBy=function(e){if("string"===typeof e)e=[e];if(!(e instanceof Array))throw new Error("Invalid argument");return this._groupBy=e,this},t.prototype.getOffset=function(){return this._offset},t.prototype.offset=function(e){return this._offset=parseInt(e,10)||0,this},t.prototype.getLimit=function(){return this._limit},t.prototype.limit=function(e){return this._limit=e,this},t.prototype.getMeta=function(){return this._meta},t.prototype.meta=function(e){if("object"!==typeof(e=e||{}))throw new TypeError('Invalid argument "data"');return this._meta=e,this},t}(r.mixin(Object,a.OptionsToPropertyMixin));(t.default=d).prototype._moduleName="Types/source:Query",d.prototype["[Types/_source/Query]"]=true}(l,e,d,p,c);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),S=x,I=x;e["Types/_source/DataSet"]=true;var D,A=function(){"use strict";var e={},t=function(e,t,o,n,i,r){Object.defineProperty(t,"__esModule",{value:true});var a=function(r){function e(e){var t=r.call(this)||this;return n.OptionsToPropertyMixin.call(t,e),n.SerializableMixin.constructor.call(t),t}return o.__extends(e,r),Object.defineProperty(e.prototype,"writable",{get:function(){return this._$writable},set:function(e){this._$writable=!!e},enumerable:true,configurable:true}),e.prototype.getAdapter=function(){if("string"===typeof this._$adapter)this._$adapter=i.create(this._$adapter);return this._$adapter},e.prototype.getModel=function(){return this._$model},e.prototype.setModel=function(e){this._$model=e},e.prototype.getListModule=function(){return this._$listModule},e.prototype.setListModule=function(e){this._$listModule=e},e.prototype.getIdProperty=function(){return this._$idProperty},e.prototype.setIdProperty=function(e){this._$idProperty=e},e.prototype.getItemsProperty=function(){return this._$itemsProperty},e.prototype.setItemsProperty=function(e){this._$itemsProperty=e},e.prototype.getAll=function(e){if(this._checkAdapter(),void 0===e)e=this._$itemsProperty;var t=this._getListInstance(this._getDataProperty(e));if(this._$metaProperty&&t.getMetaData instanceof Function){var r=t.getMetaData(),n=this.getMetaData(),i=Object.keys(n).length>0;if(!i&&this._$rawData&&this._$rawData.total)n={total:this._$rawData.total},i=true;if(i){if(!(r=o.__assign({},r||{},n)).hasOwnProperty("more")&&n.hasOwnProperty("total"))r.more=n.total;t.setMetaData(r)}}return t},e.prototype.getRow=function(e){if(this._checkAdapter(),void 0===e)e=this._$itemsProperty;var t=this._getDataProperty(e),r;if("recordset"===this.getAdapter().getProperty(t,"_type")){var n=this.getAdapter().forTable(t);if(n.getCount()>0)return this._getModelInstance(n.at(0))}else return this._getModelInstance(t);return},e.prototype.getScalar=function(e){if(void 0===e)e=this._$itemsProperty;return this._getDataProperty(e)},e.prototype.getMetaProperty=function(){return this._$metaProperty},e.prototype.getMetaData=function(){return this._$metaProperty&&this._getDataProperty(this._$metaProperty)||{}},e.prototype.hasProperty=function(e){return e?void 0!==this._getDataProperty(e):false},e.prototype.getProperty=function(e){return this._getDataProperty(e)},e.prototype.getRawData=function(){return this._$rawData},e.prototype.setRawData=function(e){this._$rawData=e},e.prototype._getDataProperty=function(e){return this._checkAdapter(),e?this.getAdapter().getProperty(this._$rawData,e):this._$rawData},e.prototype._getModelInstance=function(e){if(!this._$model)throw new Error("Model is not defined");return i.create(this._$model,{writable:this._$writable,rawData:e,adapter:this._$adapter,idProperty:this._$idProperty})},e.prototype._getListInstance=function(e){return i.create(this._$listModule,{writable:this._$writable,rawData:e,adapter:this._$adapter,model:this._$model,idProperty:this._$idProperty})},e.prototype._checkAdapter=function(){if(!this.getAdapter())throw new Error("Adapter is not defined")},e}(r.mixin(n.DestroyableMixin,n.OptionsToPropertyMixin,n.SerializableMixin));t.default=a,Object.assign(a.prototype,{"[Types/_source/DataSet]":true,_moduleName:"Types/source:DataSet",_$adapter:"Types/entity:adapter.Json",_$rawData:null,_$model:"Types/entity:Model",_$listModule:"Types/collection:RecordSet",_$idProperty:"",_$itemsProperty:"",_$metaProperty:"",_$writable:true}),i.register("Types/source:DataSet",a,{instantiate:false})}(l,e,d,p,u,c);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/provider/IChannel"]=true;var R=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/provider/IAbstract"]=true;var j=function(){"use strict";var e={},t=(r=l,n=e,void Object.defineProperty(n,"__esModule",{value:true})),r,n;if(t instanceof Function)return t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}();e["Types/_source/OptionsMixin"]=true;var C=function(){"use strict";var e={},t=function(e,t,r){Object.defineProperty(t,"__esModule",{value:true});var n={"[Types/_source/OptionsMixin]":true,_$options:{debug:false},constructor:function(e){if(e&&e.options instanceof Object)this._$options=r.__assign({},this._$options||{},e.options),delete e.options},getOptions:function(){return r.__assign({},this._$options)},setOptions:function(e){this._$options=r.__assign({},this._$options,e||{})},addOptions:function(e,t){return r.__assign({},e.prototype._$options,t)}};t.default=n}(l,e,d);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/LazyMixin"]=true;var B=function(){"use strict";var e={},t=function(o,e,a){Object.defineProperty(e,"__esModule",{value:true});var t,s=(0,eval)("this").DeferredCanceledError,r={"[Types/_source/LazyMixin]":true,_additionalDependencies:["Types/source","Types/entity","Types/collection"],_loadAdditionalDependencies:function(e){var t=this,r=this._additionalDependencies,n=r.reduce(function(e,t){return e&&o.defined(t)},true),i=new a;if(n)if(e)e.call(this,i);else i.callback();else o(r,function(){if(e&&(!i.isReady()||!(i.getResult()instanceof s)))e.call(t,i);else i.callback()},function(e){return i.errback(e)});return i},_connectAdditionalDependencies:function(t,r){if(!r.isCallbacksLocked())r.addErrback(function(e){if(e instanceof s)t.cancel();return e});t.addCallbacks(function(e){return r.callback(e),e},function(e){return r.errback(e),e})}};e.default=r}(l,e,s);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/DataMixin"]=true;var k=function(){"use strict";var e={},t=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:true});var o={"[Types/_source/DataMixin]":true,_$adapter:"Types/entity:adapter.Json",_$model:"Types/entity:Model",_$listModule:"Types/collection:RecordSet",_$idProperty:"",_dataSetModule:"Types/source:DataSet",_dataSetItemsProperty:"",_dataSetMetaProperty:"",_writable:n.ReadWriteMixin.writable,constructor:function(e){if((e=e||{}).dataSetMetaProperty)this._dataSetMetaProperty=e.dataSetMetaProperty},getAdapter:function(){if("string"===typeof this._$adapter)this._$adapter=i.create(this._$adapter);return this._$adapter},getModel:function(){return this._$model},setModel:function(e){this._$model=e},getListModule:function(){return this._$listModule},setListModule:function(e){this._$listModule=e},getIdProperty:function(){return this._$idProperty},setIdProperty:function(e){this._$idProperty=e},_getIdPropertyByData:function(e){return this.getAdapter().getKeyField(e)||""},_getModelInstance:function(e){return i.create(this._$model,{writable:this._writable,rawData:e,adapter:this.getAdapter(),idProperty:this.getIdProperty()})},_getDataSetInstance:function(e){return i.create(this._dataSetModule,r.__assign({writable:this._writable,adapter:this.getAdapter(),model:this.getModel(),listModule:this.getListModule(),idProperty:this.getIdProperty()||this._getIdPropertyByData(e.rawData||null)},e))},_wrapToDataSet:function(e){return this._getDataSetInstance({rawData:e,itemsProperty:this._dataSetItemsProperty,metaProperty:this._dataSetMetaProperty})},_each:function(e,t,r){for(var n=this.getAdapter().forTable(e),i=0,o=n.getCount();i<o;i++)t.call(r||this,n.at(i),i)},isModelInstance:function(e){return e&&e["[Types/_entity/IObject]"]&&e["[Types/_entity/FormattableMixin]"]},isListInstance:function(e){return e&&e["[Types/_collection/IList]"]&&e["[Types/_entity/FormattableMixin]"]}};t.default=o}(l,e,d,p,u);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/DataCrudMixin"]=true;var E=function(){"use strict";var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r={"[Types/_source/DataCrudMixin]":true,_prepareCreateResult:function(e){return this._getModelInstance(e)},_prepareReadResult:function(e){return this._getModelInstance(e)},_prepareUpdateResult:function(e,r){var n=this.getIdProperty(),i=function(e,t){if(t&&n&&!e.get(n))e.set(n,t);e.acceptChanges()};if(e&&e["[Types/_collection/IList]"])e.each(function(e,t){i(e,r?r[t]:void 0)});else i(e,r);return r},_prepareQueryResult:function(e){return this._wrapToDataSet(e)}};t.default=r}(l,e);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/Base"]=true;var F=function(){"use strict";var e={},t=function(n,e,i,o,t,a,s,u){Object.defineProperty(e,"__esModule",{value:true});var r=function(r){function e(e){var t=this;return e=i.__assign({},e||{}),t=r.call(this,e)||this,o.default.constructor.call(t,e),s.OptionsToPropertyMixin.call(t,e),s.SerializableMixin.constructor.call(t),a.default.constructor.call(t,e),t}return i.__extends(e,r),e.extend=function(e,t){if(u.logger.info("Types/_source/Base","Method extend is deprecated, use ES6 extends or Core/core-extend"),!n.defined("Core/core-extend"))throw new ReferenceError('You should require module "Core/core-extend" to use old-fashioned "Types/_source/Base::extend()" method.');var r;return n("Core/core-extend")(this,e,t)},e}(u.mixin(s.DestroyableMixin,s.OptionsToPropertyMixin,s.SerializableMixin,o.default,t.default,a.default));e.default=r,Object.assign(r.prototype,{"[Types/_source/Base]":true,"[Types/_source/IData]":true,_moduleName:"Types/source:Base"})}(l,e,d,C,B,k,p,c);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),N=F;e["Types/_source/provider"]=true;var L,z=function(){"use strict";var e={},t=(r=l,n=e,i=j,o=R,a=M,s=T,Object.defineProperty(n,"__esModule",{value:true}),n.IAbstract=i.default,n.IChannel=o.default,n.INotify=a.default,void(n.SbisBusinessLogic=s.default)),r,n,i,o,a,s;if(t instanceof Function)return t;else for(var u in t)if(t.hasOwnProperty(u))e[u]=t[u];return e}();e["Types/_source/Local"]=true;var q=function(){"use strict";var e={},t=function(e,t,n,r,i,o,a,c,s){Object.defineProperty(t,"__esModule",{value:true});var p="on",u="before",d="after";function l(e,t,r){if(t instanceof Array){for(var n=0;n<t.length;n++)if(l(e,t[n],r))return true;return false}if(e instanceof Array){for(var n=0;n<e.length;n++)if(!l(e[n],t,r))return false;return true}return e==t}var f=function(r){function e(e){var t=r.call(this,e)||this;return t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,t._reIndex(),t}return n.__extends(e,r),Object.defineProperty(e.prototype,"data",{get:function(){return this._getTableAdapter().getData()},enumerable:true,configurable:true}),e.prototype.create=function(e){var t=this;return e=a.object.clonePlain(e,true),this._loadAdditionalDependencies().addCallback(function(){return t._prepareCreateResult(e)})},e.prototype.read=function(e,t){var r=this,n=this._getRecordByKey(e);if(n)return this._loadAdditionalDependencies().addCallback(function(){return r._prepareReadResult(n)});else return c.fail('Record with key "'+e+'" does not exist')},e.prototype.update=function(e,t){var o=this,r=function(e){var t=o.getIdProperty(),r=t?e.get(t):void 0;if(void 0===r)r=s("k"),e.set(t,r);var n=o._getTableAdapter(),i=o._getIndexByKey(r);if(-1===i){if(n.add(e.getRawData()),o._index)o._index[r]=n.getCount()-1}else n.replace(e.getRawData(),i);return r},n=[];if(i.default.isListInstance(e))e.each(function(e){n.push(r(e))});else n=r(e);return this._loadAdditionalDependencies().addCallback(function(){return o._prepareUpdateResult(e,n)})},e.prototype.destroy=function(e,t){var r=this,n=function(e){var t=r._getIndexByKey(e);if(-1!==t)return r._getTableAdapter().remove(t),r._reIndex(),true;else return false};if(!(e instanceof Array))e=[e];for(var i=0,o=e.length;i<o;i++)if(!n(e[i]))return c.fail('Record with key "'+e[i]+'" does not exist');return c.success(true)},e.prototype.query=function(e){var t=this,r=this._applyFrom(e?e.getFrom():void 0),n=this.getAdapter(),i;if(e)r=this._applyJoin(r,e.getJoin()),r=this._applyWhere(r,e.getWhere(),e.getMeta()),r=this._applyOrderBy(r,e.getOrderBy()),i=n.forTable(r).getCount(),r=this._applyPaging(r,e.getOffset(),e.getLimit());else if(this._$filter)r=this._applyWhere(r);else i=n.forTable(r).getCount();return this._loadAdditionalDependencies().addCallback(function(){return t._prepareQueryResult({items:r,meta:{total:i}},e)})},e.prototype.merge=function(e,t){var r=this._getIndexByKey(e),n=this._getIndexByKey(t);if(-1===r||-1===n)return c.fail('Record with key "'+e+'" or "'+t+'" does not exist');else return this._getTableAdapter().merge(r,n,this.getIdProperty()),this._reIndex(),c.success(true)},e.prototype.copy=function(e,t){var r=this,n=this._getIndexByKey(e);if(-1===n)return c.fail('Record with key "'+e+'" does not exist');else{var i=this._getTableAdapter().copy(n);return this._reIndex(),this._loadAdditionalDependencies().addCallback(function(){return r._prepareReadResult(i)})}},e.prototype.move=function(e,t,i){var o=this;i=i||{};var r=[];if(!(e instanceof Array))e=[e];var n=this._getTableAdapter(),a=this.getAdapter();e.sort(function(e,t){var r=o._getIndexByKey(e),n=o._getIndexByKey(t);return i.position===d?n-r:r-n}).forEach(function(e){var t=o._getIndexByKey(e);r.push(a.forRecord(n.at(t)))});var s=-1,u=null;if(null!==t)if(s=this._getIndexByKey(t),u=a.forRecord(n.at(s)),-1===s)return c.fail("Can't find target position");if(i.position===p)return this._hierarchyMove(r,u,i);return this._reorderMove(r,u,i)},e.prototype._wrapToDataSet=function(e){return r.prototype._wrapToDataSet.call(this,a.object.clonePlain(e,true))},e.prototype._prepareCreateResult=function(e){return o.default._prepareCreateResult.call(this,a.object.clonePlain(e,true))},e.prototype._prepareReadResult=function(e){return o.default._prepareReadResult.call(this,a.object.clonePlain(e,true))},e.prototype._getRecordByKey=function(e){return this._getTableAdapter().at(this._getIndexByKey(e))},e.prototype._getIndexByKey=function(e){var t=this._index[e];return void 0===t?-1:t},e.prototype._reIndex=function(){var n=this;this._index={};var i=this.getAdapter();this._each(this.data,function(e,t){var r=i.forRecord(e).get(n._$idProperty);n._index[r]=t})},e.prototype._applyWhere=function(e,n,t){var i=this;if(n=n||{},!this._$filter&&"object"===typeof n&&!Object.keys(n).length)return e;var o=function(e,t){var r=true;for(var n in e){if(!e.hasOwnProperty(n))continue;if(!(r=l(t.get(n),e[n],"=")))break}return r},a=this.getAdapter(),s=a.forTable(),u="function"===typeof n;return this._each(e,function(e,t){e=a.forRecord(e);var r=true;if(i._$filter)r=i._$filter(e,n);else r=u?n(e,t):o(n,e);if(r)s.add(e.getData())}),s.getData()},e.prototype._applyOrderBy=function(e,t){if(!(t=t||[]).length)return e;for(var o=[],r=0;r<t.length;r++)o.push({field:t[r].getSelector(),order:t[r].getOrder()});var a=this.getAdapter(),s=[];this._each(e,function(e,t){for(var r,n=[],i=0;i<o.length;i++)r=a.forRecord(e).get(o[i].field),n.push(void 0===r?null:r);s.push({index:t,values:n})});var i=function(e,t){if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;if(e==t)return 0;return e>t?1:-1};s.sort(function(e,t){for(var r=0,n=0;n<o.length;n++)if(0!==(r=(o[n].order?-1:1)*i(e.values[n],t.values[n])))break;return r});for(var n=a.forTable(e),u=a.forTable(),r=0,c=s.length;r<c;r++)u.add(n.at(s[r].index));return u.getData()},e.prototype._applyPaging=function(e,t,r){if(0===(t=t||0)&&void 0===r)return e;var n=this.getAdapter().forTable(e);if(void 0===r)r=n.getCount();else r=r||0;for(var i=this.getAdapter().forTable(),o=0,a=t,s=Math.min(n.getCount(),a+r),u=a;u<s;u++,o++)i.add(n.at(u));return i.getData()},e.prototype._reorderMove=function(e,t,n){var i=this,o;if(n.parentProperty)o=t.get(n.parentProperty);if(!n.position&&n.hasOwnProperty("before"))n.position=n.before?u:d;var a=this._getTableAdapter(),s=t.get(this._$idProperty);return e.forEach(function(e){if(n.parentProperty)e.set(n.parentProperty,o);var t=i._getIndexByKey(e.get(i._$idProperty)),r=i._getIndexByKey(s);if(n.position===u&&r>t)r--;else if(n.position===d&&r<t)r++;a.move(t,r),i._reIndex()}),(new c).callback()},e.prototype._hierarchyMove=function(e,t,r){if(!r.parentProperty)return c.fail("Parent property is not defined");var n=t?t.get(this._$idProperty):null;return e.forEach(function(e){e.set(r.parentProperty,n)}),(new c).callback()},e}(a.mixin(r.default,o.default));t.default=f,Object.assign(f.prototype,{"[Types/_source/Local]":true,_moduleName:"Types/source:Local",_$filter:null,_index:null})}(l,e,d,F,k,E,c,s,a);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),K=q;e["Types/_source/Remote"]=true;var Q=function(){"use strict";var e={},t=function(u,e,t,r,c,n,i,o,a,s,p,d){Object.defineProperty(e,"__esModule",{value:true});var l,f=(0,eval)("this").DeferredCanceledError,_={PAGE:"Page",OFFSET:"Offset"};function y(e){return null===e||void 0===e}function h(e){return""===e||y(e)}function v(e){return[e]}function g(e,t){return[e,t]}function b(e,t){if(this._$options.updateOnlyChanged){var r=this._getValidIdProperty(e);if(!h(r))if(c.default.isModelInstance(e)&&!y(e.get(r))){var n=u("Types/entity").Record,i=e.getChanged();i.unshift(r),e=n.filterFields(e,i)}else if(c.default.isListInstance(e))o=e,s=new(0,u("Types/collection").RecordSet)({adapter:o._$adapter,idProperty:o._$idProperty}),o.each(function(e){if(y(e.get(r))||e.isChanged())s.add(e)}),e=s}var o,a,s;return[e,t]}function P(e,t){return[e,t]}function m(e){return[e]}function $(e,t){return[e,t]}function O(e,t){return[e,t]}function T(e,t,r){return[e,t,r]}var M=function(r){function e(e){var t=this;return t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,t["[Types/_source/IProvider]"]=true,i.default.constructor.call(t,e),o.default.constructor.call(t,e),t=r.call(this,e)||this,s.ObservableMixin.call(t,e),t._publish("onBeforeProviderCall"),t}return t.__extends(e,r),e.prototype.create=function(e){var t=this;return this._callProvider(this._$binding.create,this._$passing.create.call(this,e)).addCallback(function(e){return t._loadAdditionalDependencies().addCallback(function(){return t._prepareCreateResult(e)})})},e.prototype.read=function(e,t){var r=this;return this._callProvider(this._$binding.read,this._$passing.read.call(this,e,t)).addCallback(function(e){return r._loadAdditionalDependencies().addCallback(function(){return r._prepareReadResult(e)})})},e.prototype.update=function(t,e){var r=this;return this._callProvider(this._$binding.update,this._$passing.update.call(this,t,e)).addCallback(function(e){return r._prepareUpdateResult(t,e)})},e.prototype.destroy=function(e,t){return this._callProvider(this._$binding.destroy,this._$passing.destroy.call(this,e,t))},e.prototype.query=function(e){var t=this;return this._callProvider(this._$binding.query,this._$passing.query.call(this,e)).addCallback(function(e){return t._loadAdditionalDependencies().addCallback(function(){return t._prepareQueryResult(e)})})},e.prototype.merge=function(e,t){return this._callProvider(this._$binding.merge,this._$passing.merge.call(this,e,t))},e.prototype.copy=function(e,t){var r=this;return this._callProvider(this._$binding.copy,this._$passing.copy.call(this,e,t)).addCallback(function(e){return r._prepareReadResult(e)})},e.prototype.move=function(e,t,r){return this._callProvider(this._$binding.move,this._$passing.move.call(this,e,t,r))},e.prototype.getEndpoint=function(){return o.default.getEndpoint.call(this)},e.prototype.getProvider=function(){if(!this._provider)this._provider=this._createProvider(this._$provider,{endpoint:this._$endpoint,options:this._$options});return this._provider},e.prototype._createProvider=function(e,t){if(!e)throw new Error("Remote access provider is not defined");if("string"===typeof e)e=p.create(e,t);return e},e.prototype._callProvider=function(t,e){var r=this,n=this.getProvider(),i=this._notify("onBeforeProviderCall",t,e);if(void 0!==i)e=i;var o=n.call(t,this._prepareProviderArguments(e));if(this._$options.debug)o.addErrback(function(e){if(e instanceof f)d.logger.info(r._moduleName,'calling of remote service "'+t+'" has been cancelled.');else d.logger.error(r._moduleName,'remote service "'+t+'" throws an error "'+e.message+'".');return e});return o},e.prototype._prepareProviderArguments=function(e){return this.getAdapter().serialize(e)},e.prototype._getValidIdProperty=function(e){var t=this.getIdProperty();if(!h(t))return t;if("function"===typeof e.getIdProperty)return e.getIdProperty();return t},Object.defineProperty(e,"NAVIGATION_TYPE",{get:function(){return _},enumerable:true,configurable:true}),e}(d.mixin(r.default,s.ObservableMixin,n.default,i.default,o.default));e.default=M,Object.assign(M.prototype,{"[Types/_source/Remote]":true,_moduleName:"Types/source:Remote",_provider:null,_$provider:null,_$passing:{create:v,read:g,update:b,destroy:P,query:m,copy:$,merge:O,move:T},_$options:a.default.addOptions(r.default,{updateOnlyChanged:false,navigationType:_.PAGE})}),M.prototype._prepareArgumentsForCall=M.prototype._prepareProviderArguments}(l,e,d,F,k,E,w,f,C,p,u,c);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),W=Q;e["Types/_source/Memory"]=true;var J=function(){"use strict";var e={},t=function(e,t,i,r,n,o,a){Object.defineProperty(t,"__esModule",{value:true});var s=o.protect("cachedAdapter"),u={},c=function(n){function e(e){var t=n.call(this,e)||this;if(e&&e.endpoint&&e.endpoint.contract&&!u.hasOwnProperty(e.endpoint.contract))u[e.endpoint.contract]=t._$data;return t}return i.__extends(e,n),e.prototype._prepareQueryResult=function(e,t){if(e&&void 0===e.items)e.items=this._getEmptyData(t);return n.prototype._prepareQueryResult.call(this,e)},e.prototype._getTableAdapter=function(){return this[s]||(this[s]=this.getAdapter().forTable(this._$data))},e.prototype._applyFrom=function(e){return e?u[e]:this.data},e.prototype._applyJoin=function(e,t){if(t.length)throw new Error("Joins are not supported");return e},e.prototype._applyWhere=function(e,t,r){if(t&&"object"===typeof t)delete(t=i.__assign({},t)).Разворот,delete t.ВидДерева,delete t.usePages;return n.prototype._applyWhere.call(this,e,t,r)},e.prototype._getEmptyData=function(e){this._emptyData=this._emptyData||new a.Map;var t=e?e.getFrom():void 0;if(!this._emptyData.has(t)){var r=o.object.clonePlain(this._applyFrom(t),true),n=this.getAdapter().forTable(r);n.clear(),this._emptyData.set(t,n.getData())}return this._emptyData.get(t)},e}(r.default);t.default=c,Object.assign(c.prototype,{"[Types/_source/Memory]":true,_moduleName:"Types/source:Memory",_$data:null,_dataSetItemsProperty:"items",_dataSetMetaProperty:"meta",_emptyData:null}),n.register("Types/source:Memory",c,{instantiate:false})}(l,e,d,q,u,c,o);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),H=J;e["Types/_source/HierarchicalMemory"]=true;var G,U=function(){"use strict";var e={},t=function(t,e,n,i,f,r,o){Object.defineProperty(e,"__esModule",{value:true});var a=function(r){function e(e){var t=r.call(this)||this;return t["[Types/_source/ICrud]"]=true,t["[Types/_source/ICrudPlus]"]=true,f.OptionsToPropertyMixin.call(t,e),f.SerializableMixin.constructor.call(t),t._source=new i.default(e),t}return n.__extends(e,r),Object.defineProperty(e.prototype,"_idProperty",{get:function(){return this._source.getIdProperty()},enumerable:true,configurable:true}),e.prototype.create=function(e){return this._source.create(e)},e.prototype.read=function(e,t){return this._source.read(e,t)},e.prototype.update=function(e,t){return this._source.update(e,t)},e.prototype.destroy=function(e,t){return this._source.destroy(e,t)},e.prototype.query=function(p){var d=this,l=new o;return t(["Types/collection"],function(c){d._source.query(p).addCallbacks(function(e){if(d._$parentProperty){var t=new f.relation.Hierarchy({idProperty:d._idProperty,parentProperty:d._$parentProperty}),r=new c.RecordSet({rawData:d._source.data,adapter:d._source.getAdapter(),idProperty:d._idProperty}),n=new c.RecordSet({adapter:d._source.getAdapter(),idProperty:d._idProperty}),i=p.getWhere()[d._$parentProperty],o=r.getRecordById(i);if(o){n.add(o,0);var a=void 0;while(o&&(a=t.getParent(o,r)))n.add(a,0),o=a.get(d._idProperty)}var s=e.getRawData(true);if(s){var u=s.meta||{};u.path=n,s.meta=u,e.setRawData(s)}}l.callback(e)},function(e){l.errback(e)})},function(e){l.errback(e)}),l},e.prototype.merge=function(e,t){return this._source.merge(e,t)},e.prototype.copy=function(e,t){return this._source.copy(e,t)},e.prototype.move=function(e,t,r){return this._source.move(e,t,r)},e.prototype._getSerializableState=function(e){var t=f.SerializableMixin.prototype._getSerializableState.call(this,e);return t._source=this._source,t},e.prototype._setSerializableState=function(e){var t=f.SerializableMixin.prototype._setSerializableState(e);return function(){t.call(this),this._source=e._source}},e}(r.mixin(f.DestroyableMixin,f.OptionsToPropertyMixin,f.SerializableMixin));e.default=a,Object.assign(a.prototype,{"[Types/_source/HierarchicalMemory]":true,_moduleName:"Types/source:HierarchicalMemory",_$parentProperty:null}),a.prototype["[WS.Data/Source/ICrud]"]=true}(l,e,d,J,p,c,s);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}();e["Types/_source/Rpc"]=true;var V=function(){"use strict";var e={},t=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:true});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e["[Types/_source/IRpc]"]=true,e}return r.__extends(e,t),e.prototype.call=function(e,t){var r=this;return this._callProvider(e,t).addCallback(function(e){return r._loadAdditionalDependencies().addCallback(function(){return r._wrapToDataSet(e)})})},e}(n.default);(t.default=i).prototype._moduleName="Types/source:Rpc",i.prototype["[Types/_source/Rpc]"]=true}(l,e,d,Q);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),Y=V;e["Types/_source/SbisService"]=true;var X=function(){"use strict";var e={},t=function(e,t,r,o,n,s,i,u,a,c){Object.defineProperty(t,"__esModule",{value:true});var v=r.__assign({},o.default.NAVIGATION_TYPE,{POSITION:"Position"}),p=",",d=/^[0-9]+,[А-яA-z0-9]+$/;function l(e){if((e=String(e||"")).match(d))return e.split(p)[0];return e}function f(e,t){if((e=String(e||"")).match(d))return e.split(p)[1];return t}function _(e,t){if((e=String(e||"")).match(d))return e.split(p,2);return[e,t]}function y(e,t){for(var r={},n,i=0,o=e.length;i<o;i++)r[n=f(e[i],t)]=r[n]||[],r[n].push(l(e[i]));return r}function h(e,t,r,n){return e._callProvider(e._$endpoint.contract===r?e._$binding.destroy:r+"."+e._$binding.destroy,e._$passing.destroy.call(e,t,n))}function g(e,t){var r;return u.resolve("Types/entity:Record").fromObject(e,t)}function b(e,t,r){if(null===e)return e;if(e&&s.default.isListInstance(e))return e;for(var n,i=new(u.resolve("Types/collection:RecordSet"))({adapter:t,idProperty:r}),o=e.length||0,a=0;a<o;a++)i.add(g(e[a],t));return i}function P(e){if(!e)return null;var t=e.getOrderBy();if(0===t.length)return null;for(var r=[],n,i=0;i<t.length;i++)n=t[i],r.push({n:n.getSelector(),o:n.getOrder(),l:!n.getOrder()});return r}function m(e,t,r){if(!e)return null;var n=e.getOffset(),i=e.getLimit(),o=e.getMeta(),a=t.hasMoreProperty,s=o.hasOwnProperty(a),u=s?o[a]:n>=0,c=0===n,p=void 0===i||null===i;if(s)delete o[a],e.meta(o);var d=null;switch(t.navigationType){case v.PAGE:if(!c||!p)d={"Страница":i>0?Math.floor(n/i):0,"РазмерСтраницы":i,"ЕстьЕще":u};break;case v.POSITION:if(!p){var l=e.getWhere(),f=/(.+)([<>]=|~)$/,_=null,y="",h;Object.keys(l).forEach(function(e){if(h=e.match(f)){if(!_)_={};if(_[h[1]]=l[e],!y)switch(h[2]){case"~":y="both";break;case"<=":y="before"}delete l[e]}}),d={HaveMore:u,Limit:i,Order:y=y||"after",Position:g(_,r)}}break;default:if(!c||!p)d={Offset:n||0,Limit:i,HaveMore:u}}return d}function $(e){var t=null;if(e){t=e.getWhere();var r=e.getMeta();if(r)switch(r.expand){case i.ExpandMode.None:t.Разворот="Без разворота";break;case i.ExpandMode.Nodes:t.Разворот="С разворотом",t.ВидДерева="Только узлы";break;case i.ExpandMode.Leaves:t.Разворот="С разворотом",t.ВидДерева="Только листья";break;case i.ExpandMode.All:t.Разворот="С разворотом",t.ВидДерева="Узлы и листья"}}return t}function O(e){var t=[];if(e){if((t=e.getMeta())&&s.default.isModelInstance(t)){var r={};t.each(function(e,t){r[e]=t}),t=r}if(t instanceof Object){var n=[];for(var i in t)if(t.hasOwnProperty(i))n.push(t[i]);t=n}if(!(t instanceof Array))throw new TypeError("Types/_source/SbisService::getAdditionalParams(): unsupported metadata type. "+"Only Array, Types/_entity/Record or Object are allowed.")}return t}function T(e){if(!s.default.isModelInstance(e))if(!("ВызовИзБраузера"in(e=r.__assign({},e||{}))))e.ВызовИзБраузера=true;return{"Фильтр":g(e,this._$adapter),"ИмяМетода":this._$binding.format||null}}function M(e,t){var r={"ИдО":e,"ИмяМетода":this._$binding.format||null};if(t&&Object.keys(t).length)r.ДопПоля=t;return r}function w(e,t){var r=o.default.prototype._$passing.update.call(this,e,t),n={},i;if(n[s.default.isListInstance(r[0])?"Записи":"Запись"]=r[0],r[1]&&Object.keys(r[1]).length)n.ДопПоля=r[1];return n}function x(e,t){var r,n=u.resolve("Types/collection:RecordSet").patch(e);return{changed:n.get("changed"),added:n.get("added"),removed:n.get("removed")}}function S(e,t){var r={"ИдО":e};if(t&&Object.keys(t).length)r.ДопПоля=t;return r}function I(e){var t=m(e,this._$options,this._$adapter),r=$(e),n=P(e),i=O(e);return{"Фильтр":g(r,this._$adapter),"Сортировка":b(n,this._$adapter,this.getIdProperty()),"Навигация":g(t,this._$adapter),"ДопПоля":i}}function D(e,t){var r={"ИдО":e,"ИмяМетода":this._$binding.format};if(t&&Object.keys(t).length)r.ДопПоля=t;return r}function A(e,t){return{"ИдО":e,"ИдОУд":t}}function R(e,t,r){return{IndexNumber:this._$orderProperty,HierarchyName:r.parentProperty||null,ObjectName:r.objectName,ObjectId:e,DestinationId:t,Order:r.position,ReadMethod:r.objectName+"."+this._$binding.read,UpdateMethod:r.objectName+"."+this._$binding.update}}function j(e,t,r,n){a.logger.info(e._moduleName,"Move elements through moveAfter and moveBefore methods have been deprecated, please use just move instead."),t=t;var i=n.before?e._$binding.moveBefore:e._$binding.moveAfter,o={"ПорядковыйНомер":e._$orderProperty,"Иерархия":n.hierField||null,"Объект":e._$endpoint.moveContract,"ИдО":_(t,e._$endpoint.contract)};return o[n.before?"ИдОДо":"ИдОПосле"]=_(r,e._$endpoint.contract),e._callProvider(e._$endpoint.moveContract+"."+i,o)}t.buildRecord=g,t.buildRecordSet=b,t.getSortingParams=P,t.getPagingParams=m,t.getAdditionalParams=O;var C=function(i){function e(e){var t=i.call(this,e)||this;if(!t._$endpoint.moveContract)t._$endpoint.moveContract="IndexNumber";return t}return r.__extends(e,i),e.prototype.getOrderProperty=function(){return this._$orderProperty},e.prototype.setOrderProperty=function(e){this._$orderProperty=e},e.prototype.create=function(t){var r=this;return t=a.object.clonePlain(t,true),this._loadAdditionalDependencies(function(e){r._connectAdditionalDependencies(i.prototype.create.call(r,t),e)})},e.prototype.update=function(t,r){var n=this;if(this._$binding.updateBatch&&s.default.isListInstance(t))return this._loadAdditionalDependencies(function(e){n._connectAdditionalDependencies(n._callProvider(n._$binding.updateBatch,x(t,r)).addCallback(function(e){return n._prepareUpdateResult(t,e)}),e)});return i.prototype.update.call(this,t,r)},e.prototype.destroy=function(e,t){if(!(e instanceof Array))return h(this,[l(e)],f(e,this._$endpoint.contract),t);var r=y(e,this._$endpoint.contract),n=new c;for(var i in r)if(r.hasOwnProperty(i))n.push(h(this,r[i],i,t));return n.done().getResult()},e.prototype.query=function(t){var r=this;return t=a.object.clonePlain(t,true),this._loadAdditionalDependencies(function(e){r._connectAdditionalDependencies(i.prototype.query.call(r,t),e)})},e.prototype.move=function(e,t,r){if(r=r||{},this._$binding.moveBefore)return j(this,e,t,r);var n=y(e,this._$endpoint.contract),i=Object.keys(n).length,o=new c;if(null!==t)t=l(t);for(var a in n)if(n.hasOwnProperty(a)){r.objectName=a;var s=this._callProvider(this._$binding.move.indexOf(".")>-1?this._$binding.move:this._$endpoint.moveContract+"."+this._$binding.move,this._$passing.move.call(this,n[a],t,r));if(1===i)return s;o.push(s)}return o.done().getResult()},e.prototype.getProvider=function(){if(!this._provider)this._provider=this._createProvider(this._$provider,{endpoint:this._$endpoint,options:this._$options,service:this._$endpoint.address,resource:this._$endpoint.contract});return this._provider},Object.defineProperty(e,"NAVIGATION_TYPE",{get:function(){return v},enumerable:true,configurable:true}),e}(o.default);t.default=C,Object.assign(C.prototype,{"[Types/_source/SbisService]":true,_moduleName:"Types/source:SbisService",_$binding:{create:"Создать",read:"Прочитать",update:"Записать",updateBatch:"",destroy:"Удалить",query:"Список",copy:"Копировать",merge:"Объединить",move:"Move",format:""},_$passing:{create:T,read:M,update:w,destroy:S,query:I,copy:D,merge:A,move:R},_$adapter:"Types/entity:adapter.Sbis",_$provider:"Types/source:provider.SbisBusinessLogic",_$orderProperty:"ПорНомер",_$options:n.default.addOptions(o.default,{hasMoreProperty:"hasMore"})}),u.register("Types/source:SbisService",C,{instantiate:false})}(l,e,d,V,C,k,x,u,c,i);if(t instanceof Function)return t;else for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}(),Z=X,ee=X;return e.Base=N.default,e.DataSet=A.default,e.HierarchicalMemory=U.default,e.ICrud=y.default,e.ICrudPlus=v.default,e.IData=b.default,e.IProvider=m.default,e.IRpc=O.default,e.Local=K.default,e.Memory=H.default,e.PrefetchProxy=r.default,e.provider=z,e.Query=S.default,e.QueryExpandMode=S.ExpandMode,e.IQueryMeta=S.IMeta,e.Remote=W.default,e.Rpc=Y.default,e.SbisService=Z.default,e.QueryExt=I,e.SbisServiceExt=ee,e});