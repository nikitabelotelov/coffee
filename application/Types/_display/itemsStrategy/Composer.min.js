define("Types/_display/itemsStrategy/Composer",["require","exports","tslib","Types/entity","Types/util"],function(t,e,s,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:true});var r=function(e){function t(){var t=e.call(this)||this;return t._modules=[],t._options=[],t}return s.__extends(t,e),t.prototype.destroy=function(){this._modules=null,this._options=null,this._result=null,e.prototype.destroy.call(this)},t.prototype.append=function(t,e,s){var i=this._modules.indexOf(s);if(-1===i)i=this._modules.length;else i++;return this._modules.splice(i,0,t),this._options.splice(i,0,e),this._reBuild(i,true),this},t.prototype.prepend=function(t,e,s){var i=this._modules.indexOf(s);if(-1===i)i=0;return this._modules.splice(i,0,t),this._options.splice(i,0,e),this._reBuild(i,true),this},t.prototype.remove=function(t){var e=this._modules.indexOf(t);if(-1===e)return;var s=this._getInstance(e);return this._modules.splice(e,1),this._options.splice(e,1),this._reBuild(e),s},t.prototype.reset=function(){return this._modules.length=0,this._options.length=0,this._result=null,this},t.prototype.getInstance=function(t){var e=this._modules.indexOf(t);if(-1===e)return;return this._getInstance(e)},t.prototype.getResult=function(){return this._result},t.prototype._getSerializableState=function(t){return(t=i.SerializableMixin.prototype._getSerializableState.call(this,t)).$options={},t._modules=this._modules,t._options=this._options,t._result=this._result,t},t.prototype._setSerializableState=function(t){var e=i.SerializableMixin.prototype._setSerializableState(t);return function(){e.call(this),this._modules=t._modules,this._options=t._options,this._result=t._result}},t.prototype._reBuild=function(t,e){var i=this,o=function(t,e,s){var i=Object.assign({},s||{});if(t)i.source=t;return new e(i)};if(this._result&&t===this._modules.length+(e?-1:0)){if(e)this._result=o(this._result,this._modules[t],this._options[t]);else this._result=this._result.source;return}this._result=this._modules.reduce(function(t,e,s){return o(t,e,i._options[s])},null)},t.prototype._getInstance=function(t){var e=this._modules.length-t-1,s=0,i=this._result;while(e>s)i=i.source,s++;return i},t}(o.mixin(i.DestroyableMixin,i.SerializableMixin));(e.default=r).prototype._moduleName="Types/display:itemsStrategy.Composer",r.prototype["[Types/_display/itemsStrategy/Composer]"]=true,r.prototype._result=null});