define("Types/_display/itemsStrategy/Direct",["require","exports","tslib","Types/_display/itemsStrategy/AbstractStrategy","Types/_display/CollectionItem","Types/util","Types/shim"],function(t,e,r,i,u,s,p){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(n){function t(t){return n.call(this,t)||this}return r.__extends(t,n),Object.defineProperty(t.prototype,"unique",{set:function(t){this._options.unique=t},enumerable:true,configurable:true}),Object.defineProperty(t.prototype,"count",{get:function(){return this._getItemsOrder().length},enumerable:true,configurable:true}),Object.defineProperty(t.prototype,"items",{get:function(){var e=this._getItems(),t;return this._getItemsOrder().map(function(t){return e[t]})},enumerable:true,configurable:true}),t.prototype.at=function(t){var e=this._getItems(),r,i=this._getItemsOrder()[t];if(void 0===i)throw new ReferenceError("Display index "+t+" is out of bounds.");return e[i]},t.prototype.splice=function(t,e,r){var i=this,n,o=(r=r||[]).map(function(t){return t instanceof u.default?t:i._createItem(t)}),s=(n=this._getItems()).splice.apply(n,[t,e].concat(o));return this._itemsOrder=null,s},t.prototype.reset=function(){n.prototype.reset.call(this),this._itemsOrder=null},t.prototype.invalidate=function(){n.prototype.invalidate.call(this),this._itemsOrder=null},t.prototype.getDisplayIndex=function(t){var e=this._getItemsOrder(),r=e.indexOf(t);return-1===r?e.length:r},t.prototype.getCollectionIndex=function(t){var e,r=this._getItemsOrder()[t];return void 0===r?-1:r},t.prototype._getSerializableState=function(t){return(t=n.prototype._getSerializableState.call(this,t))._itemsOrder=this._itemsOrder,t},t.prototype._setSerializableState=function(t){var e=n.prototype._setSerializableState.call(this,t);return function(){this._itemsOrder=t._itemsOrder,e.call(this)}},t.prototype._initItems=function(){n.prototype._initItems.call(this);for(var t=this._items,e=this._getSourceItems(),r=t.length,i=0;i<r;i++)t[i]=this._createItem(e[i])},t.prototype._getItemsOrder=function(){if(!this._itemsOrder)this._itemsOrder=this._createItemsOrder();return this._itemsOrder},t.prototype._createItemsOrder=function(){return t.sortItems(this._getItems(),{idProperty:this._options.idProperty,unique:this._options.unique})},t.sortItems=function(t,e){var r=e.idProperty;if(!e.unique||!r)return t.map(function(t,e){return e});var i=new p.Set,n=[],o;return t.forEach(function(t,e){if(o=s.object.getPropertyValue(t.getContents(),r),i.has(o))return;i.add(o),n.push(e)}),n},t}(i.default);(e.default=n).prototype._moduleName="Types/display:itemsStrategy.Direct",n.prototype["[Types/_display/itemsStrategy/Direct]"]=true,n.prototype._itemsOrder=null});