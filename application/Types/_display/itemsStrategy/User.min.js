define("Types/_display/itemsStrategy/User",["require","exports","tslib","Types/_display/GroupItem","Types/entity","Types/util"],function(e,t,n,p,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(r){function i(e){var t=r.call(this)||this;if(t["[Types/_display/IItemsStrategy]"]=true,!e||!(e.handlers instanceof Array))throw new TypeError('Option "handlers" should be an instance of Array');return t._options=Object.assign({},e),t}return n.__extends(i,r),Object.defineProperty(i.prototype,"source",{get:function(){return this._options.source},enumerable:true,configurable:true}),Object.defineProperty(i.prototype,"handlers",{set:function(e){if(!(e instanceof Array))throw new TypeError('Option "handlers" should be an instance of Array');this._options.handlers=e},enumerable:true,configurable:true}),Object.defineProperty(i.prototype,"options",{get:function(){return this.source.options},enumerable:true,configurable:true}),Object.defineProperty(i.prototype,"count",{get:function(){return this.source.count},enumerable:true,configurable:true}),Object.defineProperty(i.prototype,"items",{get:function(){var t=this.source.items,e;return this._getItemsOrder().map(function(e){return t[e]})},enumerable:true,configurable:true}),i.prototype.at=function(e){var t,r=this._getItemsOrder()[e];return this.source.at(r)},i.prototype.splice=function(e,t,r){return this._itemsOrder=null,this.source.splice(e,t,r)},i.prototype.reset=function(){return this._itemsOrder=null,this.source.reset()},i.prototype.invalidate=function(){return this._itemsOrder=null,this.source.invalidate()},i.prototype.getDisplayIndex=function(e){var t=this.source.getDisplayIndex(e),r=this._getItemsOrder(),i=r.indexOf(t);return-1===i?r.length:i},i.prototype.getCollectionIndex=function(e){var t=this.source.getCollectionIndex(e),r=this._getItemsOrder();return-1===t?t:r[t]},i.prototype._getSerializableState=function(e){if((e=s.SerializableMixin.prototype._getSerializableState.call(this,e)).$options=this._options,e._itemsOrder=this._itemsOrder,!e._itemsOrder&&this._options.handlers.length)e._itemsOrder=this._getItemsOrder();return e},i.prototype._setSerializableState=function(e){var t=s.SerializableMixin.prototype._setSerializableState(e);return function(){this._itemsOrder=e._itemsOrder,t.call(this)}},i.prototype._getItemsOrder=function(){if(!this._itemsOrder)this._itemsOrder=this._createItemsOrder();return this._itemsOrder},i.prototype._createItemsOrder=function(){var e=this.source.items,t=e.map(function(e,t){return t});return i.sortItems(e,t,this._options&&this._options.handlers||[])},i.sortItems=function(e,t,r){if(!r||0===r.length)return t;for(var i=[],n=[],s,o,u=0,a=t.length;u<a;u++)if((o=e[s=t[u]])instanceof p.default)i.push(s);else n.push({item:o,collectionItem:o.getContents(),index:s,collectionIndex:s});for(var u=r.length-1;u>=0;u--)n.sort(r[u]);for(var l=0,a=n.length;l<a;l++)i.push(n[l].collectionIndex);return i},i}(r.mixin(s.DestroyableMixin,s.SerializableMixin));t.default=i,Object.assign(i.prototype,{"[Types/_display/itemsStrategy/User]":true,_moduleName:"Types/display:itemsStrategy.User",_itemsOrder:null})});