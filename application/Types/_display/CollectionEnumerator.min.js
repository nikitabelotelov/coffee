define("Types/_display/CollectionEnumerator",["require","exports","tslib","Types/entity","Types/collection","Types/util"],function(t,i,n,o,r,e){"use strict";Object.defineProperty(i,"__esModule",{value:true});var s=function(e){function t(t){var i=e.call(this)||this;if(i["[Types/_collection/IEnumerator]"]=true,i._$items=[],i._$filterMap=[],i._$sortMap=[],i._sourceToInternal=[],o.OptionsToPropertyMixin.call(i,t),r.IndexedEnumeratorMixin.constructor.call(i),!(i._$items instanceof Array)&&!(i._$items instanceof Function))throw new TypeError(i._moduleName+"::constructor(): items should be instance of an Array or Function");if(!(i._$filterMap instanceof Array))throw new TypeError(i._moduleName+"::constructor(): filter map should be instance of an Array");if(!(i._$sortMap instanceof Array))throw new TypeError(i._moduleName+"::constructor(): sort map should be instance of an Array");return i}return n.__extends(t,e),Object.defineProperty(t.prototype,"items",{get:function(){if(!this._itemsCache)this._itemsCache=this._$items instanceof Function?this._$items():this._$items;return this._itemsCache},enumerable:true,configurable:true}),t.getAssociativeMap=function(t,i){for(var e=[],n,o=0;o<t.length;o++)if(i[n=t[o]])e.push(n);return e},t.prototype.getCurrent=function(){return this._current},t.prototype.getCurrentIndex=function(){return this._position},t.prototype.reset=function(){this._itemsCache=null,this._position=-1,this._setCurrentByPosition()},t.prototype.reIndex=function(t,i,e){if(r.IndexedEnumeratorMixin.reIndex.call(this,t,i,e),this._itemsCache=null,this._internalToSource=null,this._sourceToInternal=[],this._position=-1,this._current)this._setPositionByCurrent()},t.prototype._createIndex=function(t){var i=this._position,e=this._current;r.IndexedEnumeratorMixin._createIndex.call(this,t),this._position=i,this._current=e},t.prototype.at=function(t){return void 0===t?void 0:this.items[this.getSourceByInternal(t)]},t.prototype.getCount=function(){return this._initInternalMap(),this._internalToSource.length},t.prototype.setCurrent=function(t){this._itemsCache=null,this._position=this.getInternalBySource(this.items.indexOf(t)),this._setCurrentByPosition()},t.prototype.getPosition=function(){return this._position},t.prototype.setPosition=function(t){this._itemsCache=null,this._checkPosition(t),this._position=t,this._setCurrentByPosition()},t.prototype.isValidPosition=function(t){return t>=-1&&t<this.getCount()},t.prototype.movePrevious=function(){if(this._position<1)return false;return this._position--,this._setCurrentByPosition(),true},t.prototype.moveNext=function(){if(this._position>=this.getCount()-1)return false;return this._position++,this._setCurrentByPosition(),true},t.prototype.getInternalBySource=function(t){if(void 0===t||null===t||-1===t)return t;if(this._initInternalMap(),void 0===this._sourceToInternal[t])this._sourceToInternal[t]=this._internalToSource.indexOf(t);return this._sourceToInternal[t]},t.prototype.getSourceByInternal=function(t){if(void 0===t||null===t||-1===t)return t;return this._initInternalMap(),this._internalToSource[t]},t.prototype._initInternalMap=function(){if(null===this._internalToSource)this._internalToSource=t.getAssociativeMap(this._$sortMap,this._$filterMap)},t.prototype._checkPosition=function(t){if(!this.isValidPosition(t))throw new Error(this._moduleName+": position is out of bounds")},t.prototype._setCurrentByPosition=function(){this._current=this._position>-1?this.items[this.getSourceByInternal(this._position)]:void 0},t.prototype._setPositionByCurrent=function(){this._position=-1;var t=this._current?this.items.indexOf(this._current):-1;if(t>-1&&this._$filterMap[t])this._position=this.getInternalBySource(t);else this._current=void 0},t}(e.mixin(o.DestroyableMixin,o.OptionsToPropertyMixin,r.IndexedEnumeratorMixin));i.default=s,Object.assign(s.prototype,{"[Types/_display/CollectionEnumerator]":true,_$items:null,_$filterMap:null,_$sortMap:null,_itemsCache:null,_position:-1,_current:void 0,_internalToSource:null,_sourceToInternal:null})});