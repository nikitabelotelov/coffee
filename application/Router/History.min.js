define("Router/History",["require","exports","Router/Helper","Router/UrlRewriter"],function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var o=function(){function t(){if(this._localHistory=[],this._currentPosition=0,"undefined"!==typeof window){var t=i.default.getRelativeUrl(),e=0;if(window.history.state&&"number"===typeof window.history.state.id)e=window.history.state.id;if(this._pushToHistory(e,r.default.get(t),t),!window.history.state)window.history.replaceState(this.getCurrentState(),t,t)}}return t.prototype.getCurrentState=function(){return this._localHistory[this._currentPosition]},t.prototype.getPrevState=function(){return this._localHistory[this._currentPosition-1]},t.prototype.getNextState=function(){return this._localHistory[this._currentPosition+1]},t.prototype.back=function(){if(0===this._currentPosition){var t=i.default.getRelativeUrl(true),e=this._generateHistoryObject(this.getCurrentState().id,r.default.get(t),t);this._localHistory.forEach(function(t){return t.id++}),this._localHistory.unshift(e)}else this._currentPosition--;i.default.setRelativeUrl(this.getCurrentState().url)},t.prototype.forward=function(){if(this._currentPosition++,this._currentPosition===this._localHistory.length){var t=i.default.getRelativeUrl();this._pushToHistory(this.getPrevState().id,r.default.get(t),t)}i.default.setRelativeUrl(this.getCurrentState().url)},t.prototype.push=function(t,e){var r;if(this.getCurrentState())r=this.getCurrentState().id+1;else r=0;this._currentPosition++,this._localHistory.splice(this._currentPosition),this._pushToHistory(r,t,e),i.default.setRelativeUrl(t),window.history.pushState(this.getCurrentState(),e,e)},t.prototype._generateHistoryObject=function(t,e,r){return{id:t,url:e,prettyUrl:r}},t.prototype._pushToHistory=function(t,e,r){this._localHistory.push(this._generateHistoryObject(t,e,r))},t}();return e.default=new o,e});