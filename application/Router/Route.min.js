define("Router/Route",["require","exports","tslib","Core/Control","wml!Router/Route","Router/Helper","Router/History"],function(t,e,r,i,o,n,s){"use strict";var a,e;return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._urlOptions=null,t._entered=false,t._index=0,t._template=o,t}return r.__extends(t,e),t.prototype.pathUrlOptionsFromCfg=function(t){for(var e in t)if(!this._urlOptions.hasOwnProperty(e)&&t.hasOwnProperty(e)&&"mask"!==e&&"content"!==e&&"_logicParent"!==e)this._urlOptions[e]=t[e]},t.prototype._wasResolvedParam=function(){var t=false;for(var e in this._urlOptions)if(this._urlOptions.hasOwnProperty(e))if(void 0!==this._urlOptions[e]){t=true;break}return t},t.prototype._applyNewUrl=function(t,e){this._urlOptions=n.default.calculateUrlParams(t,void 0,this._index);var r=this._wasResolvedParam();return this.pathUrlOptionsFromCfg(e),r},t.prototype.beforeApplyUrl=function(t,e){var r,i;if(this._urlOptions=n.default.calculateUrlParams(this._options.mask,t.url,this._index),this._wasResolvedParam()){if(this.pathUrlOptionsFromCfg(this._options),!this._entered)r=this._notify("enter",[t,e]);else r=new Promise(function(t){t(true)});this._entered=true}else{if(this.pathUrlOptionsFromCfg(this._options),this._entered)r=this._notify("leave",[t,e]);else r=new Promise(function(t){t(true)});this._entered=false}return r},t.prototype.afterUpForNotify=function(){this._urlOptions=n.default.calculateUrlParams(this._options.mask,n.default.getRelativeUrl(),this._index);var t=this._wasResolvedParam();this.pathUrlOptionsFromCfg(this._options);var e=s.default.getCurrentState(),r=s.default.getPrevState();if(t){if(this._entered=true,!r)r={url:n.default.calculateHref(this._options.mask,{clear:true},void 0)};return this._notify("enter",[e,r])}return new Promise(function(t){t()})},t.prototype.applyNewUrl=function(){this._forceUpdate()},t.prototype._reserve=function(t,e){var r=n.default.findIndex(this._options.mask,t,e);if(-1!==r)this._index=r-1;else r=t;return r},t.prototype._beforeMount=function(t){this._urlOptions={},this._applyNewUrl(t.mask,t)},t.prototype._afterMount=function(){this._notify("routerCreated",[this],{bubbling:true}),this.afterUpForNotify()},t.prototype._beforeUpdate=function(t){this._applyNewUrl(t.mask,t)},t.prototype._beforeUnmount=function(){this._notify("routerDestroyed",[this],{bubbling:true})},t}(i)});