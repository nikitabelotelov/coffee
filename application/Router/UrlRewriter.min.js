define("Router/UrlRewriter",["require","exports","router"],function(e,r,t){Object.defineProperty(r,"__esModule",{value:true});var i=/^http[s]?:\/\//,n=/^\//,u=/\/$/,v,h;function l(e){var r=d(e),t=r.path,i=r.misc;if("/"===t&&h)return h+i;if(v){for(var n,u=O(t).split("/"),l=v.tree,a=null,f=null,c=0;c<u.length;c++){var o=u[c];if(!l[o])break;if(l[o].value)a=l[o].value,f=c;l=l[o].tree}if(a){var s=u.slice(0,f+1).join("/"),p;return t.replace(s,a)+i}}return t+i}function d(e){var r=e.match(/[?#]/);if(r){var t=r.index;return{path:e.substring(0,t),misc:e.slice(t)}}return{path:e,misc:""}}function O(e){var r=(e=e.replace(i,"")).indexOf("?"),t=e.indexOf("#");if(-1!==r)e=e.slice(0,r);if(-1!==t)e=e.slice(0,t);return e=e.replace(n,"").replace(u,"")}function a(e){if(v={value:null,tree:{}},h=null,!e)return;if(e.hasOwnProperty("/"))h="/"+O(e["/"]);for(var r in e)if(e.hasOwnProperty(r)){if("/"===r)continue;for(var t=e[r],i=(r=O(r)).split("/"),n=v.tree,u=0;u<i.length;u++){var l=i[u];if(!n.hasOwnProperty(l))n[l]={value:null,tree:{}};if(i.length-1===u)n[l].value=t;n=n[l].tree}}}return a(t||{}),r.get=l,r._prepareRoutes=a,r});