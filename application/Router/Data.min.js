define("Router/Data",["require","exports","View/Request","Router/UrlRewriter"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:true});var i="RouterData",o="CoreInstance";function s(){return S("history")}function u(e){p("history",e)}function a(){return S("historyPosition")}function f(e){p("historyPosition",e)}function c(){return S("relativeUrl")||w()}function g(e){p("relativeUrl",e)}function l(){return w()}function R(){return S("registeredRoutes")}function d(){return S("registeredReferences")}function h(){return U()}function y(e){var t=w(),r={id:0,state:n.get(t),href:t};if("undefined"!==typeof window)if(window.history.state&&"number"===typeof window.history.state.id)r.id=window.history.state.id;else if(!window.history.state)window.history.replaceState(r,r.href,r.href);var i={IS_ROUTER_STORAGE:true,history:[r],historyPosition:0,registeredRoutes:{},registeredReferences:{},relativeUrl:r.state};Object.assign(e,i)}function v(){var e=r.getCurrent(),t=e&&e.getStorage(i);if(e&&!t||t&&!t.IS_ROUTER_STORAGE)y(t);return t}function w(){var e=r.getCurrent(),t=e&&e.location;if(t)return t.pathname+t.search+t.hash;else return null}function U(){var e=r.getCurrent(),t=e&&e.getStorage(o);return t&&t.instance}function S(e){return v()[e]}function p(e,t){var r;return v()[e]=t}return t.getHistory=s,t.setHistory=u,t.getHistoryPosition=a,t.setHistoryPosition=f,t.getRelativeUrl=c,t.setRelativeUrl=g,t.getVisibleRelativeUrl=l,t.getRegisteredRoutes=R,t.getRegisteredReferences=d,t.getCoreInstance=h,t});