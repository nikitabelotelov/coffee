define("Transport/RPC",["require","exports","Transport/sbis","Transport/_utils","Transport/RPC/Body","Transport/RPC/ErrorCreator","Core/EventBus","Transport/RPC/getFetchConfig","Transport/Errors"],function(r,t,o,n,i,s,e,a,f){"use strict";var u=function(){return e.globalChannel()},c=function(){return e.channel("errors")},h;return function(e){var r=o(a(e),o.RESPONSE_TYPE.JSON),t=r.then(function(r){var t=r||i.getEmptyResponse();if("error"in t)throw s.fromRPC(t.error,e.method,e.url);return t.result},function(r){if(r instanceof f.Connection){var t=e.method.split("."),o=t[0],n=t[1];u().notify("onOfflineModeError",o,n,r)}throw s.fromHTTP(r,e.method)}).catch(function(r){if(r.canceled)throw r;if(!r.details){var t=r.httpError||0;r.details=t>500?rk("Попробуйте заглянуть сюда через 15 минут"):""}throw c().notify("onRPCError",r),r});return n.getAbortedPromise(t,r)}});