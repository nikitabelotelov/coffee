define("View/Executor/_Utils/Compatible",["require","exports","Core/helpers/Function/shallowClone","Env/Env","View/Logger","View/Executor/Expressions"],function(u,e,r,O,c,d){Object.defineProperty(e,"__esModule",{value:true}),e["View/Executor/_Utils/OptionsResolver"]=true;var t,f=function(){"use strict";var e={},t=function(e,t,s){function r(e,t){for(var o in t)if("undefined"===typeof e[o])e[o]=t[o]}function i(e,t,o,n){for(var r in o){var i=o[r].call(null,t[r]);if(i instanceof Error)return i.message='"'+r+'"'+" option error: "+i.message,s.IoC.resolve("ILogger").error(i,"\nIn component "+e.prototype._moduleName+"\nParent name "+n),false}return true}function o(e,t,o,n){return r(o,t),a(e,o,n)}function n(e){return e.getDefaultOptions?e.getDefaultOptions():{}}function a(e,t,o){if(!s.constants.isProduction){var n;return i(e,t,e.getOptionTypes&&e.getOptionTypes(),o)}else return true}function p(e,t,o,n){if(!e)return;var r=e._getInheritOptions&&e._getInheritOptions(e)||{};if(!t.inheritOptions)t.inheritOptions={};var i={};for(var s in t.inheritOptions)if(t.inheritOptions.hasOwnProperty(s)){if(void 0===o[s])o[s]=t.inheritOptions[s];i[s]=o[s]}for(var a in r)if(r.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&!n){if(o.hasOwnProperty(a))r[a]=o[a];i[a]=r[a],o[a]=r[a]}else if(r.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&n&&o&&o.hasOwnProperty(a))i[a]=o[a];t.inheritOptions=i}Object.defineProperty(t,"__esModule",{value:true}),t.resolveDefaultOptions=r,t.resolveOptions=o,t.getDefaultOptions=n,t.validateOptions=a,t.resolveInheritOptions=p}(u,e,O);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();function v(e,t){var o,n=r(e);for(o in t)if(t.hasOwnProperty(o)&&-1===o.toString().indexOf("__dirtyCheckingVars_"))n[o]=t[o];return n}function m(e,t,o){var n;if(e.$constructor)n=v(t,o);else if(o&&o.logicParent)(n=t)._logicParent=o.logicParent,n._isSeparatedOptions=true;else n=v(t,{_isSeparatedOptions:true});return n}function o(e,t,o){o=o||{};var n=m(e.prototype,t,o),r,i,s,a=o.logicParent&&o.logicParent._moduleName,p=f.getDefaultOptions(e);if(f.resolveOptions(e,p,n,a),o.parent&&o.parent._options&&o.parent._options.iWantBeWS3)n.iWantBeWS3=true;try{r=new e(n)}catch(e){r=new(s=u("Core/Control"))({iWantBeWS3:n.iWantBeWS3}),c.catchLifeCircleErrors("constructor",e)}if(n.mustCompatible||n.iWantBeWS3)try{var l;u("Core/helpers/Hcontrol/makeInstanceCompatible")(r)}catch(e){O.IoC.resolve("ILogger").error("WS3WS4","Please require Core/helpers/Hcontrol/makeInstanceCompatible manual")}if(o.logicParent&&o.logicParent._children&&t.name)o.logicParent._children[t.name]=r;if(r.isCompatibleLayout&&!r.isCompatibleLayout()&&false!==r.iWantVDOM)if(i=r._options,r._savedOptions)r._options=r._savedOptions;else r._options=n;else if(!r._options)r._options=n;if(O.constants.compat)r._setInternalOptions(o);if(r.isCompatibleLayout&&!r.isCompatibleLayout()&&false!==r.iWantVDOM)r._savedOptions=r._options,r._options=i;else if(r._dotTplFn||false===r.iWantVDOM)n=r._options;return{instance:r,resolvedOptions:n,defaultOptions:p}}function n(e,t,o,n,r,i,s,a,p){var l={},u=e.prototype&&e.prototype._moduleName,c;if(n.__vdomOptions={controlNode:a},l[u]=e,!(c=p.createWsControl("ws:"+u,n,{internal:a.controlInternalProperties,attributes:a.controlAttributes,events:a.controlEvents,key:a.key,context:a.context,inheritOptions:a.inheritOptions},void 0,l)))c="<span>Component "+u+" was building error</span>";if(!O.constants.compat)O.IoC.resolve("ILogger").error("Building component","CompoundControl detected. Component name = "+u);var f=new d.RawMarkupNode(c,a.controlAttributes,u,a.key);return{control:e,controlClass:t,options:v(n,r),id:void 0,parent:s,key:i,element:void 0,markup:f,fullMarkup:f,childrenNodes:o,compound:true}}return e.createCombinedOptions=v,e.combineOptionsIfCompatible=m,e.createInstanceCompatible=o,e.createCompoundControlNode=n,e});