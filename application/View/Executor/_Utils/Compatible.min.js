define("View/Executor/_Utils/Compatible",["require","exports","Core/helpers/Function/shallowClone","Core/IoC","Core/constants","View/Logger","View/Executor/Expressions"],function(l,e,r,O,d,c,m){"use strict";Object.defineProperty(e,"__esModule",{value:true}),e["View/Executor/_Utils/OptionsResolver"]=true;var t,u=function(){var e={},t=function(e,t,s,i){function a(e,t){for(var o in t)if("undefined"===typeof e[o])e[o]=t[o]}function p(e,t,o,n){for(var r in o){var i=o[r].call(null,t[r]);if(i instanceof Error)return i.message='"'+r+'"'+" option error: "+i.message,s.resolve("ILogger").error(i,"\nIn component "+e.prototype._moduleName+"\nParent name "+n),false}return true}function o(e,t,o){var n;if(a(t,e.getDefaultOptions&&e.getDefaultOptions()),!i.isProduction){var r;return p(e,t,e.getOptionTypes&&e.getOptionTypes(),o)}else return true}function n(e,t,o,n){if(!e)return;var r=e._getInheritOptions&&e._getInheritOptions(e)||{};if(!t.inheritOptions)t.inheritOptions={};var i={};for(var s in t.inheritOptions)if(t.inheritOptions.hasOwnProperty(s)){if(void 0===o[s])o[s]=t.inheritOptions[s];i[s]=o[s]}for(var a in r)if(r.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&!n){if(o.hasOwnProperty(a))r[a]=o[a];i[a]=r[a],o[a]=r[a]}else if(r.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&n&&o&&o.hasOwnProperty(a))i[a]=o[a];t.inheritOptions=i}Object.defineProperty(t,"__esModule",{value:true}),t.resolveDefaultOptions=a,t.validateOptions=p,t.resolveOptions=o,t.resolveInheritOptions=n}(l,e,O,d);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();function v(e,t){var o,n=r(e);for(o in t)if(t.hasOwnProperty(o)&&-1===o.toString().indexOf("__dirtyCheckingVars_"))n[o]=t[o];return n}function f(e,t,o){var n;if(e.$constructor)n=v(t,o);else if(o&&o.logicParent)(n=t)._logicParent=o.logicParent,n._isSeparatedOptions=true;else n=v(t,{_isSeparatedOptions:true});return n}function o(e,t,o){o=o||{};var n=f(e.prototype,t,o),r,i,s,a=o.logicParent&&o.logicParent._moduleName;if(u.resolveOptions(e,n,a),o.parent&&o.parent._options&&o.parent._options.iWantBeWS3)n.iWantBeWS3=true;try{r=new e(n)}catch(e){r=new(s=l("Core/Control"))({iWantBeWS3:n.iWantBeWS3}),c.catchLifeCircleErrors("constructor",e)}if(n.mustCompatible||n.iWantBeWS3)try{var p;l("Core/helpers/Hcontrol/makeInstanceCompatible")(r)}catch(e){O.resolve("ILogger").error("WS3WS4","Please require Core/helpers/Hcontrol/makeInstanceCompatible manual")}if(o.logicParent&&o.logicParent._children&&t.name)o.logicParent._children[t.name]=r;if(r.isCompatibleLayout&&!r.isCompatibleLayout()&&false!==r.iWantVDOM)if(i=r._options,r._savedOptions)r._options=r._savedOptions;else r._options=n;else if(!r._options)r._options=n;if(d.compat)r._setInternalOptions(o);if(r.isCompatibleLayout&&!r.isCompatibleLayout()&&false!==r.iWantVDOM)r._savedOptions=r._options,r._options=i;else if(r._dotTplFn||false===r.iWantVDOM)n=r._options;return{instance:r,resolvedOptions:n}}function n(e,t,o,n,r,i,s,a,p){var l={},c=e.prototype&&e.prototype._moduleName,u;if(n.__vdomOptions={controlNode:a},l[c]=e,!(u=p.createWsControl("ws:"+c,n,{internal:a.controlInternalProperties,attributes:a.controlAttributes,events:a.controlEvents,key:a.key,context:a.context,inheritOptions:a.inheritOptions},void 0,l)))u="<span>Component "+c+" was building error</span>";if(!d.compat)O.resolve("ILogger").error("Building component","CompoundControl detected. Component name = "+c);var f=new m.RawMarkupNode(u,a.controlAttributes,c,a.key);return{control:e,controlClass:t,options:v(n,r),id:void 0,parent:s,key:i,element:void 0,markup:f,fullMarkup:f,childrenNodes:o,compound:true}}return e.createCombinedOptions=v,e.combineOptionsIfCompatible=f,e.createInstanceCompatible=o,e.createCompoundControlNode=n,e});