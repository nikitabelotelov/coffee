define("View/Executor/_Expressions/ContextResolver",["require","exports","Core/IoC","Core/DataContext"],function(e,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var u={"Controls/Application/AppData":true,"UserActivity/ActivityContextField":true,"Notes/VDOM/Context":true,"Controls/Container/Scroll/Context":true,"Controls/Context/TouchContextField":true,"Controls/StickyHeader/Context":true,"Controls/Container/Data/ContextOptions":true,"WSTests/unit/tmpl/sync-tests/context/contextField":true,"WSTests/unit/tmpl/sync-tests/context/updateConsumers/ctxField":true,"WSTests/unit/tmpl/sync-tests/context/contextField2":true,"WSTests/unit/tmpl/sync-tests/context/dirtyCheckingUpdate/contextField":true};function l(){var e=0;for(var t in this)if(this.hasOwnProperty(t)&&this[t])if(this[t].getVersion)e+=this[t].getVersion();return e}function r(e,t){if(e&&e._getChildContext){t=Object.create(t);var r=e._getChildContext();for(var o in r)if(r.hasOwnProperty(o)){if(r[o]._moduleName&&!u[r[o]._moduleName])s.resolve("ILogger").error("Wrong context field",r[o]._moduleName+". Only allowed context fields: "+Object.keys(u));if(t[o]=r[o],r[o]&&r[o].getVersion===i.prototype.getVersion)for(var n in r[o])if(r[o].hasOwnProperty(n)&&r[o][n])if(r[o][n].getVersion)r[o].getVersion=l}}return t}function o(e,t,r){if("undefined"===typeof t)return{};var o=e.contextTypes?e.contextTypes():{},n={};if(!o)s.resolve("ILogger").error(null,"Context types are not defined");else for(var i in o)if(!(t[i]instanceof o[i]));else if(n[i]=t[i],r)n[i].registerConsumer(r);return n}return t.wrapContext=r,t.resolveContext=o,t});