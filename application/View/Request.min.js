define("View/Request",["Core/constants","require","exports","tslib"],function(r,f,e,i){"use strict";e["View/_Request/Console"]=true;var n=function(){var e={},t=function(e,t,r){Object.defineProperty(t,"__esModule",{value:true});var o=function(e,t){return e>t},n=function(e,t){return e&&"function"===typeof e[t]},i,s;(s=i=t.LogLevel||(t.LogLevel={}))[s["info"]=0]="info",s[s["warning"]=1]="warning",s[s["error"]=2]="error";var a=function(){function e(e){var t=e.logLevel,o=e.console;this.__logLevel=t||r.logLevel,this.__console=o}return e.prototype.setLogLevel=function(e){this.__logLevel=e},e.prototype.getLogLevel=function(){return this.__logLevel},e.prototype.info=function(){if(o(this.__logLevel,i.info)&&n(this.__console,"info"))console.info(arguments)},e.prototype.log=function(){if(o(this.__logLevel,i.info)&&n(this.__console,"log"))console.log(arguments)},e.prototype.warning=function(){if(!o(this.__logLevel,i.warning))return;if(n(this.__console,"error"))return console.warn(arguments);if(n(this.__console,"log"))return console.log(arguments)},e.prototype.error=function(){if(!o(this.__logLevel,i.error)||!n(this.__console,"error"))return;console.error(arguments)},e}();t.Console=a}(f,e,r);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["View/_Request/StateReceiver"]=true;var s=function(){var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var o=function(){function e(e){var t=void 0===e?{}:e,o=t.states,r=t.console;this.__states=Object.create(null),this.__components=Object.create(null),this.__states=o,this.__console=r}return e.prototype.serialize=function(){var e=Object.create(null);for(var t in this.__components)e[t]=this.__components[t].getState();return JSON.stringify(e)},e.prototype.deserialize=function(e){try{this.__states=JSON.parse(e),this.__updateState()}catch(e){this.__console&&this.__console.error(e)}},e.prototype.register=function(e,t){if(this.__components[e]=t,!this.__states)this.__states={};if(this.__states[e])this.__setComponentState(e)},e.prototype.unregister=function(e){delete this.__components[e]},e.prototype.__updateState=function(){for(var e in this.__states)this.__setComponentState(e)},e.prototype.__setComponentState=function(e){var t=this.__components[e];if(t||t.setState)t.setState(this.__states[e]),delete this.__states[e]},e}();t.default=o}(f,e);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["View/_Request/_Storage/NodeCookie"]=true;var a=function(){var e={},t=function(e,t,o){Object.defineProperty(t,"__esModule",{value:true});var r=function(){return process&&process.domain&&process.domain.req||{}},n=function(){function e(){}return e.prototype.get=function(e){var t=r();return t.cookies?t.cookies[e]:null},e.prototype.set=function(e,t,o){return false},e.prototype.remove=function(e){this.set(e,null)},e.prototype.getKeys=function(){return Object.keys(r().cookies||{})},e.prototype.toObject=function(){return o.__assign({},r().cookies)},e}();t.default=n}(f,e,i);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["View/_Request/_Storage/Cookie"]=true;var l=function(){var e={},t=function(e,t){Object.defineProperty(t,"__esModule",{value:true});var u=24*60*60*1e3,o=/=.*/,r=function(){function e(){}return e.prototype.get=function(e){for(var t=null,o=document.cookie.split(";"),r,n=0;n<o.length;n++)if((r=String(o[n]).trim()).substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}return t},e.prototype.set=function(e,t,o){var r="",n,i,s;if(o=o||{},null===t)t="",o.expires=-1;if(o.expires){var a=void 0;if("number"===typeof o.expires)(a=new Date).setTime(a.getTime()+o.expires*u);else if(o.expires.toUTCString)a=o.expires;else throw new TypeError('Option "expires" should be a Number or Date instance');r="; expires="+a.toUTCString()}return n=o.path?"; path="+o.path:"",i=o.domain?"; domain="+o.domain:"",s=o.secure?"; secure":"",document.cookie=[name,"=",encodeURIComponent(t),r,n,i,s].join(""),true},e.prototype.remove=function(e){this.set(e,null)},e.prototype.getKeys=function(){return document.cookie.split(";").map(function(e){return e.replace(o,"")})},e.prototype.toObject=function(){var n={};return document.cookie.split(";").forEach(function(e){var t=e.split("="),o=t[0],r=t[1];n[o]=decodeURIComponent(r)}),n},e}();t.default=r}(f,e);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["View/_Request/_Storage/Native"]=true;var p=function(){var e={},t=function(e,t,o){Object.defineProperty(t,"__esModule",{value:true});var r=function(){return this||(0,eval)("this")}(),n,i;(i=n=t.StorageType||(t.StorageType={}))["local"]="localStorage",i["session"]="sessionStorage";var s=function(){function e(e){var t=r&&r[e];if(!t)throw new Error('"'+e+'" not supported');this.__storage=t}return e.prototype.get=function(e){try{return this.__storage.getItem(e)}catch(e){}},e.prototype.set=function(e,t){try{return this.__storage.setItem(e,t),true}catch(e){return false}},e.prototype.remove=function(e){try{this.__storage.removeItem(e)}catch(e){}},e.prototype.getKeys=function(){try{return Object.keys(this.__storage)}catch(e){return[]}},e.prototype.toObject=function(){try{return o.__assign({},this.__storage)}catch(e){return{}}},e}();t.default=s}(f,e,i);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["View/_Request/_Storage/Object"]=true;var _=function(){var e={},t=function(e,t,o){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(){this._map=Object.create(null)}return e.prototype.get=function(e){return this._map[e]||null},e.prototype.set=function(e,t){return this._map[e]=t,true},e.prototype.remove=function(e){delete this._map[e]},e.prototype.getKeys=function(){return Object.keys(this._map)},e.prototype.toObject=function(){return o.__assign({},this._map)},e}();t.default=r}(f,e,i);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}();e["View/_Request/Storage"]=true;var u=function(){var e={},t=(o=f,r=e,n=l,i=p,s=_,Object.defineProperty(r,"__esModule",{value:true}),(u=a=r.Key||(r.Key={}))["sessionStorage"]="sessionStorage",u["localStorage"]="localStorage",u["userInfo"]="userInfo",u["cookie"]="cookie",u["object"]="object",void(r.create=function(e){switch(e){case a.sessionStorage:return new i.default(i.StorageType.session);case a.localStorage:return new i.default(i.StorageType.local);case a.cookie:return new n.default;default:return new s.default}})),o,r,n,i,s,a,u;if(t instanceof Function)return t;else for(var c in t)if(t.hasOwnProperty(c))e[c]=t[c];return e}(),t=u;e["View/_Request/createDefault"]=true;var o,c=function(){var e={},t=function(e,t,r,n,i,s,a){Object.defineProperty(t,"__esModule",{value:true});var u=function(){return this||(0,eval)("this")}(),c=function(){return process&&process.domain&&process.domain.req||{}},o=function(){var e,t=new r.Console({console:u.console,logLevel:i.logLevel});return{console:t,location:u.location,stateReceiver:new n.default({console:t}),storageMap:(e={},e[s.Key.cookie]=s.create(s.Key.cookie),e[s.Key.sessionStorage]=s.create(s.Key.sessionStorage),e[s.Key.localStorage]=s.create(s.Key.localStorage),e)}},f=function(){var e,t=c().originalUrl||"",o=new r.Console({console:"jstestdriver"in u?u.jstestdriver.console:u.console,logLevel:i.logLevel});return{console:o,location:{protocol:"",host:"",hostname:"",port:"",hash:"",href:t,pathname:"",search:""},stateReceiver:new n.default({console:o}),storageMap:(e={},e[s.Key.cookie]=a.default?new a.default:s.create(s.Key.object),e)}},l=function(e){var t;if(i.isBrowserPlatform)t=o();else t=f();return new e(t)};t.default=l}(f,e,n,s,r,u,a);if(t instanceof Function)return t;else for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o];return e}(),h={},g=function(){return process&&process.domain&&process.domain.req||window||h},v=function(){function e(e){var t=e.stateReceiver,o=e.storageMap,r=e.console,n=e.location;this.stateReceiver=t,this.__storageMap=i.__assign({},o),this.console=r,this.location=n}return e.prototype.getStorage=function(e){if(!this.__storageMap[e])this.__storageMap[e]=t.create(t.Key.object);return this.__storageMap[e]},e.prototype.setStorage=function(e,t){if(this.__storageMap[e])throw new Error('attempt to overwrite used storage "'+e+'"');this.__storageMap[e]=t},e.prototype.setConsole=function(e){this.console=e},e.prototype.setLocation=function(e){this.location=e},e.prototype.setStateReceiver=function(e){this.stateReceiver=e},e.setCurrent=function(e){g().wasabyRequest=e},e.getCurrent=function(){return g().wasabyRequest},e.StorageKey=t.Key,e}(),e;return v.setCurrent(c.default(v)),e=v});