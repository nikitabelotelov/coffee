define("View/Builder/Tmpl/modules/utils/tag",["Env/Env","View/Builder/Tmpl/modules/utils/names","View/Builder/Tmpl/modules/utils/common"],function(e,t,l){var o=".",u="/",r=/[\u0400-\u04FF]/,i="SBIS3",s=function n(e){return e.charAt(0)},a=function n(e){return e===e.toUpperCase()},f=function n(e){var t;if(void 0!==e&&0===e.indexOf("ws:"))return(t=e.split("ws:"))[1];return},n,c,d,p,v,m,h=function n(){return e.constants.jsModules},g=function n(){return e.constants.jsCoreModules},w=function n(e,t){return e===i&&t},y=function n(e){return e&&!r.test(e)&&E(e)},T=function n(e){return y(f(e)||e)},x=function n(e,t,r,i){var u=h(),l=g(),o=u&&(u[e]||l[e]);if(r){if(i&&!o)return true;return o}return o||(t?void 0:true)},O=function n(e,t){return e.split(t?t:o)[0]},C=function n(e,t,r,i){var u=w(t,i);if(r||u)return x(t,false,i,u)?e:false;return x(t)?e.replace(/[.]/g,"/"):false},M=function n(e,t,r){if(t)return x(e)?e:C(e,O(e,t),true);return x(e,r)?e:C(e,O(e,t),false,r)},E=function n(e){return a(s(e))?e:false},q=function n(e,t,r,i){var u=false;if(e&&!~t.indexOf(e))if(u=E(e),r)if(~(e=e.replace(/\//g,o)).indexOf(o))u=M(e,false,i);else u=false;return u},B=function n(e){var t=e.split(":");return e.indexOf(".")>=0&&"ws"!==t[0]},b=function n(e,t,r){var i=false;if(e&&!~t.indexOf(e))if(i=E(e),r)if(~(e=j.call(this,e,u)).indexOf(u))i=M(e,u);else i=false;return i},S=function n(e,t,r,i,u){if(i)return q(e,t,true);return q(f(e),t,r,u)},D=function(n,e,t,r,i){if(B(n))return b.call(this,n,e,t);return S(n,e,t,r,i)},F=function n(e,t,r,i,u){if(T(e))return D.call(this,e,t,r,i,u)},N=function n(e){return e.replace(/\./g,"/")},j=function n(e,t){var r=[],i="";if(this&&this.config)r=this.config.mustBeDots,i=this.config.screen;for(var u in r)e=e.replace(r[u],i+u+i);for(var u in e=e.replace(/\./g,t),r)e=e.replace(i+u+i,r[u]);return e},R=function n(e){return e.indexOf(".")>=0&&e.indexOf("/")<0},V=function n(e,t){var r,i=e;if(void 0===x(e,true,t,w(O(e),t)))i=N(e);return"ws:"+i},W=function n(e){var t=e;if(R(e))t=j.call(this,e,"/");return"ws:"+t},k={getModuleExpressionBody:function n(e){return e.attribs.data.data[0]},elseChecker:function n(e){return void 0===e.prev||"ws:if"!==e.prev.name&&"ws:else"!==e.prev.name},createTagKey:function n(e,t){return e?e+"-"+t:t},createControlTagName:function n(e,t){var r={value:null,type:"ws-control"},i=e.name.trim();if("control"===i)r.value=e.attribs["data-component"];else if(l.isLibraryModuleString(i))r.libPath=l.splitModule(i),r.value=r.libPath.fullName,r.type="ws-module";else r.value=t?t(i):i;return r},isTag:function n(e){return l.toEqual(e,"tag")||l.toEqual(e,"style")||l.toEqual(e,"script")},isText:function n(e){return l.toEqual(e,"text")},isDirective:function n(e){return l.toEqual(e,"directive")},isComment:function n(e){return l.toEqual(e,"comment")},isTagRequirable:function n(e,t,r,i){return F.call(this,e,t,r,false,i)},isTagRequirableBool:function n(e,t){return F.call(this,e,t,true,true)},isWsControl:function n(e){return e.children&&e.children[0]&&e.children[0].fn&&(t.isControlString(e.children[0].fn)||t.isSlashedControl(e.children[0].fn))},isModule:function n(e){return e.children&&e.children[0]&&"module"===e.children[0].type},isTemplate:function n(e){return e.children&&e.children[0]&&e.children[0].fn},loadModuleFunction:function n(e,t,r,i){var u;return e.call(this,t,r,i).call(this,i)},moduleMatcher:function n(e){var t=f(e.name);return void 0!==this._modules[t]?this._modules[t].module:false},findFunctionCase:function n(e,t,r){var i=l.capitalize(e.type),u=t+i;if(l.findInArray(e.type,this.config.ignored))return;if(k.isTag(e.type))return this[t+"Tag"](e.name,r);return k["is"+i]?this[u]:void 0},splitWs:f,splitJs:function n(e){var t;return(t=e.split("js!"))[1]},splitHtml:function n(e){var t;return(t=e.split("html!"))[1]},splitWml:function n(e){var t;return(t=e.split("wml!"))[1]},splitTmpl:function n(e){var t;return(t=e.split("tmpl!"))[1]},splitOptional:function n(e){var t;return(t=e.split("optional!"))[1]},slashedControl:function n(e){var t;return e.split("/")[1]},resolveModuleName:function n(e,t,r){return e?V(e,r):W.call(this,t)},checkForKeys:function n(e){if("tag"===e.type)return"ws:template"!==e.name;return false},getJsModuleByName:x,replaceDotsOnSlashes:N,cleverReplaceDotsOnDivider:j};return k});