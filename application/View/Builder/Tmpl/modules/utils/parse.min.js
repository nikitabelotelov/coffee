define("View/Builder/Tmpl/modules/utils/parse",["View/Builder/Tmpl/modules/data/utils/functionStringCreator","View/Builder/Tmpl/modules/utils/common","View/Builder/Tmpl/expressions/process","View/Builder/Tmpl/expressions/statement","View/Builder/Tmpl/expressions/bind","View/Builder/Tmpl/expressions/event","View/Executor/Expressions","Core/helpers/Object/isEmpty"],function t(w,g,v,x,A,E,y,r){"use strict";var m=function t(e,r,i){if(e&&e.partial)r.push("template");return e?!~r.indexOf(i):true},e=function t(e){return JSON.stringify(w.wrapAroundExec(e,true))},C=function t(e,r,i,s,a){var n="",o=e&&e.data,l;if(!o)return e;if(o.length){if(1===o.length)return v(o[0],r,this.calculators,this.filename,i,s,a),o[0].value;for(l=0;l<o.length;l++)v(o[l],r,this.calculators,this.filename,i,s,a),n+=o[l].value;return n}return v(o,r,this.calculators,this.filename,i,s,a)};return{parseAttributesForData:function t(e,r,i,s){var a,n={},o="scope",l="attributes",u,c,f={},p={},d=e.attribs,h=[o,l,"class","data-access","_wstemplatename"];if(e.rootConfig)e.rootConfig.esc=false;if(void 0!==d){if(d[o]&&d[o].data)if(u=d[o].data,n=v(u[0],r,this.calculators,this.filename),g.isString(n)){if(g.isOptionsExpression(u[0]))n=w.injectFunctionCall("thelpers.filterOptions",[n]);f.createdscope=n,f.obj={},n={}}for(a in d)if(d.hasOwnProperty(a)&&m(s,h,a)&&d[a])c=i?i+"/"+a:a,p[a]=C.call(this,d[a],r,e.isControl,e.rootConfig||p,c);if(f.createdscope){if(g.isEmpty(p))f.obj=n;else f.obj=g.plainMergeAttrs(p,n);return f}}return g.plainMergeAttrs(p,n)},parseInternalForData:function t(e,r,i,s,a){for(var n in e)if(e.hasOwnProperty(n)){var o=i?i+"/"+n:n;e[n]=C.call(this,e[n],r,s,a||e,o)}return e},parseAttributesForDecoration:function t(e,r,i,s,a){var n,o={},l=true,u={attributes:{},events:{},key:w.wrapAroundExec('key+"'+a.key+'"'),inheritOptions:w.wrapAroundExec("attr?attr.inheritOptions:{}"),internal:w.wrapAroundExec("attr?attr.internal:{}"),context:w.wrapAroundExec("attr?attr.context:{}")};if(e){if(g.checkProp(e,"attributes"))n=C.call(this,e["attributes"],r,void 0,{composite:true});for(var c in e)if(A.isBind(c)){var f=A.getSourceFieldName(c),p=A.getTargetFieldName(e[c]),d=A.getEventAttributeName(c),h=A.getEventObjectForBind.call(this,e[c],c,r,s);if(void 0===u.events[d.toLowerCase()])u.events[d.toLowerCase()]=h;else u.events[d.toLowerCase()].unshift(h[0]);e[f]={data:[x.processProperty(p)],type:"text"},delete e[c]}else if(E.isEvent(c)){var v=E.processEventAttribute.call(this,e[c],c,r,s),m=c.toLowerCase();if(void 0===u.events[m])u.events[m]=v;else u.events[m].push(v[0]);delete e[c]}else if(y.Attr.isAttr(c))l=false,u.attributes[c]=C.call(this,e[c],r,s,e,c),delete e[c];else if("class"===c||"tabindex"===c||"data-access"===c)o["attr:"+c]=C.call(this,e[c],r,s,e,c);if(l)for(var b in o)if(o.hasOwnProperty(b))u.attributes[b]=o[b],delete e[b.split("attr:")[1]];if(g.isString(n))u.attributes=w.wrapAroundExec(w.injectFunctionCall("thelpers.attrExpressions.processMergeAttributes",[n,w.getStr(u.attributes)]),true);return u.events=w.wrapAroundExec('typeof window === "undefined"?{}:'+w.getStr(u.events)),u}return},attributeParserMatcherByName:function t(e){return void 0!==e?this._attributeModules[e].module:false},attributeMatcherByName:function t(e){return void 0!==e?this._attributeModules[e].parse:false},parserMatcher:function t(e){return void 0!==this._modules[e.name]?this._modules[e.name].parse:false},checkForAttributes:function t(e){if(e.attribs&&r(e.attribs))e.attribs=void 0;return e}}});