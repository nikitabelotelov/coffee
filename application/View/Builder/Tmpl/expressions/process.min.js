define("View/Builder/Tmpl/expressions/process",["View/Builder/Tmpl/expressions/types","View/Builder/Tmpl/handlers/error","View/Builder/Tmpl/modules/utils/common","View/Builder/Tmpl/modules/data/utils/functionStringCreator"],function e(d,m,g,y){"use strict";function r(e){return 0===e.indexOf("__dirtyCheckingVars")}function t(e){if(e){if(g.isString(e))return true;return 0===Object.keys(e).filter(r).length}return false}function n(e,r,t){if(r)return"markupGenerator.escape("+e+")";else if(t)return"thelpers.Sanitize.apply(undefined, ["+e+"])";else return e}function w(e){return"thelpers.rk("+e+")"}function x(e,r,t){if(g.isString(e))return n(e,r,t);return e}function h(e,r,t){if("string"!==typeof r)return y.wrapAroundEntity(JSON.stringify(r));else if("ObjectExpression"===e.expression.type||"ArrayExpression"===e.expression.type)return y.wrapAroundObject(r);else{if(t)return r;return y.wrapAroundExec(r,true)}}return function e(r,t,n,i,u,s,a,l){var o,p,c,f=s&&void 0!==s.esc?false:true;if("var"===r.type)if(r.localized)return c=r.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),c=w(c=y.wrapAroundQuotes(c)),r.value=y.wrapAroundExec(c,true),c;else if("Program"===r.name.type){if(s)r.noEscape=true;if(p=r.name.body,d.calculators=n,d.filename=i,d.attributeName=a,u)d.isControl=u;for(d.configObject=s||{},d.attributeName=a,o=0;o<p.length;o++)if(d[p[o].type]){if(d.escape=f,d.sanitize=true,c=d[p[o].type].call(d,p[o],t),!r.noEscape)c=x(c,d.escape,d.sanitize);return r.value=h(p[o],c,d.configObject.composite),c}}else m("Something wrong with the expression given",i);else if(r.value&&l)return c=(c=r.value).replace(/\\/g,"\\\\").replace(/"/g,'\\"'),c=g.escape(c);else return r.value}});