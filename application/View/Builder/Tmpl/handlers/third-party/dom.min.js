define("View/Builder/Tmpl/handlers/third-party/dom",function(){return function(n){var i={};function a(t){if(i[t])return i[t].exports;var e=i[t]={exports:{},id:t,loaded:false};return n[t].call(e.exports,e,e.exports,a),e.loaded=true,e.exports}return a.m=n,a.c=i,a.p="",a(0)}([function(t,e,n){var a=n(1),o=/\s+/g,r=n(2),s=n(3);function i(t,e,n){if("object"===typeof t)n=e,e=t,t=null;else if("function"===typeof e)n=e,e=p;this._callback=t,this._options=e||p,this._elementCB=n,this.dom=[],this._done=false,this._tagStack=[],this._parser=this._parser||null}var p={normalizeWhitespace:false,withStartIndices:false};i.prototype.onparserinit=function(t){this._parser=t},i.prototype.onreset=function(){i.call(this,this._callback,this._options,this._elementCB)},i.prototype.onend=function(){if(this._done)return;this._done=true,this._parser=null,this._handleCallback(null)},i.prototype._handleCallback=i.prototype.onerror=function(t){if("function"===typeof this._callback)this._callback(t,this.dom);else if(t)throw t},i.prototype.onclosetag=function(t,e,n){var i=this._tagStack.pop();if(this._elementCB)this._elementCB(i)},i.prototype._addDomElement=function(t){var e=this._tagStack[this._tagStack.length-1],n=e?e.children:this.dom,i=n[n.length-1];if(t.next=null,this._options.withStartIndices)t.startIndex=this._parser.startIndex;if(this._options.withDomLvl1)t.__proto__="tag"===t.type?s:r;if(i)(t.prev=i).next=t;else t.prev=null;n.push(t),t.parent=e||null},i.prototype.onopentag=function(t,e){var n={type:"script"===t?a.Script:"style"===t?a.Style:a.Tag,name:t,attribs:e,children:[]};this._addDomElement(n),this._tagStack.push(n)},i.prototype.ontext=function(t){var e=this._options.normalizeWhitespace||this._options.ignoreWhitespace,n,i;if(!this._tagStack.length&&this.dom.length&&(n=this.dom[this.dom.length-1]).type===a.Text)if(e){if(" "!==(i=(n.data+t).replace(o," ")))n.data=i}else n.data+=t;else if(this._tagStack.length&&(n=this._tagStack[this._tagStack.length-1])&&(n=n.children[n.children.length-1])&&n.type===a.Text)if(e){if(" "!==(i=(n.data+t).replace(o," ")))n.data=i}else n.data+=t;else if(e){if(" "!==(i=t.replace(o," ")))t=t.replace(o," "),this._addDomElement({data:t,type:a.Text})}else this._addDomElement({data:t,type:a.Text})},i.prototype.oncomment=function(t){var e=this._tagStack[this._tagStack.length-1];if(e&&e.type===a.Comment)return void(e.data+=t);var n={data:t,type:a.Comment};this._addDomElement(n),this._tagStack.push(n)},i.prototype.oncdatastart=function(){var t={children:[{data:"",type:a.Text}],type:a.CDATA};this._addDomElement(t),this._tagStack.push(t)},i.prototype.oncommentend=i.prototype.oncdataend=function(){this._tagStack.pop()},i.prototype.onprocessinginstruction=function(t,e){this._addDomElement({name:t,data:e,type:a.Directive})},t.exports=i},function(t,e){t.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(t){return"tag"===t.type||"script"===t.type||"style"===t.type}}},function(t,e){var n=t.exports={firstChild:function(){var t=this.children;return t&&t[0]||null},lastChild:function(){var t=this.children;return t&&t[t.length-1]||null},nodeType:function(){return a[this.type]||a.element}},i={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},a={element:1,text:3,cdata:4,comment:8};for(var o in Object.keys(i))if(i.hasOwnProperty(o))n[o]=i[o]},function(t,e,n){var i=n(2),a=t.exports=Object.create(i),o={tagName:"name"};for(var r in Object.keys(o))if(o.hasOwnProperty(r))a[r]=o[r]}])});