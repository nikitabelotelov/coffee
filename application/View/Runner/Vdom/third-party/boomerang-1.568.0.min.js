function BOOMR_check_doc_domain(t){var e;if(!window)return;if(!t){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{if(BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain)BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain}catch(e){if(!BOOMR.isCrossOriginError(e))BOOMR.addError(e,"BOOMR_check_doc_domain.domainFix")}t=document.domain}if(-1===t.indexOf("."))return;try{return void(e=window.parent.document)}catch(e){document.domain=t}try{return void(e=window.parent.document)}catch(e){t=t.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(t)}BOOMR_start=(new Date).getTime(),BOOMR_check_doc_domain(),function(c){var d,t,m,o,a,e,r,n=c;if(c.parent!==c&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase())c=c.parent;if(m=c.document,!c.BOOMR)c.BOOMR={};if(BOOMR=c.BOOMR,BOOMR.version)return;if(BOOMR.version="1.568.0",BOOMR.window=c,BOOMR.boomerang_frame=n,!BOOMR.plugins)BOOMR.plugins={};if(function(){try{if(void 0!==new c.CustomEvent("CustomEvent"))o=function(e,t){return new c.CustomEvent(e,t)}}catch(e){}try{if(!o&&m.createEvent&&m.createEvent("CustomEvent"))o=function(e,t){var n=m.createEvent("CustomEvent");return t=t||{cancelable:false,bubbles:false},n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}catch(e){}if(!o&&m.createEventObject)o=function(e,t){var n=m.createEventObject();return n.type=n.propertyName=e,n.detail=t.detail,n};if(!o)o=function(){return}}(),a=function(t,e,n){var i=o(t,{detail:e});if(!i)return;function r(){try{if(m.dispatchEvent)m.dispatchEvent(i);else if(m.fireEvent)m.fireEvent("onpropertychange",i)}catch(e){BOOMR.debug("Error when dispatching "+t)}}if(n)BOOMR.setImmediate(r);else r()},"undefined"!==typeof m.hidden)e="visibilityState",r="visibilitychange";else if("undefined"!==typeof m.mozHidden)e="mozVisibilityState",r="mozvisibilitychange";else if("undefined"!==typeof m.msHidden)e="msVisibilityState",r="msvisibilitychange";else if("undefined"!==typeof m.webkitHidden)e="webkitVisibilityState",r="webkitvisibilitychange";if(d={beacon_url:"",beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:void 0,site_domain:c.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:true,hasSentPageLoadBeacon:false,r:void 0,r2:void 0,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],xhr_send:[],xhr_error:[],error:[],xhr_send:[],netinfo:[],rage_click:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},localStorageSupported:false,LOCAL_STORAGE_PREFIX:"_boomr_",xb_handler:function(n){return function(e){var t;if(!e)e=c.event;if(e.target)t=e.target;else if(e.srcElement)t=e.srcElement;if(3===t.nodeType)t=t.parentNode;if(t&&t.nodeName&&"OBJECT"===t.nodeName.toUpperCase()&&"application/x-shockwave-flash"===t.type)return;d.fireEvent(n,t)}},clearEvents:function(){var e;for(e in this.events)if(this.events.hasOwnProperty(e))this.events[e]=[]},clearListeners:function(){var e,t;for(e in d.listenerCallbacks)if(d.listenerCallbacks.hasOwnProperty(e))while(d.listenerCallbacks[e].length)BOOMR.utils.removeListener(d.listenerCallbacks[e][0].el,e,d.listenerCallbacks[e][0].fn);d.listenerCallbacks={}},fireEvent:function(t,e){var n,i,r,o;if(t=t.toLowerCase(),this.translate_events[t])t=this.translate_events[t];if(!this.events.hasOwnProperty(t))return;if(this.public_events.hasOwnProperty(t))a(this.public_events[t],e);if(r=this.events[t],"before_beacon"!==t&&"beacon"!==t)BOOMR.real_sendBeacon();for(o=r.length,n=0;n<o;n++)try{(i=r[n]).fn.call(i.scope,e,i.cb_data)}catch(e){BOOMR.addError(e,"fireEvent."+t+"<"+n+">")}for(n=0;n<o;n++)if(r[n].once)r.splice(n,1),o--,n--;return},spaNavigation:function(){d.onloadfired=true},beaconUrlAllowed:function(e){if(!d.beacon_urls_allowed||0===d.beacon_urls_allowed.length)return true;for(var t=0;t<d.beacon_urls_allowed.length;t++){var n;if(new RegExp(d.beacon_urls_allowed[t]).exec(e))return true}return false},checkLocalStorageSupport:function(){var e=d.LOCAL_STORAGE_PREFIX+"clss";if(d.localStorageSupported=false,!c.JSON||!c.localStorage)return;try{c.localStorage.setItem(e,e),d.localStorageSupported=c.localStorage.getItem(e)===e,c.localStorage.removeItem(e)}catch(e){d.localStorageSupported=false}}},(t={t_start:BOOMR_start,t_end:void 0,url:"",loadedLate:false,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},utils:{hasPostMessageSupport:function(){if(!c.postMessage||"function"!==typeof c.postMessage&&"object"!==typeof c.postMessage)return false;return true},objectToString:function(e,t,n){var i=[],r;if(!e||"object"!==typeof e)return e;if(void 0===t)t="\n\t";if(!n)n=0;if(BOOMR.utils.isArray(e)){for(r=0;r<e.length;r++)if(n>0&&null!==e[r]&&"object"===typeof e[r])i.push(this.objectToString(e[r],t+("\n\t"===t?"\t":""),n-1));else if("&"===t)i.push(encodeURIComponent(e[r]));else i.push(e[r]);t=","}else for(r in e)if(Object.prototype.hasOwnProperty.call(e,r))if(n>0&&null!==e[r]&&"object"===typeof e[r])i.push(encodeURIComponent(r)+"="+this.objectToString(e[r],t+("\n\t"===t?"\t":""),n-1));else if("&"===t)i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));else i.push(r+"="+e[r]);return i.join(t)},getCookie:function(e){if(!e)return null;var t,n;if(e=" "+e+"=",(t=(n=" "+m.cookie+";").indexOf(e))>=0)return t+=e.length,n=n.substring(t,n.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")},setCookie:function(e,t,n){var i,r,o,a,s;if(!e||!d.site_domain||"undefined"===typeof t)return BOOMR.debug("Invalid parameters or site domain: "+e+"/"+t+"/"+d.site_domain),BOOMR.addVar("nocookie",1),false;if((r=e+'="'+(i=this.objectToString(t,"&"))+'"').length<500){if(a=[r,"path=/","domain="+d.site_domain],"number"===typeof n)(s=new Date).setTime(s.getTime()+1e3*n),s=s.toGMTString(),a.push("expires="+s);if(m.cookie=a.join("; "),i===(o=this.getCookie(e))||"undefined"===typeof o&&"number"===typeof n&&n<=0)return true;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+i+"\n"+o)}else BOOMR.warn("Cookie too long: "+r.length+" "+r);return BOOMR.addVar("nocookie",1),false},getSubCookies:function(e){var t,n,i,r,o=false,a={};if(!e)return null;if("string"!==typeof e)return BOOMR.debug("TypeError: cookie is not a string: "+typeof e),null;for(n=0,i=(t=e.split("&")).length;n<i;n++)if((r=t[n].split("="))[0])r.push(""),a[decodeURIComponent(r[0])]=decodeURIComponent(r[1]),o=true;return o?a:null},removeCookie:function(e){return this.setCookie(e,{},-86400)},getLocalStorage:function(e){var t,n;if(!e||!d.localStorageSupported)return null;try{if(null===(t=c.localStorage.getItem(d.LOCAL_STORAGE_PREFIX+e)))return;n=c.JSON.parse(t)}catch(e){return BOOMR.warn(e),null}if(!n||"object"!==typeof n.items)return this.removeLocalStorage(e),null;if("number"===typeof n.expires)if(BOOMR.now()>=n.expires)return void this.removeLocalStorage(e);return n.items},setLocalStorage:function(e,t,n){var i,r,o;if(!e||!d.localStorageSupported||"object"!==typeof t)return false;if(i={items:t},"number"===typeof n)i.expires=BOOMR.now()+1e3*n;if((r=c.JSON.stringify(i)).length<5e4){try{if(c.localStorage.setItem(d.LOCAL_STORAGE_PREFIX+e,r),r===(o=c.localStorage.getItem(d.LOCAL_STORAGE_PREFIX+e)))return true}catch(e){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+r+"\n"+o)}else BOOMR.warn("Storage items too large: "+r.length+" "+r);return false},removeLocalStorage:function(e){if(!e||!d.localStorageSupported)return false;try{return c.localStorage.removeItem(d.LOCAL_STORAGE_PREFIX+e),true}catch(e){}return false},cleanupURL:function(e,t){if(!e||BOOMR.utils.isArray(e))return"";if(d.strip_query_string)e=e.replace(/\?.*/,"?qs-redacted");if("undefined"!==typeof t&&e&&e.length>t){var n=e.indexOf("?");if(-1!==n&&n<t)e=e.substr(0,n)+"?...";else e=e.substr(0,t-3)+"..."}return e},hashQueryString:function(e,t){if(!e)return e;if(!e.match)return BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e),"";if(e.match(/^\/\//))e=location.protocol+e;if(!e.match(/^(https?|file):/))return BOOMR.error("Passed in URL is invalid: "+e),"";if(t)e=e.replace(/#.*/,"");if(!BOOMR.utils.MD5)return e;return e.replace(/\?([^#]*)/,function(e,t){return"?"+(t.length>10?BOOMR.utils.MD5(t):t)})},pluginConfig:function(e,t,n,i){var r,o=0;if(!t||!t[n])return false;for(r=0;r<i.length;r++)if(void 0!==t[n][i[r]])e[i[r]]=t[n][i[r]],o++;return o>0},arrayFilter:function(e,t){var n=[];if(!(this.isArray(e)||e&&"number"===typeof e.length)||"function"!==typeof t)return n;if("function"===typeof e.filter)n=e.filter(t);else{var i=-1,r=e.length,o;while(++i<r)if(t(o=e[i],i,e))n[n.length]=o}return n},arrayFind:function(e,t){if(!(this.isArray(e)||e&&"number"===typeof e.length)||"function"!==typeof t)return;if("function"===typeof e.find)return e.find(t);else{var n=-1,i=e.length,r;while(++n<i)if(t(r=e[n],n,e))return r;return}},isMutationObserverSupported:function(){var e;return!(c&&c.navigator&&c.navigator.userAgent&&c.navigator.userAgent.match(/Trident.*rv[ :]*11\./))&&c&&c.MutationObserver&&"function"===typeof c.MutationObserver},addObserver:function(e,t,n,i,r,o){var a={observer:null,timer:null};if(!this.isMutationObserverSupported()||!i||!e)return null;function s(e){var t=false;if(a.timer)clearTimeout(a.timer),a.timer=null;if(i)if(!(t=i.call(o,e,r)))i=null;if(!t&&a.observer)a.observer.disconnect(),a.observer=null;if("number"===typeof t&&t>0)a.timer=setTimeout(s,t)}if(a.observer=new BOOMR.window.MutationObserver(s),n)a.timer=setTimeout(s,a.timeout);return a.observer.observe(e,t),a},addListener:function(e,t,n,i){var r=false;if(e.addEventListener){if(i&&BOOMR.browser.supportsPassive())r={capture:false,passive:true};e.addEventListener(t,n,r)}else if(e.attachEvent)e.attachEvent("on"+t,n);d.listenerCallbacks[t]=d.listenerCallbacks[t]||[],d.listenerCallbacks[t].push({el:e,fn:n})},removeListener:function(e,t,n){var i;if(e.removeEventListener)e.removeEventListener(t,n,false);else if(e.detachEvent)e.detachEvent("on"+t,n);if(d.listenerCallbacks.hasOwnProperty(t))for(var i=0;i<d.listenerCallbacks[t].length;i++)if(n===d.listenerCallbacks[t][i].fn&&e===d.listenerCallbacks[t][i].el)return void d.listenerCallbacks[t].splice(i,1)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},inArray:function(e,t){var n;if("undefined"===typeof e||"undefined"===typeof t||!t.length)return false;for(n=0;n<t.length;n++)if(t[n]===e)return true;return false},getQueryParamValue:function(e,t){var n,i,r,o;if(!e)return null;if("string"===typeof t)(n=BOOMR.window.document.createElement("a")).href=t;else if("object"===typeof t&&"string"===typeof t.search)n=t;else n=BOOMR.window.location;for(i=n.search.slice(1).split(/&/),r=0;r<i.length;r++)if(i[r])if((o=i[r].split("=")).length&&o[0]===e)return decodeURIComponent(o[1].replace(/\+/g," "));return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n;return("x"===e?t:3&t|8).toString(16)})},generateId:function(e){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,e||40).replace(/x/g,function(e){var e;if("0"===(e=(Math.random()||.01).toString(36)))return"0";else return e.substr(2,1)})},serializeForUrl:function(e){if(BOOMR.utils.Compression&&BOOMR.utils.Compression.jsUrl)return BOOMR.utils.Compression.jsUrl(e);if(window.JSON)return JSON.stringify(e);return BOOMR.debug("JSON is not supported"),""},getMyURL:function(){var t,e=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as");if(e)return e.src;var n=document.getElementsByTagName("script"),i;for(i=n.length;i--;)if("interactive"===n[i].readyState)return n[i].src;try{throw new Error}catch(e){if("stack"in e)if((t=this.arrayFilter(e.stack.split(/\n/),function(e){return e.match(/https?:\/\//)}))&&t.length)return t[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}return""},scroll:function(){var e=void 0!==c.pageXOffset,t="CSS1Compat"===(c.document.compatMode||""),n={x:0,y:0};if(e)if("function"===typeof c.pageXOffset)n.x=c.pageXOffset(),n.y=c.pageYOffset();else n.x=c.pageXOffset,n.y=c.pageYOffset;else if(t)n.x=c.document.documentElement.scrollLeft,n.y=c.document.documentElement.scrollTop;else n.x=c.document.body.scrollLeft,n.y=c.document.body.scrollTop;if("number"===typeof n.sx)n.sx=Math.round(n.sx);if("number"===typeof n.sy)n.sy=Math.round(n.sy);return n},windowHeight:function(){return c.innerHeight||c.document.documentElement.clientHeight||c.document.body.clientHeight},windowWidth:function(){return c.innerWidth||c.document.documentElement.clientWidth||c.document.body.clientWidth}},browser:{results:{},supportsPassive:function(){if("undefined"===typeof BOOMR.browser.results.supportsPassive){if(BOOMR.browser.results.supportsPassive=false,!Object.defineProperty)return false;try{var e=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=true}});window.addEventListener("test",null,e)}catch(e){}}return BOOMR.browser.results.supportsPassive}},init:function(e){var t,n,i=["autorun","beacon_auth_key","beacon_auth_token","beacon_url","beacon_type","site_domain","strip_query_string","user_ip"];if(BOOMR_check_doc_domain(),!e)e={};if(void 0!==e.log)this.log=e.log;if(!this.log)this.log=function(){};if(!this.pageId)this.pageId=BOOMR.utils.generateId(8),BOOMR.debug("Generated PageID: "+this.pageId);if(e.primary&&d.handlers_attached)return this;if("undefined"!==typeof e.autorun)d.autorun=e.autorun;for(n in this.plugins)if(this.plugins.hasOwnProperty(n)){if(e[n]&&e[n].hasOwnProperty("enabled")&&false===e[n].enabled){if(d.disabled_plugins[n]=1,"function"===typeof this.plugins[n].disable)this.plugins[n].disable();continue}if(d.disabled_plugins[n]){if(!e[n]||!e[n].hasOwnProperty("enabled")||true!==e[n].enabled)continue;if("function"===typeof this.plugins[n].enable)this.plugins[n].enable();delete d.disabled_plugins[n]}if("function"===typeof this.plugins[n].init)try{this.plugins[n].init(e)}catch(e){BOOMR.addError(e,n+".init")}}for(t=0;t<i.length;t++)if(void 0!==e[i[t]])d[i[t]]=e[i[t]];if(d.handlers_attached)return this;if(!d.onloadfired&&(void 0===e.autorun||false!==e.autorun)){if(BOOMR.hasBrowserOnloadFired())BOOMR.loadedLate=true;BOOMR.attach_page_ready(BOOMR.page_ready_autorun)}return BOOMR.utils.addListener(c,"DOMContentLoaded",function(){d.fireEvent("dom_loaded")}),BOOMR.fireEvent("config",e),BOOMR.subscribe("config",function(e){if(e.beacon_url)d.beacon_url=e.beacon_url}),BOOMR.subscribe("spa_navigation",d.spaNavigation,null,d),function(){var e,t;if(void 0!==r)BOOMR.utils.addListener(m,r,function(){d.fireEvent("visibility_changed")}),d.lastVisibilityState=BOOMR.visibilityState(),BOOMR.subscribe("visibility_changed",function(){var e=BOOMR.visibilityState();if(BOOMR.lastVisibilityEvent[e]=BOOMR.now(),BOOMR.debug("Visibility changed from "+d.lastVisibilityState+" to "+e),"prerender"===d.lastVisibilityState&&"prerender"!==e)BOOMR.addVar("vis.pre","1"),d.fireEvent("prerender_to_visible");d.lastVisibilityState=e});for(BOOMR.utils.addListener(m,"mouseup",d.xb_handler("click")),e=m.getElementsByTagName("form"),t=0;t<e.length;t++)BOOMR.utils.addListener(e[t],"submit",d.xb_handler("form_submit"));if(!c.onpagehide&&null!==c.onpagehide)BOOMR.utils.addListener(c,"unload",function(){BOOMR.window=c=null})}(),d.handlers_attached=true,this},attach_page_ready:function(e){if(BOOMR.hasBrowserOnloadFired())this.setImmediate(e,null,null,BOOMR);else if(c.onpagehide||null===c.onpagehide)BOOMR.utils.addListener(c,"pageshow",e);else BOOMR.utils.addListener(c,"load",e)},page_ready_autorun:function(e){if(d.autorun)BOOMR.page_ready(e,true)},page_ready:function(e,t){var n;if(!t&&"number"===typeof e)n=e,e=null;if(!e)e=c.event;if(!e)e={name:"load"};if(!t){if(e.timing=e.timing||{},n)e.timing.loadEventEnd=n;else if("number"===typeof c.BOOMR_page_ready)e.timing.loadEventEnd=c.BOOMR_page_ready;else e.timing.loadEventEnd=BOOMR.now();BOOMR.addVar("pr",1,true)}else if("number"===typeof c.BOOMR_page_ready)e.timing=e.timing||{},e.timing.loadEventEnd=c.BOOMR_page_ready,BOOMR.addVar("pr",1,true);if(d.onloadfired)return this;return d.fireEvent("page_ready",e),d.onloadfired=true,this},hasBrowserOnloadFired:function(){var e=BOOMR.getPerformance();return m.readyState&&"complete"===m.readyState||e&&e.timing&&e.timing.loadEventStart>0||c.BOOMR_onload>0},onloadFired:function(){return d.onloadfired},setImmediate:function(e,t,n,i){var r,o;if(r=function(){e.call(i||null,t,n||{},o),r=null},c.requestIdleCallback)c.requestIdleCallback(r,{timeout:1e3});else if(c.setImmediate)c.setImmediate(r);else setTimeout(r,10)},now:Date.now||function(){return(new Date).getTime()},getPerformance:function(){try{if(BOOMR.window){if("performance"in BOOMR.window&&BOOMR.window.performance)return BOOMR.window.performance;return BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}}catch(e){}},hrNow:function(){var e,t,n=BOOMR.getPerformance();if(n&&n.now)e=n.now();else t=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart()||BOOMR.t_lstart||BOOMR.t_start,e=BOOMR.now()-t;return e},visibilityState:void 0===e?function(){return"visible"}:function(){return m[e]},lastVisibilityEvent:{},registerEvent:function(e){if(d.events.hasOwnProperty(e))return this;return d.events[e]=[],this},disable:function(){d.clearEvents(),d.clearListeners()},fireEvent:function(e,t){return d.fireEvent(e,t)},subscribe:function(n,i,r,o,e){var t,a,s;if(n=n.toLowerCase(),d.translate_events[n])n=d.translate_events[n];if(!d.events.hasOwnProperty(n))d.events[n]=[];for(s=d.events[n],t=0;t<s.length;t++)if((a=s[t])&&a.fn===i&&a.cb_data===r&&a.scope===o)return this;if(s.push({fn:i,cb_data:r||{},scope:o||null,once:e||false}),"page_ready"===n&&d.onloadfired&&d.autorun)this.setImmediate(i,null,r,o);if("page_unload"===n||"before_unload"===n)(function(){var e,t=s.length;if(e=function(e){if(i)i.call(o,e||c.event,r);if("page_unload"===n&&t===d.events[n].length)BOOMR.real_sendBeacon()},"page_unload"===n)if(c.onpagehide||null===c.onpagehide)BOOMR.utils.addListener(c,"pagehide",e);else BOOMR.utils.addListener(c,"unload",e);BOOMR.utils.addListener(c,"beforeunload",e)})();return this},addError:function e(t,n,i){var r,o=BOOMR.plugins.Errors;if(o&&o.is_supported()){if("string"===typeof t)o.send({message:t,extra:i,functionName:n,noStack:true},o.VIA_APP,o.SOURCE_BOOMERANG);else{if("string"===typeof n)t.functionName=n;if("undefined"!==typeof i)t.extra=i;o.send(t,o.VIA_APP,o.SOURCE_BOOMERANG)}return}if("string"!==typeof t){if((r=String(t)).match(/^\[object/))r=t.name+": "+(t.description||t.message).replace(/\r\n$/,"");t=r}if(void 0!==n)t="["+n+":"+BOOMR.now()+"] "+t;if(i)t+=":: "+i;if(d.errors[t])d.errors[t]++;else d.errors[t]=1},isCrossOriginError:function(e){return"SecurityError"===e.name||"TypeError"===e.name&&"Permission denied"===e.message||"Error"===e.name&&e.message&&e.message.match(/^(Permission|Access is) denied/)},addVar:function(e,t,n){if("string"===typeof e)d.vars[e]=t;else if("object"===typeof e){var i=e,r;for(r in i)if(i.hasOwnProperty(r))d.vars[r]=i[r]}if(n)d.singleBeaconVars[e]=1;return this},appendVar:function(e,t){var n=BOOMR.getVar(e)||"";if(n)n+=",";return BOOMR.addVar(e,n+t),this},removeVar:function(e){var t,n;if(!arguments.length)return this;if(1===arguments.length&&BOOMR.utils.isArray(e))n=e;else n=arguments;for(t=0;t<n.length;t++)if(d.vars.hasOwnProperty(n[t]))delete d.vars[n[t]];return this},hasVar:function(e){return d.vars.hasOwnProperty(e)},getVar:function(e){return d.vars[e]},setVarPriority:function(e,t){if("number"!==typeof t||1!==Math.abs(t))return this;return d.varPriority[t][e]=1,this},setReferrer:function(e,t){if(d.r=e,t&&e!==t)d.r2=t;else d.r2=void 0},requestStart:function(t){var n=BOOMR.now();return BOOMR.plugins.RT.startTimer("xhr_"+t,n),{loaded:function(e){BOOMR.responseEnd(t,n,e)}}},readyToSend:function(){var e;for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(d.disabled_plugins[e])continue;if("function"===typeof this.plugins[e].readyToSend&&false===this.plugins[e].readyToSend())return BOOMR.debug("Plugin "+e+" is not ready to send"),false}return true},responseEnd:function(e,t,n,i){if(t="number"===typeof t?t:BOOMR.now(),i="number"===typeof i?i:BOOMR.now(),!BOOMR.readyToSend())return BOOMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again..."),void setTimeout(function(){BOOMR.responseEnd(e,t,n,i)},1e3);if(!BOOMR.hasSentPageLoadBeacon()&&!BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS))return void BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(e,t,n,i)},null,BOOMR,true);if("object"===typeof e){if(!e.url)return void BOOMR.debug("BOOMR.responseEnd: First argument must have a url property if it's an object");d.fireEvent("xhr_load",e)}else BOOMR.real_sendBeacon(),BOOMR.addVar("xhr.pg",e),BOOMR.plugins.RT.startTimer("xhr_"+e,t),d.fireEvent("xhr_load",{name:"xhr_"+e,data:n,timing:{loadEventEnd:i}})},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(e){if(e)d.beacon_url_override=e;if(!d.beaconQueued)d.beaconQueued=true,BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR);return true},real_sendBeacon:function(){var e,t,n,i=[],r=[],o,a={},s;if(!d.beaconQueued)return false;for(e in d.beaconQueued=false,BOOMR.debug("Checking if we can send beacon"),this.plugins)if(this.plugins.hasOwnProperty(e)){if(d.disabled_plugins[e])continue;if(!this.plugins[e].is_complete(d.vars))return BOOMR.debug("Plugin "+e+" is not complete, deferring beacon send"),false}if(!window||!window.Image||!window.navigator||!BOOMR.window)return BOOMR.debug("DOM not fully available, not sending a beacon"),false;var l=BOOMR.utils.inArray(d.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS),u="undefined"===typeof d.vars["http.initiator"]||l;if(!d.vars.pgu)d.vars.pgu=l?m.URL:m.URL.replace(/#.*/,"");if(d.vars.pgu=BOOMR.utils.cleanupURL(d.vars.pgu),!d.vars.u||l)d.vars.u=d.vars.pgu;if(d.vars.pgu===d.vars.u)delete d.vars.pgu;if(d.r)d.vars.r=BOOMR.utils.cleanupURL(d.r);else delete d.vars.r;if(d.r2)d.vars.r2=BOOMR.utils.cleanupURL(d.r2);else delete d.vars.r2;if(d.vars.v=BOOMR.version,BOOMR.visibilityState()){if(d.vars["vis.st"]=BOOMR.visibilityState(),BOOMR.lastVisibilityEvent.visible)d.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible;if(BOOMR.lastVisibilityEvent.hidden)d.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden}if(d.vars["ua.plt"]=navigator.platform,d.vars["ua.vnd"]=navigator.vendor,this.pageId)d.vars.pid=this.pageId;if(c!==window)s="if",d.vars[s]="";for(e in d.errors)if(d.errors.hasOwnProperty(e))i.push(e+(d.errors[e]>1?" (*"+d.errors[e]+")":""));if(i.length>0)d.vars.errors=i.join("\n");for(e in d.errors={},d.fireEvent("before_beacon",d.vars),d.vars)if(d.vars.hasOwnProperty(e))a[e]=d.vars[e];for(var f in BOOMR.removeVar("qt"),d.singleBeaconVars)if(d.singleBeaconVars.hasOwnProperty(f))BOOMR.removeVar(f);if(d.singleBeaconVars={},!d.hasSentPageLoadBeacon&&u)d.hasSentPageLoadBeacon=true,BOOMR.setImmediate(function(){d.fireEvent("page_load_beacon",a)});return BOOMR.sendBeaconData(a),true},hasSentPageLoadBeacon:function(){return d.hasSentPageLoadBeacon},sendBeaconData:function(e){var t=[],n=[],i,r,o,a,s=true,l,u;if(BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(e)),d.beacon_url=d.beacon_url_override||d.beacon_url,!d.beacon_url)return BOOMR.debug("No beacon URL, so skipping."),false;if(!d.beaconUrlAllowed(d.beacon_url))return BOOMR.debug("Beacon URL not allowed: "+d.beacon_url),false;if(0===e.length)return false;if(d.fireEvent("beacon",e),t=this.getVarsOfPriority(e,-1),n=this.getVarsOfPriority(e,1),r=(i=t.concat(this.getVarsOfPriority(e,0),n)).join("&"),o=d.beacon_url+(d.beacon_url.indexOf("?")>-1?"&":"?")+r,"POST"===d.beacon_type||o.length>BOOMR.constants.MAX_GET_LENGTH)s=false;if(c&&c.navigator&&"function"===typeof c.navigator.sendBeacon&&"function"===typeof c.Blob){var f=new c.Blob([r+"&sb=1"],{type:"application/x-www-form-urlencoded"});if(c.navigator.sendBeacon(d.beacon_url,f))return true}if(!BOOMR.orig_XMLHttpRequest&&(!c||!c.XMLHttpRequest))s=true;if(s){try{a=new Image}catch(e){return BOOMR.debug("Image is not a constructor, not sending a beacon"),false}a.src=o}else{l=new(BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(l,r)}catch(e){l=new BOOMR.boomerang_frame.XMLHttpRequest,this.sendXhrPostBeacon(l,r)}}return true},hasSentPageLoadBeacon:function(){return d.hasSentPageLoadBeacon},sendXhrPostBeacon:function(e,t){if(e.open("POST",d.beacon_url),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),"undefined"!==typeof d.beacon_auth_token){if("undefined"===typeof d.beacon_auth_key)d.beacon_auth_key="Authorization";e.setRequestHeader(d.beacon_auth_key,d.beacon_auth_token)}e.send(t)},getVarsOfPriority:function(e,t){var n,i=[];if(0!==t){for(n in d.varPriority[t])if(d.varPriority[t].hasOwnProperty(n))if(e.hasOwnProperty(n))i.push(this.getUriEncodedVar(n,e[n])),delete e[n]}else for(n in e)if(e.hasOwnProperty(n))i.push(this.getUriEncodedVar(n,e[n]));return i},getUriEncodedVar:function(e,t){if(void 0===t||null===t)t="";if("object"===typeof t)t=BOOMR.utils.serializeForUrl(t);var n;return encodeURIComponent(e)+"="+encodeURIComponent(t)},getResourceTiming:function(e,t){var n,i=BOOMR.getPerformance();try{if(i&&"function"===typeof i.getEntriesByName)if((n=i.getEntriesByName(e))&&n.length){if("function"===typeof t)n.sort(t);return n[n.length-1]}}catch(e){}}}).url=t.utils.getMyURL(),delete BOOMR_start,"number"===typeof BOOMR_lstart)t.t_lstart=BOOMR_lstart,delete BOOMR_lstart;else if("number"===typeof BOOMR.window.BOOMR_lstart)t.t_lstart=BOOMR.window.BOOMR_lstart;if("number"===typeof BOOMR.window.BOOMR_onload)t.t_onload=BOOMR.window.BOOMR_onload;(function(){var e;if("object"===typeof console&&void 0!==console.log)t.log=function(e,t,n){console.log("("+BOOMR.now()+") "+"{"+BOOMR.pageId+"}"+": "+n+": ["+t+"] "+e)};else t.log=function(){};e=function(n){return function(e,t){return this.log(e,n,"boomerang"+(t?"."+t:"")),this}},t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")})();try{var i=t.getPerformance();if(i&&"function"===typeof i.now&&/\[native code\]/.test(String(i.now))&&i.timing&&i.timing.navigationStart)t.now=function(){return Math.round(i.now()+i.timing.navigationStart)}}catch(e){}d.checkLocalStorageSupport(),function(){var e;for(e in t)if(t.hasOwnProperty(e))BOOMR[e]=t[e];if(!BOOMR.xhr_excludes)BOOMR.xhr_excludes={}}(),a("onBoomerangLoaded",{BOOMR:BOOMR},true)}(window),function(){if(BOOMR.plugins.Continuity)return;var w=100,e=6e4,n=500,S=0,p=1,R=2,b=0,g=1,y=2,u=3,a=4,s=5,m="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",O=".",T=BOOMR.getPerformance(),E={},x=T&&T.timing&&T.timing.navigationStart?T.timing.navigationStart:BOOMR.now();function k(e){BOOMR.debug(e,"Continuity")}function M(e){var t=window.UserTimingCompression||BOOMR.window.UserTimingCompression;if(t)return t.jsUrl(e);else if(window.JSON)return JSON.stringify(e);else return""}function P(e,t,n,i,r){var o="",a=0,s,l,u,f,c,d;if(!n||!BOOMR.utils.Compression)return"";if(0===n.length)return"";if(t){if("undefined"===typeof n[i])n[i]=0;for(s=i+1;s<=r;s++)if("undefined"===typeof n[s])n[s]=n[s-1]}for(s=i;s<=r;s++){if(a="number"===typeof n[s]&&!isNaN(n[s])?n[s]:0,e===S)if(a<=63)f=m.charAt(a);else f=O+a.toString(36)+O;else if(e===p)f=a.toString(36);else if(e===R)if(a<99)f=a<=9?"0"+Math.max(a,0):a;else f="__";if(s+3<=r&&(n[s+1]===a||0===a&&void 0===n[s+1])&&(n[s+2]===a||0===a&&void 0===n[s+2])&&(n[s+3]===a||0===a&&void 0===n[s+3])){u=1;while(s<r){if(n[s+1]===a||0===a&&void 0===n[s+1])u++;else break;s++}c="*"+u.toString(36)+"*"+f}else c=f;if(0!==a||s!==r){if(e===p)if(d)o+=",";d=true,o+=c}}return d?e.toString()+o:""}var t=function(u){var o=15,e,a=20/(1e3/w),s=50,f={},i={},r=[],l=0,c=0,d=0;if(BOOMR.fpsLog&&BOOMR.fpsLog.length)u=BOOMR.fpsLog[0]+x;function t(e,t,n){if(!f[e])f[e]=[];i[e]={compressMode:t?t:S,backfillLast:n}}function m(){return Math.floor((BOOMR.now()-u)/w)}function n(e,t,n){if("undefined"===typeof n)n=m();if(!f[e])return;f[e][n]=t}function O(e,t,n){if("undefined"===typeof n)n=m();if("undefined"===typeof t)t=1;if(!f[e])return;if(!f[e][n])f[e][n]=0;f[e][n]+=t}function p(e,t,n){if("undefined"===typeof t)t=m();if(r.push({type:e,time:t,val:n}),r.length>impl.logMaxEntries)Array.prototype.splice.call(r,0,r.length-impl.logMaxEntries)}function g(e,t){var n=0,i=0,r=1/0,o=0,a,s=Math.floor((t-u)/w);if(!f[e])return 0;for(var l in f[e])if((l=parseInt(l,10))>=s)if(f[e].hasOwnProperty(l))n++,i+=a=f[e][l],r=Math.min(r,a),o=Math.max(o,a);return{total:i,count:n,min:r,max:o}}function M(e){var t,n,i=0,r,o,a,s;if(!BOOMR.window||!BOOMR.window.document||"function"!==typeof BOOMR.window.document.querySelectorAll)return 0;if(!T||"function"!==typeof T.getEntriesByType)return 0;if(t=e+", "+e+" * img",(n=BOOMR.window.document.querySelectorAll(t))&&n.length)for(r=0;r<n.length;r++)if(a=n[r].src)if((s=T.getEntriesByName(a))&&s.length)for(o=0;o<s.length;o++)i=Math.max(i,s[o].responseEnd);return i?Math.floor(i+x):0}function h(){var e=0;if(impl.ttiWaitForFrameworkReady){if(!impl.frameworkReady)return;e=impl.frameworkReady}if(BOOMR.plugins.PaintTiming&&BOOMR.plugins.PaintTiming.is_supported()&&T&&T.timeOrigin){var t=BOOMR.plugins.PaintTiming.getTimingFor("first-contentful-paint");if(!t)t=BOOMR.plugins.PaintTiming.getTimingFor("first-paint");if(t)e=Math.max(e,Math.round(t+T.timeOrigin))}else if(T&&T.timing&&T.timing.msFirstPaint)e=Math.max(e,T.timing.msFirstPaint);else if(BOOMR.window&&BOOMR.window.chrome&&"function"===typeof BOOMR.window.chrome.loadTimes){var n=BOOMR.window.chrome.loadTimes();if(n&&n.firstPaintTime)e=Math.max(e,1e3*n.firstPaintTime)}if(T&&T.timing&&T.timing.domContentLoadedEventEnd)e=Math.max(e,T.timing.domContentLoadedEventEnd);if(impl.ttiWaitForHeroImages)if(d=M(impl.ttiWaitForHeroImages))e=Math.max(e,d);return e}function v(){for(var e="",t=0;t<r.length;t++){var n=r[t];if(0!==t)e+="|";for(var i in e+=n.type,e+=Math.round(n.time-x).toString(36),n.val)if(n.val.hasOwnProperty(i))if(e+=","+i,"number"===typeof n.val[i])e+=n.val[i].toString(36);else e+=n.val[i]}if(""!==e)impl.addToBeacon("c.l",e)}function B(e,t){return P(i[e].compressMode,i[e].backfillLast,f[e],0!==t?Math.floor((t-u)/w):0,m())}function y(e){var t,n;for(t in f)if(f.hasOwnProperty(t))if(""!==(n=B(t,e)))impl.addToBeacon("c.t."+t,n)}function R(e){var t=m(),n=0,i=0,r;if(impl.sendLog&&"undefined"!==typeof e)v();if(impl.sendTimeline&&"undefined"!==typeof e)y(e);if(l)return;if(!c)if(!(c=h()))return;if(impl.addToBeacon("c.tti.vr",E.timeToVisuallyReady()),impl.addToBeacon("c.tti.fr",E.timeToFrameworkReady()),impl.addToBeacon("c.tti.hi",E.timeToHeroImagesReady()),!f.longtask&&!f.fps&&!f.busy)return;for(n=Math.floor((c-u)/w);n<=t;n++){if(f.longtask&&f.longtask[n]){i=0;continue}if(f.fps&&(!f.fps[n]||f.fps[n]<a)){i=0;continue}if(f.busy&&f.busy[n]>s){i=0;continue}if(f.interdly&&f.interdly[n]){i=0;continue}if(++i>=o){l=u+(n-o)*w,l=Math.max(l,c);break}}if(l>0)impl.addToBeacon("c.tti",E.timeToInteractive())}function b(){f={},r=[]}function _(){for(var e in f)if(f.hasOwnProperty(e))f[e]=[];r=[]}return E.timeToInteractive=function(){if(l)return l-x;return},E.timeToVisuallyReady=function(){if(c)return c-x;return},E.timeToHeroImagesReady=function(){if(impl.ttiWaitForHeroImages&&d)return d-x;return},E.timeToFrameworkReady=function(){if(impl.ttiWaitForFrameworkReady&&impl.frameworkReady)return impl.frameworkReady-x;return},E.log=function(){return r},{register:t,set:n,log:p,increment:O,getTimeBucket:m,getStats:g,analyze:R,stop:b,onBeacon:_}},i=function(e,i){if(!e.PerformanceObserver||!e.PerformanceLongTaskTiming)return;var c={unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},d={unknown:0,script:1,layout:2},m={unknown:0,iframe:1,embed:2,object:3},t=new e.PerformanceObserver(n);try{t.observe({entryTypes:["longtask"]})}catch(e){return}i.register("longtask",S);var O=[],r=true,o=0;function n(e){var t,n;if(!r)return;for(t=e.getEntries(),Array.prototype.push.apply(O,t),n=0;n<t.length;n++)o+=t[n].duration;i.increment("longtask",t.length)}function a(){return O}function s(){O=[],o=0}function l(e){var t,n,i,r,o=[],a=[],s;if(0===O.length)return;for(t=0;t<O.length;t++){for(i=O[t],r={s:Math.round(i.startTime).toString(36),d:Math.round(i.duration).toString(36),n:c[i.name]?c[i.name]:0},a=[],n=0;n<i.attribution.length;n++){if("script"===(s=i.attribution[n]).name&&"iframe"===s.containerType&&!s.containerName&&!s.containerId&&!s.containerSrc)continue;var l=s.containerName?s.containerName:void 0,u=s.containerId?s.containerId:void 0;if(l===u)l=void 0;var f=void 0===u?s.containerSrc:void 0;a.push({a:d[s.name]?d[s.name]:0,t:m[s.containerType]?m[s.containerType]:0,n:l,i:u,s:f})}if(a.length>0)r.a=a;o.push(r)}impl.addToBeacon("c.lt.n",E.longTasksCount(),true),impl.addToBeacon("c.lt.tt",E.longTasksTime()),impl.addToBeacon("c.lt",M(o))}function u(){r=false,t.disconnect(),s()}function f(){s()}return E.longTasksTime=function(){return o},E.longTasksCount=function(){return O.length},{getTasks:a,clearTasks:s,analyze:l,stop:u,onBeacon:f}},r=function(e,i){i.register("busy",R);var r=32,o=4,t=100,a=Math.floor(t/r),s=100,l=BOOMR.now(),u=0,f=0,c=0,d=0,n=true,m=false,O=false;function p(){var e=BOOMR.now(),t=e-l;if(l=e,t>2*r+o){var n=Math.floor((t-r)/r);u+=n,f+=n,t-=n*r}if(u++,t>r+o)f++}function g(){var e=i.getTimeBucket(),t=e,n=0;if(0===u)return;while(u>a+1&&n<=s)i.set("busy",100,--t),u-=a,f=Math.max(f-a,0),c+=a,d+=a,n++;c+=u,d+=f,i.set("busy",Math.round(f/u*100),e),f=u=0}function M(e){impl.addToBeacon("c.b",E.pageBusy())}function h(){if(n=false,m)clearInterval(m),m=false;if(O)clearInterval(O),O=false}function v(){d=c=0}return E.pageBusy=function(){if(0===c)return 0;return Math.round(d/c*100)},m=setInterval(p,r),O=setInterval(g,t),{analyze:M,stop:h,onBeacon:v}},o=function(t,n){n.register("fps",S);var i=50,r=0,o=0,a,s,l=true;if(BOOMR.fpsLog&&BOOMR.fpsLog.length){s=a=BOOMR.fpsLog[0]+x;for(var e=0;e<BOOMR.fpsLog.length;e++){var u=x+BOOMR.fpsLog[e];if(n.increment("fps",1,Math.floor((u-a)/w)),u-s>=i)o++;s=u}r=BOOMR.fpsLog.length,delete BOOMR.fpsLog}else a=BOOMR.now();function f(e){if(!l)return;if(e-s>=i)o++;s=e,r++,n.increment("fps"),t.requestAnimationFrame(f)}function c(e){impl.addToBeacon("c.f",E.fps()),impl.addToBeacon("c.f.d",E.fpsDuration()),impl.addToBeacon("c.f.m",E.fpsMinimum()),impl.addToBeacon("c.f.l",E.fpsLongFrames()),impl.addToBeacon("c.f.s",E.fpsStart())}function d(){l=false,a=0}function m(){if(l)a=BOOMR.now();o=r=0}return t.requestAnimationFrame(f),E.fps=function(){var e=E.fpsDuration();if(e)return Math.floor(r/(e/1e3))},E.fpsDuration=function(){if(a)return BOOMR.now()-a},E.fpsMinimum=function(){var e;if(E.fpsDuration()){var t=n.getStats("fps",a).min;return t!==1/0?t:void 0}},E.fpsLongFrames=function(){return o},E.fpsStart=function(){return a?a.toString(36):0},{analyze:c,stop:d,onBeacon:m}},l=function(e,r,o){if(!e||!e.document||!e.document.body||!e.document.documentElement)return;var a=2e3,s=20,l=0,u=0,f=0,c=0,d=0,m=0,O=0,p=0,t=false,n=e.document.body,i=e.document.documentElement;r.register("scroll",S),r.register("scrollpct",R);var g=Math.max(n.scrollHeight,n.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)-BOOMR.utils.windowHeight();function M(e){var t=BOOMR.now();if(d++,t-p>a)O++;p=t;var n=BOOMR.utils.scroll().y,i=Math.abs(l-n);if(m+=i,r.increment("scroll",i),0===u||Math.abs(u-n)>s)r.log(b,t,{y:n}),u=n;o.interact("scroll",t,e),f+=Math.round(i/g*100),c+=Math.round(i/g*100),l=n}function h(){var e=Math.min(f,100);if(0!==e)r.set("scrollpct",e);f=0}function v(e){impl.addToBeacon("c.s",E.scrollCount()),impl.addToBeacon("c.s.p",E.scrollPct()),impl.addToBeacon("c.s.y",E.scrollPixels()),impl.addToBeacon("c.s.d",E.scrollDistinct())}function B(){if(t)clearInterval(t),t=false;BOOMR.utils.removeListener(e,"scroll",M)}function y(){O=m=d=c=0}return E.scrollPct=function(){return c},E.scrollCount=function(){return d},E.scrollDistinct=function(){return O},E.scrollPixels=function(){return m},BOOMR.utils.addListener(e,"scroll",M,true),t=setInterval(h,w),{analyze:v,stop:B,onBeacon:y}},f=function(e,o,a){o.register("click",S);var s=10,l=3,u=0,f=0,c=0,d=0,m=0,O=null;function t(e){var t=BOOMR.now(),n=e.clientX,i=e.clientY;u++;var r=Math.round(Math.sqrt(Math.pow(m-i,2)+Math.pow(d-n,2)));if(O===e.target||r<=s){if(++f+1>=l)c++,BOOMR.fireEvent("rage_click",e)}else f=0;d=n,m=i,O=e.target,o.increment("click"),o.log(g,t,{x:n,y:i}),a.interact("click",t,e)}function n(e){impl.addToBeacon("c.c",E.clicksCount()),impl.addToBeacon("c.c.r",E.clicksRage())}function i(){BOOMR.utils.removeListener(e.document,"click",t)}function r(){c=f=u=0}return E.clicksCount=function(){return u},E.clicksRage=function(){return c},BOOMR.utils.addListener(e.document,"click",t,true),{analyze:n,stop:i,onBeacon:r}},c=function(e,n,i){n.register("key",S);var r=0,o=0;function t(e){var t=BOOMR.now();if(r++,27===e.keyCode)o++;n.increment("key"),n.log(u,t),i.interact("key",t,e)}function a(e){impl.addToBeacon("c.k",E.keyCount()),impl.addToBeacon("c.k.e",E.keyEscapes())}function s(){BOOMR.utils.removeListener(e.document,"keydown",t)}function l(){o=r=0}return E.keyCount=function(){return r},E.keyEscapes=function(){return o},BOOMR.utils.addListener(e.document,"keydown",t,true),{analyze:a,stop:s,onBeacon:l}},d=function(e,a,t){a.register("mouse",S),a.register("mousepct",R);var n=10,i=250,s=0,l=0,r=0,o=0,u=0,f=0,c=0,d=false,m=false,O=Math.round(Math.sqrt(Math.pow(BOOMR.utils.windowHeight(),2)+Math.pow(BOOMR.utils.windowWidth(),2)));function p(e){var t=BOOMR.now(),n=e.clientX,i=e.clientY,r=Math.round(Math.sqrt(Math.pow(l-i,2)+Math.pow(s-n,2))),o=Math.round(r/O*100);u+=o,f+=o,c+=r,s=n,l=i,a.increment("mouse",r)}function g(){var e=Math.min(u,100);if(0!==e)a.set("mousepct",e);u=0}function M(){if(r!==s||o!==l){var e;if(Math.round(Math.sqrt(Math.pow(o-l,2)+Math.pow(r-s,2)))>=n)a.log(y,BOOMR.now(),{x:s,y:l}),r=s,o=l}}function h(e){impl.addToBeacon("c.m.p",E.mousePct()),impl.addToBeacon("c.m.n",E.mousePixels())}function v(){if(d)clearInterval(d),d=false;if(m)clearInterval(m),m=false;BOOMR.utils.removeListener(e.document,"mousemove",p)}function B(){c=f=0}return E.mousePct=function(){return f},E.mousePixels=function(){return c},d=setInterval(g,w),m=setInterval(M,i),BOOMR.utils.addListener(e.document,"mousemove",p,true),{analyze:h,stop:v,onBeacon:B}},h=function(e,r,t){r.register("inter",S),r.register("interdly",S);var o=50,a=t,s=3e4,l=0,u=null,f=0,c=0,d=0,m=0,O=true,p=0,g=0,M=false,h=false,v=false;function n(e,t,n){if(t=t||BOOMR.now(),!O)return;if(f++,!l)l=t;var i=0;if(n&&n.timeStamp){if(n.timeStamp>14e11)i=t-n.timeStamp;else i=t-x-n.timeStamp;if(c+=i,null===u)u=Math.round(i);if(i>o)r.increment("interdly"),d++,m+=i}if(r.increment("inter"),!v&&impl.afterOnloadMonitoring){if(g=BOOMR.now(),!p)k("Interaction detected, sending a beacon after "+a+" ms"),p=g,h=setTimeout(y,s);if(M)k("Clearing previous interaction timeout"),clearTimeout(M),M=false;M=setTimeout(y,a)}}function i(){v=true,B()}function B(){if(M)clearTimeout(M),M=false;if(h)clearTimeout(h),h=false}function y(){k("Sending interaction beacon"),B(),BOOMR.fireEvent("interaction"),impl.addToBeacon("rt.tstart",p),impl.addToBeacon("rt.end",g),impl.addToBeacon("rt.start","manual"),impl.addToBeacon("http.initiator","interaction"),BOOMR.sendBeacon()}function R(e){if(impl.addToBeacon("c.ttfi",E.timeToFirstInteraction()),impl.addToBeacon("c.i.dc",E.interactionDelayed()),impl.addToBeacon("c.i.dt",E.interactionDelayedTime()),impl.addToBeacon("c.i.a",E.interactionAvgDelay()),null!==u)impl.addToBeacon("c.fid",E.firstInputDelay(),true)}function b(){O=false}function _(){g=p=c=f=d=m=0,v=false,B()}return E.interactionDelayed=function(){return d},E.interactionDelayedTime=function(){return Math.round(m)},E.interactionAvgDelay=function(){if(f>0)return Math.round(c/f)},E.timeToFirstInteraction=function(){if(l)return l-x;return},E.firstInputDelay=function(){if(null!==u)return u;return},BOOMR.subscribe("spa_init",i,null,impl),{interact:n,analyze:R,stop:b,onBeacon:_}},v=function(e,n,i){n.register("vis",S);var r={visible:0,hidden:1,prerender:2,unloaded:3},o=true;function t(){o=false}return BOOMR.subscribe("visibility_changed",function(e){var t=BOOMR.now();if(!o)return;n.increment("vis"),n.log(a,t,{s:r[BOOMR.visibilityState()]}),i.interact("vis",t,e)}),{stop:t}},B=function(e,n,i){n.register("orn",S);var r=true;function t(e){var t=BOOMR.now();if(!r)return;n.increment("orn"),n.log(s,t,{a:screen.orientation.angle}),i.interact("orn",t,e)}function o(){r=false,BOOMR.utils.removeListener(e,"orientationchange",t)}return BOOMR.utils.addListener(e,"orientationchange",t,true),{stop:o}},_=function(e,n){n.register("mem",p,true),n.register("bat",R,true),n.register("domsz",p,true),n.register("domln",p,true),n.register("mut",S);var t=1e3,i=e.document,r=true,o=false,a=null,s=0,l=0,u=i.getElementsByTagName("*"),f;function c(){var e=T&&T.memory&&T.memory.usedJSHeapSize;if(e)n.set("mem",e);if(l=u.length,n.set("domsz",i.documentElement.innerHTML.length),n.set("domln",l),s>0){var t=Math.min(Math.round(s/l*100),100);n.set("mut",t),s=0}}function d(){if(!r||!a)return;n.set("bat",a.level)}function m(e){e.forEach(function(e){if("childList"!==e.type)return;for(var t=0;t<e.addedNodes.length;t++){var n=e.addedNodes[t];s++,s+=n.getElementsByTagName?n.getElementsByTagName("*").length:0}})}function O(){if(r=false,o)clearInterval(o),o=false;if(f)f.disconnect();if(a&&a.onlevelchange)a.onlevelchange=null;u=null}if(o=setInterval(c,t),e.navigator&&"function"===typeof e.navigator.getBattery)e.navigator.getBattery().then(function(e){if((a=e).onlevelchange)a.onlevelchange=d});if("function"===typeof e.MutationObserver)(f=new e.MutationObserver(m)).observe(i,{childList:true,subtree:true});return{stop:O}};impl={monitorLongTasks:true,monitorPageBusy:true,monitorFrameRate:true,monitorInteractions:true,monitorStats:true,afterOnload:false,afterOnloadMaxLength:e,afterOnloadMinWait:5e3,waitAfterOnload:false,ttiWaitForFrameworkReady:false,ttiWaitForHeroImages:false,sendLog:true,sendTimeline:true,logMaxEntries:100,initialized:false,complete:false,isSpa:false,firedPageReady:false,afterOnloadMonitoring:false,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,statsMonitor:null,addedVars:[],monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:false,onBeforeBeacon:function(){impl.runAllAnalyzers()},runAllAnalyzers:function(){var e,t;if(impl.hasAddedDataToBeacon)return;for(e=0;e<impl.monitors.length;e++)if((t=impl[impl.monitors[e]])&&"function"===typeof t.analyze)t.analyze(impl.timeOfLastBeacon);impl.addToBeacon("c.lb",impl.timeOfLastBeacon?impl.timeOfLastBeacon.toString(36):0),impl.timeOfLastBeacon=BOOMR.now(),impl.hasAddedDataToBeacon=true},onBeacon:function(){var e;if(impl.addedVars&&impl.addedVars.length>0)BOOMR.removeVar(impl.addedVars),impl.addedVars=[];for(e=0;e<impl.monitors.length;e++){var t=impl[impl.monitors[e]];if(t){if(!impl.afterOnload)if("function"===typeof t.stop)t.stop();if("function"===typeof t.onBeacon)t.onBeacon()}}impl.hasAddedDataToBeacon=false},onXhrLoad:function(e){if(e&&BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS))impl.isSpa=true;if(e&&"spa_hard"===e.initiator)impl.onPageReady()},onPageReady:function(){if(impl.firedPageReady=true,impl.afterOnload&&impl.monitorInteractions)if(impl.afterOnloadMonitoring=true,!impl.isSpa&&"number"===typeof impl.afterOnloadMaxLength)setTimeout(function(){impl.afterOnloadMonitoring=false},impl.afterOnloadMaxLength);if(impl.waitAfterOnload){var t=BOOMR.now();setTimeout(function e(){if(BOOMR.now()-t>impl.waitAfterOnload)impl.complete=true,BOOMR.sendBeacon();else if(impl.timeline.analyze(),E.timeToInteractive())impl.complete=true,BOOMR.sendBeacon();else setTimeout(e,n)},n)}else impl.complete=true},addToBeacon:function(e,t,n){if((0===t||"undefined"===typeof t)&&!n)return void BOOMR.removeVar(e);BOOMR.addVar(e,t),impl.addedVars.push(e)}},BOOMR.plugins.Continuity={init:function(e){if(BOOMR.utils.pluginConfig(impl,e,"Continuity",["monitorLongTasks","monitorPageBusy","monitorFrameRate","monitorInteractions","monitorStats","afterOnload","afterOnloadMaxLength","afterOnloadMinWait","waitAfterOnload","ttiWaitForFrameworkReady","ttiWaitForHeroImages","sendLog","logMaxEntries","sendTimeline"]),impl.initialized)return this;if(impl.initialized=true,impl.timeline=new t(BOOMR.now()),BOOMR.window){if(impl.monitorLongTasks&&BOOMR.window.PerformanceObserver&&BOOMR.window.PerformanceLongTaskTiming)impl.longTaskMonitor=new i(BOOMR.window,impl.timeline),impl.ttiMethod="lt";if(impl.monitorFrameRate&&"function"===typeof BOOMR.window.requestAnimationFrame)if(impl.frameRateMonitor=new o(BOOMR.window,impl.timeline),!impl.ttiMethod)impl.ttiMethod="raf";if(impl.monitorPageBusy&&(!BOOMR.window.PerformanceObserver||!BOOMR.window.PerformanceLongTaskTiming||!impl.monitorLongTasks))if(impl.pageBusyMonitor=new r(BOOMR.window,impl.timeline),!impl.ttiMethod)impl.ttiMethod="b";if(impl.monitorInteractions)impl.interactionMonitor=new h(BOOMR.window,impl.timeline,impl.afterOnloadMinWait),impl.scrollMonitor=new l(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.keyMonitor=new c(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.clickMonitor=new f(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.mouseMonitor=new d(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.visibilityMonitor=new v(BOOMR.window,impl.timeline,impl.interactionMonitor),impl.orientationMonitor=new B(BOOMR.window,impl.timeline,impl.interactionMonitor);if(impl.monitorStats)impl.statsMonitor=new _(BOOMR.window,impl.timeline,impl.interactionMonitor)}return BOOMR.addVar("c.e",x.toString(36)),BOOMR.addVar("c.tti.m",impl.ttiMethod),BOOMR.subscribe("before_beacon",impl.onBeforeBeacon,null,impl),BOOMR.subscribe("beacon",impl.onBeacon,null,impl),BOOMR.subscribe("page_ready",impl.onPageReady,null,impl),BOOMR.subscribe("xhr_load",impl.onXhrLoad,null,impl),this},is_complete:function(e){return impl.complete||e&&"error"===e["http.initiator"]},frameworkReady:function(){impl.frameworkReady=BOOMR.now()},metrics:E}}(),function(){if(BOOMR.plugins.NavigationTiming)return;function u(e,t){if("number"!==typeof t||0===t)return;return Math.floor((e||0)+t)}var f={complete:false,sendBeacon:function(){this.complete=true,BOOMR.sendBeacon()},xhr_done:function(e){var t;if(e&&"spa_hard"===e.initiator)return void f.done(e);else if(e&&"spa"===e.initiator)return void f.sendBeacon();var n=BOOMR.window,i,r={},o;if(!e)return;if(e.data)e=e.data;if((t=BOOMR.getPerformance())&&e.restiming){if(r={nt_red_st:e.restiming.redirectStart,nt_red_end:e.restiming.redirectEnd,nt_fet_st:e.restiming.fetchStart,nt_dns_st:e.restiming.domainLookupStart,nt_dns_end:e.restiming.domainLookupEnd,nt_con_st:e.restiming.connectStart,nt_con_end:e.restiming.connectEnd,nt_req_st:e.restiming.requestStart,nt_res_st:e.restiming.responseStart,nt_res_end:e.restiming.responseEnd},e.restiming.secureConnectionStart)r.nt_ssl_st=e.restiming.secureConnectionStart;for(o in r)if(r.hasOwnProperty(o)&&r[o])r[o]+=t.timing.navigationStart,r[o]=Math.floor(r[o])}if(e.timing){if(i=e.timing,!r.nt_req_st)r.nt_req_st=i.requestStart;if(!r.nt_res_st)r.nt_res_st=i.responseStart;if(!r.nt_res_end)r.nt_res_end=i.responseEnd;r.nt_domint=i.domInteractive,r.nt_domcomp=i.domComplete,r.nt_load_st=i.loadEventEnd,r.nt_load_end=i.loadEventEnd}for(o in r)if(r.hasOwnProperty(o)&&!r[o])delete r[o];BOOMR.addVar(r);try{f.addedVars.push.apply(f.addedVars,Object.keys(r))}catch(e){}f.sendBeacon()},done:function(){var e=BOOMR.window,t,n,i,r,o={},a=0,s,l;if(this.complete)return this;if(f.addedVars=[],t=BOOMR.getPerformance()){if("function"===typeof t.getEntriesByType)if((r=t.getEntriesByType("navigation"))&&r.length)BOOMR.info("This user agent supports NavigationTiming2","nt"),r=r[0],a=t.timing?t.timing.navigationStart:0;else r=void 0;if(!r&&t.timing)BOOMR.info("This user agent supports NavigationTiming","nt"),r=t.timing;if(r){if(!(o={nt_nav_st:t.timing?t.timing.navigationStart:0,nt_red_st:u(a,r.redirectStart),nt_red_end:u(a,r.redirectEnd),nt_fet_st:u(a,r.fetchStart),nt_dns_st:u(a,r.domainLookupStart),nt_dns_end:u(a,r.domainLookupEnd),nt_con_st:u(a,r.connectStart),nt_con_end:u(a,r.connectEnd),nt_req_st:u(a,r.requestStart),nt_res_st:u(a,r.responseStart),nt_res_end:u(a,r.responseEnd),nt_domloading:u(a,r.domLoading),nt_domint:u(a,r.domInteractive),nt_domcontloaded_st:u(a,r.domContentLoadedEventStart),nt_domcontloaded_end:u(a,r.domContentLoadedEventEnd),nt_domcomp:u(a,r.domComplete),nt_load_st:u(a,r.loadEventStart),nt_load_end:u(a,r.loadEventEnd),nt_unload_st:u(a,r.unloadEventStart),nt_unload_end:u(a,r.unloadEventEnd)}).nt_domloading&&t&&t.timing&&t.timing.domLoading)o.nt_domloading=t.timing.domLoading;if(r.secureConnectionStart)o.nt_ssl_st=u(a,r.secureConnectionStart);if(t.timing&&t.timing.msFirstPaint)o.nt_first_paint=t.timing.msFirstPaint;if(r.workerStart)o.nt_worker_start=u(a,r.workerStart);if(r.decodedBodySize||r.transferSize)o.nt_enc_size=r.encodedBodySize,o.nt_dec_size=r.decodedBodySize,o.nt_trn_size=r.transferSize;if(r.nextHopProtocol)o.nt_protocol=r.nextHopProtocol}if(!o.nt_first_paint&&BOOMR.plugins.PaintTiming)if(l=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))o.nt_first_paint=u(a,l);if((!o.nt_protocol||!o.nt_first_paint)&&e.chrome&&"function"===typeof e.chrome.loadTimes)if(i=e.chrome.loadTimes())if(o.nt_spdy=i.wasFetchedViaSpdy?1:0,o.nt_cinf=i.connectionInfo,"number"===typeof i.firstPaintTime&&0!==i.firstPaintTime)o.nt_first_paint=Math.round(1e3*i.firstPaintTime);if(t.navigation)n=t.navigation,o.nt_red_cnt=n.redirectCount,o.nt_nav_type=n.type;for(k in o)if(o.hasOwnProperty(k)&&void 0===o[k])delete o[k];if(BOOMR.addVar(o),r&&(r.requestStart&&r.navigationStart&&r.requestStart<r.navigationStart||r.responseStart&&r.navigationStart&&r.responseStart<r.navigationStart||r.responseStart&&r.fetchStart&&r.responseStart<r.fetchStart||r.navigationStart&&r.fetchStart<r.navigationStart||r.responseEnd&&r.responseEnd>BOOMR.now()+864e5))BOOMR.addVar("nt_bad",1),f.addedVars.push("nt_bad");try{f.addedVars.push.apply(f.addedVars,Object.keys(o))}catch(e){}}f.sendBeacon()},clear:function(){if(f.addedVars&&f.addedVars.length>0)BOOMR.removeVar(f.addedVars),f.addedVars=[];this.complete=false},prerenderToVisible:function(){this.complete=false,this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!f.initialized)BOOMR.subscribe("page_ready",f.done,null,f),BOOMR.subscribe("prerender_to_visible",f.prerenderToVisible,null,f),BOOMR.subscribe("xhr_load",f.xhr_done,null,f),BOOMR.subscribe("beacon",f.clear,null,f),f.initialized=true;return this},is_complete:function(){return true}}}(),BOOMR.init({log:null,Continuity:{enabled:true,clearOnBeacon:true,waitAfterOnload:5e3}}),BOOMR.t_end=(new Date).getTime(),"function"===typeof boomerangBeacon&&boomerangBeacon(),BOOMR.subscribe("before_beacon",function(){BOOMR.fireEvent("onBeacon")});