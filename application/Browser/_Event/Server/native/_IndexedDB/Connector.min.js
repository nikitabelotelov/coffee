define("Browser/_Event/Server/native/_IndexedDB/Connector",["require","exports","Core/Deferred","Browser/_Event/Server/native/_IndexedDB/Writer","Browser/_Event/Server/native/_IndexedDB/Reader"],function(e,r,d,s,t){"use strict";if(Object.defineProperty(r,"__esModule",{value:true}),"undefined"!==typeof indexedDB&&null!==indexedDB&&indexedDB instanceof IDBFactory)try{indexedDB.deleteDatabase("sbis.seb")}catch(e){}var n=function(){function o(e,r,t){this.db=e,this.storeName=r,this.adapter=t}return o.connect=function(e,t,n){var i=new d,r;if("object"!==typeof indexedDB||null===indexedDB)return d.fail("В окружении нет indexedDB");try{r=indexedDB.open(e,n.getVersion())}catch(e){return i.errback(e),i}return r.onupgradeneeded=function(e){var r=this.result;r.onerror=function(e){},new s.Writer(r,t,n).createStore()},r.onsuccess=function(e){var r=this.result;i.callback(new o(r,t,n))},r.onerror=function(e){return i.errback("You haven't rights to use IndexDB."),true},i},o.prototype.createWriter=function(){return new s.Writer(this.db,this.storeName,this.adapter)},o.prototype.createReader=function(){return new t.Reader(this.db,this.storeName,this.adapter)},o.DB_DEBUG="sbis.seb.debug",o.DB_DELIVER="sbis.seb.deliver",o.DEBUG_STORE_NAME="logs",o.EVENTS_STORE_NAME="events",o}();r.Connector=n});