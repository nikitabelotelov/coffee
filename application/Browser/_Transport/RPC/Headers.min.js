define("Browser/_Transport/RPC/Headers",["require","exports","Env/Event","Core/UserInfo","Core/i18n","Core/helpers/i18n/transliterate","Core/base64","Core/helpers/createGUID"],function(e,r,t,o,n,s,i,u){"use strict";Object.defineProperty(r,"__esModule",{value:true});var c="X-LastModification",f={};t.Bus.channel("Transport").subscribe("onResponseSuccess",function(e,r,t,n){f[n]=r.getResponseHeader(c)||f[n]});var h=function(e,r){switch(e){case"GET":var t={},n=o.getCurrent();if(n){var s=n.split("-"),i=s[0],a=s[1];t["X-SbisSessionsID"]=n,t["X-CID"]=i,t["X-UID"]=a}return t;case"POST":var t={};if(f[r])t[c]=f[r];return t;default:return{}}},d=function(e){if(!e)return{};return{"X-CalledMethod":s(""+e),"X-OriginalMethodName":i.encode(""+e),"Accept-Language":(n.getLang()||"ru-RU")+";q=0.8,en-US;q=0.5,en;q=0.3"}},a=function(){function e(e){var r=e.fallback,t=e.asyncInvoke,n=e.url,s=e.recent,i=e.method,a=e.httpMethod,o=e.headers;if(r)this["X-PublishAsyncResponse"]=true,this["X-UNIQ-ID"]=u();if(t||r)this["X-ASYNCINVOKE"]=true;if(s)this["X-RequireRecent"]=true;Object.assign(this,d(i),h(a,n),o)}return e.getForMethod=d,e}();r.default=a});