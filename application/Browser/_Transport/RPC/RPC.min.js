define("Browser/_Transport/RPC/RPC",["require","exports","Browser/_Transport/Sbis/fetch","Browser/_Transport/_utils","Browser/_Transport/RPC/Body","Browser/_Transport/RPC/ErrorCreator","Env/Event","Browser/_Transport/RPC/getFetchConfig","Browser/_Transport/fetch/Errors"],function(r,o,t,e,s,i,n,f,a){"use strict";var u=function(){return n.Bus.globalChannel()},c=function(){return n.Bus.channel("errors")},h;return function(n){var r=t.fetch(f.default(n),t.RESPONSE_TYPE.JSON),o=r.then(function(r){var o=r||s.getEmptyResponse();if("error"in o)throw i.fromRPC(o.error,n.method,n.url);return o.result},function(r){if(r instanceof a.Connection){var o=n.method.split("."),t=o[0],e=o[1];u().notify("onOfflineModeError",t,e,r)}throw i.fromHTTP(r,n.method)}).catch(function(r){if(r.canceled)throw r;if(!r.details){var o=r.httpError||0;r.details=o>500?rk("Попробуйте заглянуть сюда через 15 минут"):""}throw c().notify("onRPCError",r),r});return e.getAbortedPromise(o,r)}});