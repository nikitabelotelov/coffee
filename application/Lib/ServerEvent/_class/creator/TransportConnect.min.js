define("Lib/ServerEvent/_class/creator/TransportConnect",["require","exports"],function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var e=function(){function o(t){if(void 0===t)t=false;this.connectWay=!t?this.byWebSocket:this.bySockjs}return o.prototype.getWebSocket=function(r,o){if(void 0===o)o=true;return new Promise(function(e,n){i(["Lib/ServerEvent/native/SockjsEmulator"],function(t){try{e(new t(r,void 0,o))}catch(t){n(t)}})})},o.prototype.getSockjs=function(r,o){return new Promise(function(t,e){try{var n;t(new r(o.replace("wss:","https:").replace("ws:","http:"),null,{transports:["xhr-streaming"],debug:function(){},stompLogger:function(){}}))}catch(t){return e(t)}})},o.prototype.requireStomp=function(){return new Promise(function(t){i(["Lib/ServerEvent/resources/stomp"],function(){t()})})},o.prototype.requireSockjs=function(){return new Promise(function(n,r){i(["Lib/ServerEvent/resources/stomp","Lib/ServerEvent/resources/sockjs-1.0.3"],function(t,e){if(!e)return r("Can't load Lib/ServerEvent/resources/sockjs-1.0.3");n(e)})})},o.prototype.byWebSocket=function(t,e){var n=this;return this.requireStomp().then(function(){return n.getWebSocket(t,e)})},o.prototype.bySockjs=function(e){var n=this;return this.requireSockjs().then(function(t){return n.getSockjs(t,e)})},o.prototype.initStomp=function(r){return new Promise(function(t,e){var n=Stomp.over(r);n.heartbeat.outgoing=o.STOMP_HEARTBEAT_OUT_TIME,n.heartbeat.incoming=o.STOMP_HEARTBEAT_IN_TIME,n.debug=function(){},n.connect(o.LOGIN,o.PASSWORD,function(){t(n)},function(t){e(t)})})},o.prototype.connect=function(t,e){return this.connectWay(t.getWebSocketUrl(),e).then(this.initStomp)},o.STOMP_HEARTBEAT_OUT_TIME=6e4,o.STOMP_HEARTBEAT_IN_TIME=0,o.LOGIN="stomp_user",o.PASSWORD="stomp_user",o}();t.TransportConnect=e});