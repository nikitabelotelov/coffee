define("Lib/Control/ControlGoodCode",["Core/constants","Core/Deferred","Core/core-merge","Core/ControlBatchUpdater","Core/core-instance","Core/IoC"],function(e,s,r){return{getExtendedTooltip:function(){return this._getOption("extendedTooltip")},setExtendedTooltip:function(t){this._setOption("extendedTooltip",t)},_bindExtendedTooltip:function(){var i=this;if(this._tooltipSettings.handleFocus)this.subscribe("onFocusIn",function(){if(this._isCanShowExtendedTooltip())this._showExtendedTooltip()}),this.subscribe("onFocusOut",function(t,e,o){if(this._isCanShowExtendedTooltip()&&!i._isInfoboxFocus(o))i._getInfobox(function(t){if(t.isCurrentTarget(i._getExtendedTooltipTarget()))t.hide(0)})});if(this._tooltipSettings.handleHover)this.getContainer().bind("mouseenter",function(){if(i._underCursor=true,i._initiatedByCursor=true,i._isCanShowExtendedTooltip())i._showExtendedTooltip(true)}),this.getContainer().bind("mouseleave",function(){if(i._underCursor=false,i._initiatedByCursor=false,i._isCanShowExtendedTooltip())if(!i.isActive())i._getInfobox(function(t){if(t.isCurrentTarget(i._getExtendedTooltipTarget()))t.hide(t.HIDE_TIMEOUT)})})},_isInfoboxFocus:function(t){if(!t)return false;return!!t.getContainer().closest(".ws-info-box").length},_isCanShowExtendedTooltip:function(){var t=false;if(!e.browser.isMobilePlatform&&this._getOption("extendedTooltip"))if(!this.isEnabled())t=!!this._getOption("alwaysShowExtendedTooltip");else t=true;return t},_getExtendedTooltipTarget:function(){return this.getContainer()},_getExtendedTooltipPositionContainer:function(){return this.getContainer()},_showExtendedTooltip:function(t){var o=this,e="Lib/Control/Infobox/Infobox",i,n;if(requirejs.defined(e)){var r=requirejs(e);if(true!==t&&r.isCurrentTarget(this._getExtendedTooltipTarget()))return}this._getInfobox(function(e){if((n=o._notify("onTooltipContentRequest",i=o._getOption("extendedTooltip")))instanceof s)i='<i class="ws-inline-ajax-loader-16">Загрузка&hellip;</i>',n.addBoth(function(t){if(!e.hasTarget())o._finallyShowInfobox(t);else if(e.isCurrentTarget(o._getExtendedTooltipTarget()))e.setText(o._alterTooltipText(t));else e.once("onShow",function(){if(e.isCurrentTarget(o._getExtendedTooltipTarget()))e.setText(o._alterTooltipText(t))});return t});else if("string"===typeof n)i=n;else if(false===n)i="";o._finallyShowInfobox(i)})},_finallyShowInfobox:function(t){if(this._isCanShowExtendedTooltip()){var e=this,o=this._initiatedByCursor,i=function(){return e._isCanShowExtendedTooltip()&&(!o||e._underCursor)},n={control:this._getExtendedTooltipTarget(),positionByTarget:this._getExtendedTooltipPositionContainer(),message:this._alterTooltipText(t),modifiers:this._getExtendedTooltipModifiers(),autoHide:true,needToShow:i};r(n,this._getOption("extendedTooltipConfig")),this._initiatedByCursor=false,this._getInfobox(function(t){n.delay=t.SHOW_TIMEOUT,n.hideDelay=t.ACT_CTRL_HIDE_TIMEOUT,t.show(n)})}},_getInfobox:function(e){var t="Lib/Control/Infobox/Infobox";if(requirejs.defined(t))return e(requirejs(t));else requirejs([t],function(t){return e(t)})}}});