define("UI/_base/StateReceiver",["require","exports","Core/Serializer","Core/IoC","View/Executor/Utils"],function(e,r,c,t,l){"use strict";function f(e){var r,t={},i=e._linksStorage,a;for(var o in i)if(i.hasOwnProperty(o))if((r=i[o]).module)t[(a=c.parseDeclaration(r.module)).name]=true;var s=e._depsStorage||{};for(var n in s)if(s.hasOwnProperty(n))t[n]=true;return t}Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(){this.receivedStateObjectsArray={},this.deserialized={}}return e.prototype.serialize=function(){var e,r={},t={},i=this.receivedStateObjectsArray;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a].getState();if(o)r[a]=o}e=new c;var s=JSON.stringify(r,e.serialize);l.Common.componentOptsReArray.forEach(function(e){s=s.replace(e.toFind,e.toReplace)}),s=s.replace(/\\"/g,'\\\\"');var n=f(e);for(var d in n)if(n.hasOwnProperty(d))t[d]=true;return{serialized:s,additionalDeps:t}},e.prototype.deserialize=function(r){var e=new c;try{this.deserialized=JSON.parse(r,e.deserialize)}catch(e){t.resolve("ILogger").error("Deserialize","Cant't deserialize "+r)}},e.prototype.register=function(e,r){if(this.deserialized[e])r.setState(this.deserialized[e]),delete this.deserialized[e];this.receivedStateObjectsArray[e]=r},e.prototype.unregister=function(e){delete this.receivedStateObjectsArray[e]},e}();r.default=i});