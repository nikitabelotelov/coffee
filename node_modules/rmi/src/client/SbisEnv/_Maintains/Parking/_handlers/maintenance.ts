/// <amd-module name="SbisEnv/_Maintains/Parking/_handlers/maintenance" />
import { MESSAGE, IMAGE, DETAILS } from "SbisEnv/_Maintains/Parking/Const";
import Config from "SbisEnv/_Maintains/Parking/Config";
import { Handler, Mode } from "SbisEnv/Error";
// @ts-ignore
import { HTTP } from 'Transport/Errors';
import Body from 'SbisEnv/_Maintains/Parking/Body';
import getDefaultOptions from "SbisEnv/_Maintains/Parking/_handlers/getDefOptions";
import Page from 'SbisEnv/_Maintains/Parking/Page'

let maintenance: Handler<HTTP, Config> = ({error, mode}) => {
    if (!(
        (error.code == 503) ||
        (error.code == 502) ||
        (error.code == 504)
    )) {
        return ;
    }
    return {
        template: mode == Mode.page ? Page: Body,
        options: {
            ...getDefaultOptions(error, mode),
            message: rk(MESSAGE.SERVICE_FOR_MAINTENANCE),
            image: IMAGE.SERVICE_FOR_MAINTENANCE,
            details: DETAILS.SERVICE_FOR_MAINTENANCE
        }
    }
};

export default maintenance;

